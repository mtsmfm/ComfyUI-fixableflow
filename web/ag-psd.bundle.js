var AgPsd=(()=>{var Vc=Object.create;var hr=Object.defineProperty;var Gc=Object.getOwnPropertyDescriptor;var Hc=Object.getOwnPropertyNames;var jc=Object.getPrototypeOf,Wc=Object.prototype.hasOwnProperty;var Zc=(e,n)=>()=>(e&&(n=e(e=0)),n);var oe=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),oo=(e,n)=>{for(var t in n)hr(e,t,{get:n[t],enumerable:!0})},so=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of Hc(n))!Wc.call(e,i)&&i!==t&&hr(e,i,{get:()=>n[i],enumerable:!(r=Gc(n,i))||r.enumerable});return e};var Xc=(e,n,t)=>(t=e!=null?Vc(jc(e)):{},so(n||!e||!e.__esModule?hr(t,"default",{value:e,enumerable:!0}):t,e)),gi=e=>so(hr({},"__esModule",{value:!0}),e);var Do=oe((Vh,cn)=>{"use strict";function ln(e){let n=e.length;for(;--n>=0;)e[n]=0}var qc=0,po=1,Yc=2,Kc=3,Jc=258,xi=29,Hn=256,zn=Hn+1+xi,sn=30,Ii=19,vo=2*zn+1,Zt=15,mi=16,Qc=7,Fi=256,go=16,mo=17,yo=18,Si=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),pr=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),$c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bo=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eu=512,wt=new Array((zn+2)*2);ln(wt);var Rn=new Array(sn*2);ln(Rn);var Nn=new Array(eu);ln(Nn);var Vn=new Array(Jc-Kc+1);ln(Vn);var Ci=new Array(xi);ln(Ci);var vr=new Array(sn);ln(vr);function yi(e,n,t,r,i){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}var wo,So,_o;function bi(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}var xo=e=>e<256?Nn[e]:Nn[256+(e>>>7)],Gn=(e,n)=>{e.pending_buf[e.pending++]=n&255,e.pending_buf[e.pending++]=n>>>8&255},Ne=(e,n,t)=>{e.bi_valid>mi-t?(e.bi_buf|=n<<e.bi_valid&65535,Gn(e,e.bi_buf),e.bi_buf=n>>mi-e.bi_valid,e.bi_valid+=t-mi):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)},ot=(e,n,t)=>{Ne(e,t[n*2],t[n*2+1])},Io=(e,n)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--n>0);return t>>>1},tu=e=>{e.bi_valid===16?(Gn(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},nu=(e,n)=>{let t=n.dyn_tree,r=n.max_code,i=n.stat_desc.static_tree,a=n.stat_desc.has_stree,o=n.stat_desc.extra_bits,s=n.stat_desc.extra_base,c=n.stat_desc.max_length,l,u,d,f,h,m,w=0;for(f=0;f<=Zt;f++)e.bl_count[f]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<vo;l++)u=e.heap[l],f=t[t[u*2+1]*2+1]+1,f>c&&(f=c,w++),t[u*2+1]=f,!(u>r)&&(e.bl_count[f]++,h=0,u>=s&&(h=o[u-s]),m=t[u*2],e.opt_len+=m*(f+h),a&&(e.static_len+=m*(i[u*2+1]+h)));if(w!==0){do{for(f=c-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[c]--,w-=2}while(w>0);for(f=c;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--l],!(d>r)&&(t[d*2+1]!==f&&(e.opt_len+=(f-t[d*2+1])*t[d*2],t[d*2+1]=f),u--)}},Fo=(e,n,t)=>{let r=new Array(Zt+1),i=0,a,o;for(a=1;a<=Zt;a++)i=i+t[a-1]<<1,r[a]=i;for(o=0;o<=n;o++){let s=e[o*2+1];s!==0&&(e[o*2]=Io(r[s]++,s))}},ru=()=>{let e,n,t,r,i,a=new Array(Zt+1);for(t=0,r=0;r<xi-1;r++)for(Ci[r]=t,e=0;e<1<<Si[r];e++)Vn[t++]=r;for(Vn[t-1]=r,i=0,r=0;r<16;r++)for(vr[r]=i,e=0;e<1<<pr[r];e++)Nn[i++]=r;for(i>>=7;r<sn;r++)for(vr[r]=i<<7,e=0;e<1<<pr[r]-7;e++)Nn[256+i++]=r;for(n=0;n<=Zt;n++)a[n]=0;for(e=0;e<=143;)wt[e*2+1]=8,e++,a[8]++;for(;e<=255;)wt[e*2+1]=9,e++,a[9]++;for(;e<=279;)wt[e*2+1]=7,e++,a[7]++;for(;e<=287;)wt[e*2+1]=8,e++,a[8]++;for(Fo(wt,zn+1,a),e=0;e<sn;e++)Rn[e*2+1]=5,Rn[e*2]=Io(e,5);wo=new yi(wt,Si,Hn+1,zn,Zt),So=new yi(Rn,pr,0,sn,Zt),_o=new yi(new Array(0),$c,0,Ii,Qc)},Co=e=>{let n;for(n=0;n<zn;n++)e.dyn_ltree[n*2]=0;for(n=0;n<sn;n++)e.dyn_dtree[n*2]=0;for(n=0;n<Ii;n++)e.bl_tree[n*2]=0;e.dyn_ltree[Fi*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},ko=e=>{e.bi_valid>8?Gn(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},lo=(e,n,t,r)=>{let i=n*2,a=t*2;return e[i]<e[a]||e[i]===e[a]&&r[n]<=r[t]},wi=(e,n,t)=>{let r=e.heap[t],i=t<<1;for(;i<=e.heap_len&&(i<e.heap_len&&lo(n,e.heap[i+1],e.heap[i],e.depth)&&i++,!lo(n,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r},co=(e,n,t)=>{let r,i,a=0,o,s;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+a++]&255,r+=(e.pending_buf[e.sym_buf+a++]&255)<<8,i=e.pending_buf[e.sym_buf+a++],r===0?ot(e,i,n):(o=Vn[i],ot(e,o+Hn+1,n),s=Si[o],s!==0&&(i-=Ci[o],Ne(e,i,s)),r--,o=xo(r),ot(e,o,t),s=pr[o],s!==0&&(r-=vr[o],Ne(e,r,s)));while(a<e.sym_next);ot(e,Fi,n)},_i=(e,n)=>{let t=n.dyn_tree,r=n.stat_desc.static_tree,i=n.stat_desc.has_stree,a=n.stat_desc.elems,o,s,c=-1,l;for(e.heap_len=0,e.heap_max=vo,o=0;o<a;o++)t[o*2]!==0?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):t[o*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[l*2+1]);for(n.max_code=c,o=e.heap_len>>1;o>=1;o--)wi(e,t,o);l=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],wi(e,t,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,t[l*2]=t[o*2]+t[s*2],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,t[o*2+1]=t[s*2+1]=l,e.heap[1]=l++,wi(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],nu(e,n),Fo(t,c,e.bl_count)},uo=(e,n,t)=>{let r,i=-1,a,o=n[0*2+1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),n[(t+1)*2+1]=65535,r=0;r<=t;r++)a=o,o=n[(r+1)*2+1],!(++s<c&&a===o)&&(s<l?e.bl_tree[a*2]+=s:a!==0?(a!==i&&e.bl_tree[a*2]++,e.bl_tree[go*2]++):s<=10?e.bl_tree[mo*2]++:e.bl_tree[yo*2]++,s=0,i=a,o===0?(c=138,l=3):a===o?(c=6,l=3):(c=7,l=4))},fo=(e,n,t)=>{let r,i=-1,a,o=n[0*2+1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),r=0;r<=t;r++)if(a=o,o=n[(r+1)*2+1],!(++s<c&&a===o)){if(s<l)do ot(e,a,e.bl_tree);while(--s!==0);else a!==0?(a!==i&&(ot(e,a,e.bl_tree),s--),ot(e,go,e.bl_tree),Ne(e,s-3,2)):s<=10?(ot(e,mo,e.bl_tree),Ne(e,s-3,3)):(ot(e,yo,e.bl_tree),Ne(e,s-11,7));s=0,i=a,o===0?(c=138,l=3):a===o?(c=6,l=3):(c=7,l=4)}},iu=e=>{let n;for(uo(e,e.dyn_ltree,e.l_desc.max_code),uo(e,e.dyn_dtree,e.d_desc.max_code),_i(e,e.bl_desc),n=Ii-1;n>=3&&e.bl_tree[bo[n]*2+1]===0;n--);return e.opt_len+=3*(n+1)+5+5+4,n},au=(e,n,t,r)=>{let i;for(Ne(e,n-257,5),Ne(e,t-1,5),Ne(e,r-4,4),i=0;i<r;i++)Ne(e,e.bl_tree[bo[i]*2+1],3);fo(e,e.dyn_ltree,n-1),fo(e,e.dyn_dtree,t-1)},ou=e=>{let n=4093624447,t;for(t=0;t<=31;t++,n>>>=1)if(n&1&&e.dyn_ltree[t*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(t=32;t<Hn;t++)if(e.dyn_ltree[t*2]!==0)return 1;return 0},ho=!1,su=e=>{ho||(ru(),ho=!0),e.l_desc=new bi(e.dyn_ltree,wo),e.d_desc=new bi(e.dyn_dtree,So),e.bl_desc=new bi(e.bl_tree,_o),e.bi_buf=0,e.bi_valid=0,Co(e)},Ao=(e,n,t,r)=>{Ne(e,(qc<<1)+(r?1:0),3),ko(e),Gn(e,t),Gn(e,~t),t&&e.pending_buf.set(e.window.subarray(n,n+t),e.pending),e.pending+=t},lu=e=>{Ne(e,po<<1,3),ot(e,Fi,wt),tu(e)},cu=(e,n,t,r)=>{let i,a,o=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=ou(e)),_i(e,e.l_desc),_i(e,e.d_desc),o=iu(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=t+5,t+4<=i&&n!==-1?Ao(e,n,t,r):e.strategy===4||a===i?(Ne(e,(po<<1)+(r?1:0),3),co(e,wt,Rn)):(Ne(e,(Yc<<1)+(r?1:0),3),au(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),co(e,e.dyn_ltree,e.dyn_dtree)),Co(e),r&&ko(e)},uu=(e,n,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=n,e.pending_buf[e.sym_buf+e.sym_next++]=n>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,n===0?e.dyn_ltree[t*2]++:(e.matches++,n--,e.dyn_ltree[(Vn[t]+Hn+1)*2]++,e.dyn_dtree[xo(n)*2]++),e.sym_next===e.sym_end);cn.exports._tr_init=su;cn.exports._tr_stored_block=Ao;cn.exports._tr_flush_block=cu;cn.exports._tr_tally=uu;cn.exports._tr_align=lu});var ki=oe((Gh,Eo)=>{"use strict";var fu=(e,n,t,r)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do i=i+n[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};Eo.exports=fu});var Ai=oe((Hh,Uo)=>{"use strict";var du=()=>{let e,n=[];for(var t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;n[t]=e}return n},hu=new Uint32Array(du()),pu=(e,n,t,r)=>{let i=hu,a=r+t;e^=-1;for(let o=r;o<a;o++)e=e>>>8^i[(e^n[o])&255];return e^-1};Uo.exports=pu});var gr=oe((jh,Po)=>{"use strict";Po.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var Pt=oe((Wh,To)=>{"use strict";To.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var Ho=oe((Zh,ut)=>{"use strict";var{_tr_init:vu,_tr_stored_block:Ui,_tr_flush_block:gu,_tr_tally:Ot,_tr_align:mu}=Do(),Bo=ki(),Tt=Ai(),yu=gr(),{Z_NO_FLUSH:Bt,Z_PARTIAL_FLUSH:bu,Z_FULL_FLUSH:wu,Z_FINISH:Ke,Z_BLOCK:Mo,Z_OK:Ee,Z_STREAM_END:Lo,Z_STREAM_ERROR:lt,Z_DATA_ERROR:Su,Z_BUF_ERROR:Di,Z_DEFAULT_COMPRESSION:_u,Z_FILTERED:xu,Z_HUFFMAN_ONLY:mr,Z_RLE:Iu,Z_FIXED:Fu,Z_DEFAULT_STRATEGY:Cu,Z_UNKNOWN:ku,Z_DEFLATED:yr}=Pt(),Au=9,Du=15,Eu=8,Uu=29,Pu=256,Pi=Pu+1+Uu,Tu=30,Mu=19,Lu=2*Pi+1,Ou=15,ae=3,Lt=258,ct=Lt+ae+1,Bu=32,fn=42,Ri=57,Ti=69,Mi=73,Li=91,Oi=103,Xt=113,Wn=666,Be=1,hn=2,Yt=3,pn=4,Ru=3,qt=(e,n)=>(e.msg=yu[n],n),Oo=e=>e*2-(e>4?9:0),Mt=e=>{let n=e.length;for(;--n>=0;)e[n]=0},zu=e=>{let n,t,r,i=e.w_size;n=e.hash_size,r=n;do t=e.head[--r],e.head[r]=t>=i?t-i:0;while(--n);n=i,r=n;do t=e.prev[--r],e.prev[r]=t>=i?t-i:0;while(--n)},Nu=(e,n,t)=>(n<<e.hash_shift^t)&e.hash_mask,Rt=Nu,He=e=>{let n=e.state,t=n.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+t),e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,n.pending===0&&(n.pending_out=0))},je=(e,n)=>{gu(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,He(e.strm)},ce=(e,n)=>{e.pending_buf[e.pending++]=n},jn=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=n&255},Bi=(e,n,t,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,n.set(e.input.subarray(e.next_in,e.next_in+i),t),e.state.wrap===1?e.adler=Bo(e.adler,n,i,t):e.state.wrap===2&&(e.adler=Tt(e.adler,n,i,t)),e.next_in+=i,e.total_in+=i,i)},Ro=(e,n)=>{let t=e.max_chain_length,r=e.strstart,i,a,o=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-ct?e.strstart-(e.w_size-ct):0,l=e.window,u=e.w_mask,d=e.prev,f=e.strstart+Lt,h=l[r+o-1],m=l[r+o];e.prev_length>=e.good_match&&(t>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=n,!(l[i+o]!==m||l[i+o-1]!==h||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<f);if(a=Lt-(f-r),r=f-Lt,a>o){if(e.match_start=n,o=a,a>=s)break;h=l[r+o-1],m=l[r+o]}}while((n=d[n&u])>c&&--t!==0);return o<=e.lookahead?o:e.lookahead},dn=e=>{let n=e.w_size,t,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-ct)&&(e.window.set(e.window.subarray(n,n+n-r),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),zu(e),r+=n),e.strm.avail_in===0)break;if(t=Bi(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=ae)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Rt(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Rt(e,e.ins_h,e.window[i+ae-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<ae)););}while(e.lookahead<ct&&e.strm.avail_in!==0)},zo=(e,n)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,a,o=0,s=e.strm.avail_in;do{if(r=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>a&&(r=a),r<t&&(r===0&&n!==Ke||n===Bt||r!==i+e.strm.avail_in)))break;o=n===Ke&&r===i+e.strm.avail_in?1:0,Ui(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,He(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(Bi(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(o===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?pn:n!==Bt&&n!==Ke&&e.strm.avail_in===0&&e.strstart===e.block_start?hn:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Bi(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,t=a>e.w_size?e.w_size:a,i=e.strstart-e.block_start,(i>=t||(i||n===Ke)&&n!==Bt&&e.strm.avail_in===0&&i<=a)&&(r=i>a?a:i,o=n===Ke&&e.strm.avail_in===0&&r===i?1:0,Ui(e,e.block_start,r,o),e.block_start+=r,He(e.strm)),o?Yt:Be)},Ei=(e,n)=>{let t,r;for(;;){if(e.lookahead<ct){if(dn(e),e.lookahead<ct&&n===Bt)return Be;if(e.lookahead===0)break}if(t=0,e.lookahead>=ae&&(e.ins_h=Rt(e,e.ins_h,e.window[e.strstart+ae-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-ct&&(e.match_length=Ro(e,t)),e.match_length>=ae)if(r=Ot(e,e.strstart-e.match_start,e.match_length-ae),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ae){e.match_length--;do e.strstart++,e.ins_h=Rt(e,e.ins_h,e.window[e.strstart+ae-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Rt(e,e.ins_h,e.window[e.strstart+1]);else r=Ot(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(je(e,!1),e.strm.avail_out===0))return Be}return e.insert=e.strstart<ae-1?e.strstart:ae-1,n===Ke?(je(e,!0),e.strm.avail_out===0?Yt:pn):e.sym_next&&(je(e,!1),e.strm.avail_out===0)?Be:hn},un=(e,n)=>{let t,r,i;for(;;){if(e.lookahead<ct){if(dn(e),e.lookahead<ct&&n===Bt)return Be;if(e.lookahead===0)break}if(t=0,e.lookahead>=ae&&(e.ins_h=Rt(e,e.ins_h,e.window[e.strstart+ae-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ae-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-ct&&(e.match_length=Ro(e,t),e.match_length<=5&&(e.strategy===xu||e.match_length===ae&&e.strstart-e.match_start>4096)&&(e.match_length=ae-1)),e.prev_length>=ae&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ae,r=Ot(e,e.strstart-1-e.prev_match,e.prev_length-ae),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Rt(e,e.ins_h,e.window[e.strstart+ae-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=ae-1,e.strstart++,r&&(je(e,!1),e.strm.avail_out===0))return Be}else if(e.match_available){if(r=Ot(e,0,e.window[e.strstart-1]),r&&je(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Be}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Ot(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ae-1?e.strstart:ae-1,n===Ke?(je(e,!0),e.strm.avail_out===0?Yt:pn):e.sym_next&&(je(e,!1),e.strm.avail_out===0)?Be:hn},Vu=(e,n)=>{let t,r,i,a,o=e.window;for(;;){if(e.lookahead<=Lt){if(dn(e),e.lookahead<=Lt&&n===Bt)return Be;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=ae&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+Lt;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=Lt-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ae?(t=Ot(e,1,e.match_length-ae),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=Ot(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(je(e,!1),e.strm.avail_out===0))return Be}return e.insert=0,n===Ke?(je(e,!0),e.strm.avail_out===0?Yt:pn):e.sym_next&&(je(e,!1),e.strm.avail_out===0)?Be:hn},Gu=(e,n)=>{let t;for(;;){if(e.lookahead===0&&(dn(e),e.lookahead===0)){if(n===Bt)return Be;break}if(e.match_length=0,t=Ot(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(je(e,!1),e.strm.avail_out===0))return Be}return e.insert=0,n===Ke?(je(e,!0),e.strm.avail_out===0?Yt:pn):e.sym_next&&(je(e,!1),e.strm.avail_out===0)?Be:hn};function st(e,n,t,r,i){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=i}var Zn=[new st(0,0,0,0,zo),new st(4,4,8,4,Ei),new st(4,5,16,8,Ei),new st(4,6,32,32,Ei),new st(4,4,16,16,un),new st(8,16,32,32,un),new st(8,16,128,128,un),new st(8,32,128,256,un),new st(32,128,258,1024,un),new st(32,258,258,4096,un)],Hu=e=>{e.window_size=2*e.w_size,Mt(e.head),e.max_lazy_match=Zn[e.level].max_lazy,e.good_match=Zn[e.level].good_length,e.nice_match=Zn[e.level].nice_length,e.max_chain_length=Zn[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ae-1,e.match_available=0,e.ins_h=0};function ju(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=yr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Lu*2),this.dyn_dtree=new Uint16Array((2*Tu+1)*2),this.bl_tree=new Uint16Array((2*Mu+1)*2),Mt(this.dyn_ltree),Mt(this.dyn_dtree),Mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ou+1),this.heap=new Uint16Array(2*Pi+1),Mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Pi+1),Mt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Xn=e=>{if(!e)return 1;let n=e.state;return!n||n.strm!==e||n.status!==fn&&n.status!==Ri&&n.status!==Ti&&n.status!==Mi&&n.status!==Li&&n.status!==Oi&&n.status!==Xt&&n.status!==Wn?1:0},No=e=>{if(Xn(e))return qt(e,lt);e.total_in=e.total_out=0,e.data_type=ku;let n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?Ri:n.wrap?fn:Xt,e.adler=n.wrap===2?0:1,n.last_flush=-2,vu(n),Ee},Vo=e=>{let n=No(e);return n===Ee&&Hu(e.state),n},Wu=(e,n)=>Xn(e)||e.state.wrap!==2?lt:(e.state.gzhead=n,Ee),Go=(e,n,t,r,i,a)=>{if(!e)return lt;let o=1;if(n===_u&&(n=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>Au||t!==yr||r<8||r>15||n<0||n>9||a<0||a>Fu||r===8&&o!==1)return qt(e,lt);r===8&&(r=9);let s=new ju;return e.state=s,s.strm=e,s.status=fn,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+ae-1)/ae),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=n,s.strategy=a,s.method=t,Vo(e)},Zu=(e,n)=>Go(e,n,yr,Du,Eu,Cu),Xu=(e,n)=>{if(Xn(e)||n>Mo||n<0)return e?qt(e,lt):lt;let t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Wn&&n!==Ke)return qt(e,e.avail_out===0?Di:lt);let r=t.last_flush;if(t.last_flush=n,t.pending!==0){if(He(e),e.avail_out===0)return t.last_flush=-1,Ee}else if(e.avail_in===0&&Oo(n)<=Oo(r)&&n!==Ke)return qt(e,Di);if(t.status===Wn&&e.avail_in!==0)return qt(e,Di);if(t.status===fn&&t.wrap===0&&(t.status=Xt),t.status===fn){let i=yr+(t.w_bits-8<<4)<<8,a=-1;if(t.strategy>=mr||t.level<2?a=0:t.level<6?a=1:t.level===6?a=2:a=3,i|=a<<6,t.strstart!==0&&(i|=Bu),i+=31-i%31,jn(t,i),t.strstart!==0&&(jn(t,e.adler>>>16),jn(t,e.adler&65535)),e.adler=1,t.status=Xt,He(e),t.pending!==0)return t.last_flush=-1,Ee}if(t.status===Ri){if(e.adler=0,ce(t,31),ce(t,139),ce(t,8),t.gzhead)ce(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),ce(t,t.gzhead.time&255),ce(t,t.gzhead.time>>8&255),ce(t,t.gzhead.time>>16&255),ce(t,t.gzhead.time>>24&255),ce(t,t.level===9?2:t.strategy>=mr||t.level<2?4:0),ce(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(ce(t,t.gzhead.extra.length&255),ce(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=Tt(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Ti;else if(ce(t,0),ce(t,0),ce(t,0),ce(t,0),ce(t,0),ce(t,t.level===9?2:t.strategy>=mr||t.level<2?4:0),ce(t,Ru),t.status=Xt,He(e),t.pending!==0)return t.last_flush=-1,Ee}if(t.status===Ti){if(t.gzhead.extra){let i=t.pending,a=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let s=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(e.adler=Tt(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=s,He(e),t.pending!==0)return t.last_flush=-1,Ee;i=0,a-=s}let o=new Uint8Array(t.gzhead.extra);t.pending_buf.set(o.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>i&&(e.adler=Tt(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=Mi}if(t.status===Mi){if(t.gzhead.name){let i=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(e.adler=Tt(e.adler,t.pending_buf,t.pending-i,i)),He(e),t.pending!==0)return t.last_flush=-1,Ee;i=0}t.gzindex<t.gzhead.name.length?a=t.gzhead.name.charCodeAt(t.gzindex++)&255:a=0,ce(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>i&&(e.adler=Tt(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=Li}if(t.status===Li){if(t.gzhead.comment){let i=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(e.adler=Tt(e.adler,t.pending_buf,t.pending-i,i)),He(e),t.pending!==0)return t.last_flush=-1,Ee;i=0}t.gzindex<t.gzhead.comment.length?a=t.gzhead.comment.charCodeAt(t.gzindex++)&255:a=0,ce(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>i&&(e.adler=Tt(e.adler,t.pending_buf,t.pending-i,i))}t.status=Oi}if(t.status===Oi){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(He(e),t.pending!==0))return t.last_flush=-1,Ee;ce(t,e.adler&255),ce(t,e.adler>>8&255),e.adler=0}if(t.status=Xt,He(e),t.pending!==0)return t.last_flush=-1,Ee}if(e.avail_in!==0||t.lookahead!==0||n!==Bt&&t.status!==Wn){let i=t.level===0?zo(t,n):t.strategy===mr?Gu(t,n):t.strategy===Iu?Vu(t,n):Zn[t.level].func(t,n);if((i===Yt||i===pn)&&(t.status=Wn),i===Be||i===Yt)return e.avail_out===0&&(t.last_flush=-1),Ee;if(i===hn&&(n===bu?mu(t):n!==Mo&&(Ui(t,0,0,!1),n===wu&&(Mt(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),He(e),e.avail_out===0))return t.last_flush=-1,Ee}return n!==Ke?Ee:t.wrap<=0?Lo:(t.wrap===2?(ce(t,e.adler&255),ce(t,e.adler>>8&255),ce(t,e.adler>>16&255),ce(t,e.adler>>24&255),ce(t,e.total_in&255),ce(t,e.total_in>>8&255),ce(t,e.total_in>>16&255),ce(t,e.total_in>>24&255)):(jn(t,e.adler>>>16),jn(t,e.adler&65535)),He(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Ee:Lo)},qu=e=>{if(Xn(e))return lt;let n=e.state.status;return e.state=null,n===Xt?qt(e,Su):Ee},Yu=(e,n)=>{let t=n.length;if(Xn(e))return lt;let r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==fn||r.lookahead)return lt;if(i===1&&(e.adler=Bo(e.adler,n,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Mt(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(n.subarray(t-r.w_size,t),0),n=c,t=r.w_size}let a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=t,e.next_in=0,e.input=n,dn(r);r.lookahead>=ae;){let c=r.strstart,l=r.lookahead-(ae-1);do r.ins_h=Rt(r,r.ins_h,r.window[c+ae-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=ae-1,dn(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=ae-1,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,Ee};ut.exports.deflateInit=Zu;ut.exports.deflateInit2=Go;ut.exports.deflateReset=Vo;ut.exports.deflateResetKeep=No;ut.exports.deflateSetHeader=Wu;ut.exports.deflate=Xu;ut.exports.deflateEnd=qu;ut.exports.deflateSetDictionary=Yu;ut.exports.deflateInfo="pako deflate (from Nodeca project)"});var Ni=oe((Xh,zi)=>{"use strict";var Ku=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);zi.exports.assign=function(e){let n=Array.prototype.slice.call(arguments,1);for(;n.length;){let t=n.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)Ku(t,r)&&(e[r]=t[r])}}return e};zi.exports.flattenChunks=e=>{let n=0;for(let r=0,i=e.length;r<i;r++)n+=e[r].length;let t=new Uint8Array(n);for(let r=0,i=0,a=e.length;r<a;r++){let o=e[r];t.set(o,i),i+=o.length}return t}});var Vi=oe((qh,br)=>{"use strict";var jo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{jo=!1}var qn=new Uint8Array(256);for(let e=0;e<256;e++)qn[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;qn[254]=qn[254]=1;br.exports.string2buf=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,t,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),s+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Uint8Array(s),a=0,i=0;a<s;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?n[a++]=t:t<2048?(n[a++]=192|t>>>6,n[a++]=128|t&63):t<65536?(n[a++]=224|t>>>12,n[a++]=128|t>>>6&63,n[a++]=128|t&63):(n[a++]=240|t>>>18,n[a++]=128|t>>>12&63,n[a++]=128|t>>>6&63,n[a++]=128|t&63);return n};var Ju=(e,n)=>{if(n<65534&&e.subarray&&jo)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let t="";for(let r=0;r<n;r++)t+=String.fromCharCode(e[r]);return t};br.exports.buf2string=(e,n)=>{let t=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let r,i,a=new Array(t*2);for(i=0,r=0;r<t;){let o=e[r++];if(o<128){a[i++]=o;continue}let s=qn[o];if(s>4){a[i++]=65533,r+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&r<t;)o=o<<6|e[r++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return Ju(a,i)};br.exports.utf8border=(e,n)=>{n=n||e.length,n>e.length&&(n=e.length);let t=n-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?n:t+qn[e[t]]>n?t:n}});var Gi=oe((Yh,Wo)=>{"use strict";function Qu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Wo.exports=Qu});var Yo=oe((Kh,vn)=>{"use strict";var Yn=Ho(),Zo=Ni(),Xo=Vi(),Hi=gr(),$u=Gi(),qo=Object.prototype.toString,{Z_NO_FLUSH:ef,Z_SYNC_FLUSH:tf,Z_FULL_FLUSH:nf,Z_FINISH:rf,Z_OK:wr,Z_STREAM_END:af,Z_DEFAULT_COMPRESSION:of,Z_DEFAULT_STRATEGY:sf,Z_DEFLATED:lf}=Pt();function Kn(e){this.options=Zo.assign({level:of,method:lf,chunkSize:16384,windowBits:15,memLevel:8,strategy:sf},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $u,this.strm.avail_out=0;let t=Yn.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==wr)throw new Error(Hi[t]);if(n.header&&Yn.deflateSetHeader(this.strm,n.header),n.dictionary){let r;if(typeof n.dictionary=="string"?r=Xo.string2buf(n.dictionary):qo.call(n.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(n.dictionary):r=n.dictionary,t=Yn.deflateSetDictionary(this.strm,r),t!==wr)throw new Error(Hi[t]);this._dict_set=!0}}Kn.prototype.push=function(e,n){let t=this.strm,r=this.options.chunkSize,i,a;if(this.ended)return!1;for(n===~~n?a=n:a=n===!0?rf:ef,typeof e=="string"?t.input=Xo.string2buf(e):qo.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(a===tf||a===nf)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=Yn.deflate(t,a),i===af)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=Yn.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===wr;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Kn.prototype.onData=function(e){this.chunks.push(e)};Kn.prototype.onEnd=function(e){e===wr&&(this.result=Zo.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ji(e,n){let t=new Kn(n);if(t.push(e,!0),t.err)throw t.msg||Hi[t.err];return t.result}function cf(e,n){return n=n||{},n.raw=!0,ji(e,n)}function uf(e,n){return n=n||{},n.gzip=!0,ji(e,n)}vn.exports.Deflate=Kn;vn.exports.deflate=ji;vn.exports.deflateRaw=cf;vn.exports.gzip=uf;vn.exports.constants=Pt()});var Jo=oe((Jh,Ko)=>{"use strict";Ko.exports=function(n,t){let r,i,a,o,s,c,l,u,d,f,h,m,w,F,y,_,I,S,C,E,k,A,L,T,O=n.state;r=n.next_in,L=n.input,i=r+(n.avail_in-5),a=n.next_out,T=n.output,o=a-(t-n.avail_out),s=a+(n.avail_out-257),c=O.dmax,l=O.wsize,u=O.whave,d=O.wnext,f=O.window,h=O.hold,m=O.bits,w=O.lencode,F=O.distcode,y=(1<<O.lenbits)-1,_=(1<<O.distbits)-1;e:do{m<15&&(h+=L[r++]<<m,m+=8,h+=L[r++]<<m,m+=8),I=w[h&y];t:for(;;){if(S=I>>>24,h>>>=S,m-=S,S=I>>>16&255,S===0)T[a++]=I&65535;else if(S&16){C=I&65535,S&=15,S&&(m<S&&(h+=L[r++]<<m,m+=8),C+=h&(1<<S)-1,h>>>=S,m-=S),m<15&&(h+=L[r++]<<m,m+=8,h+=L[r++]<<m,m+=8),I=F[h&_];n:for(;;){if(S=I>>>24,h>>>=S,m-=S,S=I>>>16&255,S&16){if(E=I&65535,S&=15,m<S&&(h+=L[r++]<<m,m+=8,m<S&&(h+=L[r++]<<m,m+=8)),E+=h&(1<<S)-1,E>c){n.msg="invalid distance too far back",O.mode=16209;break e}if(h>>>=S,m-=S,S=a-o,E>S){if(S=E-S,S>u&&O.sane){n.msg="invalid distance too far back",O.mode=16209;break e}if(k=0,A=f,d===0){if(k+=l-S,S<C){C-=S;do T[a++]=f[k++];while(--S);k=a-E,A=T}}else if(d<S){if(k+=l+d-S,S-=d,S<C){C-=S;do T[a++]=f[k++];while(--S);if(k=0,d<C){S=d,C-=S;do T[a++]=f[k++];while(--S);k=a-E,A=T}}}else if(k+=d-S,S<C){C-=S;do T[a++]=f[k++];while(--S);k=a-E,A=T}for(;C>2;)T[a++]=A[k++],T[a++]=A[k++],T[a++]=A[k++],C-=3;C&&(T[a++]=A[k++],C>1&&(T[a++]=A[k++]))}else{k=a-E;do T[a++]=T[k++],T[a++]=T[k++],T[a++]=T[k++],C-=3;while(C>2);C&&(T[a++]=T[k++],C>1&&(T[a++]=T[k++]))}}else if(S&64){n.msg="invalid distance code",O.mode=16209;break e}else{I=F[(I&65535)+(h&(1<<S)-1)];continue n}break}}else if(S&64)if(S&32){O.mode=16191;break e}else{n.msg="invalid literal/length code",O.mode=16209;break e}else{I=w[(I&65535)+(h&(1<<S)-1)];continue t}break}}while(r<i&&a<s);C=m>>3,r-=C,m-=C<<3,h&=(1<<m)-1,n.next_in=r,n.next_out=a,n.avail_in=r<i?5+(i-r):5-(r-i),n.avail_out=a<s?257+(s-a):257-(a-s),O.hold=h,O.bits=m}});var $o=oe((Qh,Qo)=>{"use strict";var ff=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),df=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pf=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),vf=(e,n,t,r,i,a,o,s)=>{let c=s.bits,l=0,u=0,d=0,f=0,h=0,m=0,w=0,F=0,y=0,_=0,I,S,C,E,k,A=null,L,T=new Uint16Array(16),O=new Uint16Array(16),W=null,D,B,H;for(l=0;l<=15;l++)T[l]=0;for(u=0;u<r;u++)T[n[t+u]]++;for(h=c,f=15;f>=1&&T[f]===0;f--);if(h>f&&(h=f),f===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(d=1;d<f&&T[d]===0;d++);for(h<d&&(h=d),F=1,l=1;l<=15;l++)if(F<<=1,F-=T[l],F<0)return-1;if(F>0&&(e===0||f!==1))return-1;for(O[1]=0,l=1;l<15;l++)O[l+1]=O[l]+T[l];for(u=0;u<r;u++)n[t+u]!==0&&(o[O[n[t+u]]++]=u);if(e===0?(A=W=o,L=20):e===1?(A=ff,W=df,L=257):(A=hf,W=pf,L=0),_=0,u=0,l=d,k=a,m=h,w=0,C=-1,y=1<<h,E=y-1,e===1&&y>852||e===2&&y>592)return 1;for(;;){D=l-w,o[u]+1<L?(B=0,H=o[u]):o[u]>=L?(B=W[o[u]-L],H=A[o[u]-L]):(B=96,H=0),I=1<<l-w,S=1<<m,d=S;do S-=I,i[k+(_>>w)+S]=D<<24|B<<16|H|0;while(S!==0);for(I=1<<l-1;_&I;)I>>=1;if(I!==0?(_&=I-1,_+=I):_=0,u++,--T[l]===0){if(l===f)break;l=n[t+o[u]]}if(l>h&&(_&E)!==C){for(w===0&&(w=h),k+=d,m=l-w,F=1<<m;m+w<f&&(F-=T[m+w],!(F<=0));)m++,F<<=1;if(y+=1<<m,e===1&&y>852||e===2&&y>592)return 1;C=_&E,i[C]=h<<24|m<<16|k-a|0}}return _!==0&&(i[k+_]=l-w<<24|64<<16|0),s.bits=h,0};Qo.exports=vf});var Ms=oe(($h,tt)=>{"use strict";var Ki=ki(),ft=Ai(),gf=Jo(),Jn=$o(),mf=0,Fs=1,Cs=2,{Z_FINISH:es,Z_BLOCK:yf,Z_TREES:Sr,Z_OK:Kt,Z_STREAM_END:bf,Z_NEED_DICT:wf,Z_STREAM_ERROR:Je,Z_DATA_ERROR:ks,Z_MEM_ERROR:Ji,Z_BUF_ERROR:Sf,Z_DEFLATED:ts}=Pt(),Fr=16180,ns=16181,rs=16182,is=16183,as=16184,os=16185,ss=16186,ls=16187,cs=16188,us=16189,Ir=16190,St=16191,Wi=16192,fs=16193,Zi=16194,ds=16195,hs=16196,ps=16197,vs=16198,_r=16199,xr=16200,gs=16201,ms=16202,ys=16203,bs=16204,ws=16205,Xi=16206,Ss=16207,_s=16208,ye=16209,Qi=16210,As=16211,_f=852,xf=592,If=15,Ff=If,xs=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Cf(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Jt=e=>{if(!e)return 1;let n=e.state;return!n||n.strm!==e||n.mode<Fr||n.mode>As?1:0},Ds=e=>{if(Jt(e))return Je;let n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=n.wrap&1),n.mode=Fr,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(_f),n.distcode=n.distdyn=new Int32Array(xf),n.sane=1,n.back=-1,Kt},Es=e=>{if(Jt(e))return Je;let n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,Ds(e)},Us=(e,n)=>{let t;if(Jt(e))return Je;let r=e.state;return n<0?(t=0,n=-n):(t=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?Je:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,Es(e))},Ps=(e,n)=>{if(!e)return Je;let t=new Cf;e.state=t,t.strm=e,t.window=null,t.mode=Fr;let r=Us(e,n);return r!==Kt&&(e.state=null),r},kf=e=>Ps(e,Ff),Is=!0,qi,Yi,Af=e=>{if(Is){qi=new Int32Array(512),Yi=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(Jn(Fs,e.lens,0,288,qi,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;Jn(Cs,e.lens,0,32,Yi,0,e.work,{bits:5}),Is=!1}e.lencode=qi,e.lenbits=9,e.distcode=Yi,e.distbits=5},Ts=(e,n,t,r)=>{let i,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(n.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(n.subarray(t-r,t-r+i),a.wnext),r-=i,r?(a.window.set(n.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Df=(e,n)=>{let t,r,i,a,o,s,c,l,u,d,f,h,m,w,F=0,y,_,I,S,C,E,k,A,L=new Uint8Array(4),T,O,W=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Jt(e)||!e.output||!e.input&&e.avail_in!==0)return Je;t=e.state,t.mode===St&&(t.mode=Wi),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,l=t.hold,u=t.bits,d=s,f=c,A=Kt;e:for(;;)switch(t.mode){case Fr:if(t.wrap===0){t.mode=Wi;break}for(;u<16;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,L[0]=l&255,L[1]=l>>>8&255,t.check=ft(t.check,L,2,0),l=0,u=0,t.mode=ns;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=ye;break}if((l&15)!==ts){e.msg="unknown compression method",t.mode=ye;break}if(l>>>=4,u-=4,k=(l&15)+8,t.wbits===0&&(t.wbits=k),k>15||k>t.wbits){e.msg="invalid window size",t.mode=ye;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=l&512?us:St,l=0,u=0;break;case ns:for(;u<16;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==ts){e.msg="unknown compression method",t.mode=ye;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=ye;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(L[0]=l&255,L[1]=l>>>8&255,t.check=ft(t.check,L,2,0)),l=0,u=0,t.mode=rs;case rs:for(;u<32;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(L[0]=l&255,L[1]=l>>>8&255,L[2]=l>>>16&255,L[3]=l>>>24&255,t.check=ft(t.check,L,4,0)),l=0,u=0,t.mode=is;case is:for(;u<16;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(L[0]=l&255,L[1]=l>>>8&255,t.check=ft(t.check,L,2,0)),l=0,u=0,t.mode=as;case as:if(t.flags&1024){for(;u<16;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(L[0]=l&255,L[1]=l>>>8&255,t.check=ft(t.check,L,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=os;case os:if(t.flags&1024&&(h=t.length,h>s&&(h=s),h&&(t.head&&(k=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+h),k)),t.flags&512&&t.wrap&4&&(t.check=ft(t.check,r,h,a)),s-=h,a+=h,t.length-=h),t.length))break e;t.length=0,t.mode=ss;case ss:if(t.flags&2048){if(s===0)break e;h=0;do k=r[a+h++],t.head&&k&&t.length<65536&&(t.head.name+=String.fromCharCode(k));while(k&&h<s);if(t.flags&512&&t.wrap&4&&(t.check=ft(t.check,r,h,a)),s-=h,a+=h,k)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=ls;case ls:if(t.flags&4096){if(s===0)break e;h=0;do k=r[a+h++],t.head&&k&&t.length<65536&&(t.head.comment+=String.fromCharCode(k));while(k&&h<s);if(t.flags&512&&t.wrap&4&&(t.check=ft(t.check,r,h,a)),s-=h,a+=h,k)break e}else t.head&&(t.head.comment=null);t.mode=cs;case cs:if(t.flags&512){for(;u<16;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=ye;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=St;break;case us:for(;u<32;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}e.adler=t.check=xs(l),l=0,u=0,t.mode=Ir;case Ir:if(t.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,t.hold=l,t.bits=u,wf;e.adler=t.check=1,t.mode=St;case St:if(n===yf||n===Sr)break e;case Wi:if(t.last){l>>>=u&7,u-=u&7,t.mode=Xi;break}for(;u<3;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=fs;break;case 1:if(Af(t),t.mode=_r,n===Sr){l>>>=2,u-=2;break e}break;case 2:t.mode=hs;break;case 3:e.msg="invalid block type",t.mode=ye}l>>>=2,u-=2;break;case fs:for(l>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=ye;break}if(t.length=l&65535,l=0,u=0,t.mode=Zi,n===Sr)break e;case Zi:t.mode=ds;case ds:if(h=t.length,h){if(h>s&&(h=s),h>c&&(h=c),h===0)break e;i.set(r.subarray(a,a+h),o),s-=h,a+=h,c-=h,o+=h,t.length-=h;break}t.mode=St;break;case hs:for(;u<14;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=ye;break}t.have=0,t.mode=ps;case ps:for(;t.have<t.ncode;){for(;u<3;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}t.lens[W[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[W[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,T={bits:t.lenbits},A=Jn(mf,t.lens,0,19,t.lencode,0,t.work,T),t.lenbits=T.bits,A){e.msg="invalid code lengths set",t.mode=ye;break}t.have=0,t.mode=vs;case vs:for(;t.have<t.nlen+t.ndist;){for(;F=t.lencode[l&(1<<t.lenbits)-1],y=F>>>24,_=F>>>16&255,I=F&65535,!(y<=u);){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(I<16)l>>>=y,u-=y,t.lens[t.have++]=I;else{if(I===16){for(O=y+2;u<O;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(l>>>=y,u-=y,t.have===0){e.msg="invalid bit length repeat",t.mode=ye;break}k=t.lens[t.have-1],h=3+(l&3),l>>>=2,u-=2}else if(I===17){for(O=y+3;u<O;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}l>>>=y,u-=y,k=0,h=3+(l&7),l>>>=3,u-=3}else{for(O=y+7;u<O;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}l>>>=y,u-=y,k=0,h=11+(l&127),l>>>=7,u-=7}if(t.have+h>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=ye;break}for(;h--;)t.lens[t.have++]=k}}if(t.mode===ye)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=ye;break}if(t.lenbits=9,T={bits:t.lenbits},A=Jn(Fs,t.lens,0,t.nlen,t.lencode,0,t.work,T),t.lenbits=T.bits,A){e.msg="invalid literal/lengths set",t.mode=ye;break}if(t.distbits=6,t.distcode=t.distdyn,T={bits:t.distbits},A=Jn(Cs,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,T),t.distbits=T.bits,A){e.msg="invalid distances set",t.mode=ye;break}if(t.mode=_r,n===Sr)break e;case _r:t.mode=xr;case xr:if(s>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,t.hold=l,t.bits=u,gf(e,f),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,l=t.hold,u=t.bits,t.mode===St&&(t.back=-1);break}for(t.back=0;F=t.lencode[l&(1<<t.lenbits)-1],y=F>>>24,_=F>>>16&255,I=F&65535,!(y<=u);){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(_&&!(_&240)){for(S=y,C=_,E=I;F=t.lencode[E+((l&(1<<S+C)-1)>>S)],y=F>>>24,_=F>>>16&255,I=F&65535,!(S+y<=u);){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}l>>>=S,u-=S,t.back+=S}if(l>>>=y,u-=y,t.back+=y,t.length=I,_===0){t.mode=ws;break}if(_&32){t.back=-1,t.mode=St;break}if(_&64){e.msg="invalid literal/length code",t.mode=ye;break}t.extra=_&15,t.mode=gs;case gs:if(t.extra){for(O=t.extra;u<O;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ms;case ms:for(;F=t.distcode[l&(1<<t.distbits)-1],y=F>>>24,_=F>>>16&255,I=F&65535,!(y<=u);){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(!(_&240)){for(S=y,C=_,E=I;F=t.distcode[E+((l&(1<<S+C)-1)>>S)],y=F>>>24,_=F>>>16&255,I=F&65535,!(S+y<=u);){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}l>>>=S,u-=S,t.back+=S}if(l>>>=y,u-=y,t.back+=y,_&64){e.msg="invalid distance code",t.mode=ye;break}t.offset=I,t.extra=_&15,t.mode=ys;case ys:if(t.extra){for(O=t.extra;u<O;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=ye;break}t.mode=bs;case bs:if(c===0)break e;if(h=f-c,t.offset>h){if(h=t.offset-h,h>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=ye;break}h>t.wnext?(h-=t.wnext,m=t.wsize-h):m=t.wnext-h,h>t.length&&(h=t.length),w=t.window}else w=i,m=o-t.offset,h=t.length;h>c&&(h=c),c-=h,t.length-=h;do i[o++]=w[m++];while(--h);t.length===0&&(t.mode=xr);break;case ws:if(c===0)break e;i[o++]=t.length,c--,t.mode=xr;break;case Xi:if(t.wrap){for(;u<32;){if(s===0)break e;s--,l|=r[a++]<<u,u+=8}if(f-=c,e.total_out+=f,t.total+=f,t.wrap&4&&f&&(e.adler=t.check=t.flags?ft(t.check,i,f,o-f):Ki(t.check,i,f,o-f)),f=c,t.wrap&4&&(t.flags?l:xs(l))!==t.check){e.msg="incorrect data check",t.mode=ye;break}l=0,u=0}t.mode=Ss;case Ss:if(t.wrap&&t.flags){for(;u<32;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=ye;break}l=0,u=0}t.mode=_s;case _s:A=bf;break e;case ye:A=ks;break e;case Qi:return Ji;case As:default:return Je}return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,t.hold=l,t.bits=u,(t.wsize||f!==e.avail_out&&t.mode<ye&&(t.mode<Xi||n!==es))&&Ts(e,e.output,e.next_out,f-e.avail_out)?(t.mode=Qi,Ji):(d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,t.total+=f,t.wrap&4&&f&&(e.adler=t.check=t.flags?ft(t.check,i,f,e.next_out-f):Ki(t.check,i,f,e.next_out-f)),e.data_type=t.bits+(t.last?64:0)+(t.mode===St?128:0)+(t.mode===_r||t.mode===Zi?256:0),(d===0&&f===0||n===es)&&A===Kt&&(A=Sf),A)},Ef=e=>{if(Jt(e))return Je;let n=e.state;return n.window&&(n.window=null),e.state=null,Kt},Uf=(e,n)=>{if(Jt(e))return Je;let t=e.state;return t.wrap&2?(t.head=n,n.done=!1,Kt):Je},Pf=(e,n)=>{let t=n.length,r,i,a;return Jt(e)||(r=e.state,r.wrap!==0&&r.mode!==Ir)?Je:r.mode===Ir&&(i=1,i=Ki(i,n,t,0),i!==r.check)?ks:(a=Ts(e,n,t,t),a?(r.mode=Qi,Ji):(r.havedict=1,Kt))};tt.exports.inflateReset=Es;tt.exports.inflateReset2=Us;tt.exports.inflateResetKeep=Ds;tt.exports.inflateInit=kf;tt.exports.inflateInit2=Ps;tt.exports.inflate=Df;tt.exports.inflateEnd=Ef;tt.exports.inflateGetHeader=Uf;tt.exports.inflateSetDictionary=Pf;tt.exports.inflateInfo="pako inflate (from Nodeca project)"});var Os=oe((ep,Ls)=>{"use strict";function Tf(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}Ls.exports=Tf});var Ns=oe((tp,gn)=>{"use strict";var _t=Ms(),Rs=Ni(),ta=Vi(),na=gr(),Mf=Gi(),Lf=Os(),zs=Object.prototype.toString,{Z_NO_FLUSH:Of,Z_FINISH:Bf,Z_OK:Qn,Z_STREAM_END:$i,Z_NEED_DICT:ea,Z_STREAM_ERROR:Rf,Z_DATA_ERROR:Bs,Z_MEM_ERROR:zf}=Pt();function $n(e){this.options=Rs.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Mf,this.strm.avail_out=0;let t=_t.inflateInit2(this.strm,n.windowBits);if(t!==Qn)throw new Error(na[t]);if(this.header=new Lf,_t.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=ta.string2buf(n.dictionary):zs.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=_t.inflateSetDictionary(this.strm,n.dictionary),t!==Qn)))throw new Error(na[t])}$n.prototype.push=function(e,n){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,a,o,s;if(this.ended)return!1;for(n===~~n?o=n:o=n===!0?Bf:Of,zs.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=_t.inflate(t,o),a===ea&&i&&(a=_t.inflateSetDictionary(t,i),a===Qn?a=_t.inflate(t,o):a===Bs&&(a=ea));t.avail_in>0&&a===$i&&t.state.wrap>0&&e[t.next_in]!==0;)_t.inflateReset(t),a=_t.inflate(t,o);switch(a){case Rf:case Bs:case ea:case zf:return this.onEnd(a),this.ended=!0,!1}if(s=t.avail_out,t.next_out&&(t.avail_out===0||a===$i))if(this.options.to==="string"){let c=ta.utf8border(t.output,t.next_out),l=t.next_out-c,u=ta.buf2string(t.output,c);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===Qn&&s===0)){if(a===$i)return a=_t.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};$n.prototype.onData=function(e){this.chunks.push(e)};$n.prototype.onEnd=function(e){e===Qn&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Rs.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ra(e,n){let t=new $n(n);if(t.push(e),t.err)throw t.msg||na[t.err];return t.result}function Nf(e,n){return n=n||{},n.raw=!0,ra(e,n)}gn.exports.Inflate=$n;gn.exports.inflate=ra;gn.exports.inflateRaw=Nf;gn.exports.ungzip=ra;gn.exports.constants=Pt()});var ia=oe((np,dt)=>{"use strict";var{Deflate:Vf,deflate:Gf,deflateRaw:Hf,gzip:jf}=Yo(),{Inflate:Wf,inflate:Zf,inflateRaw:Xf,ungzip:qf}=Ns(),Yf=Pt();dt.exports.Deflate=Vf;dt.exports.deflate=Gf;dt.exports.deflateRaw=Hf;dt.exports.gzip=jf;dt.exports.Inflate=Wf;dt.exports.inflate=Zf;dt.exports.inflateRaw=Xf;dt.exports.ungzip=qf;dt.exports.constants=Yf});var Gs=oe(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.decodeJpeg=void 0;var er=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),Cr=4017,kr=799,Ar=3406,Dr=2276,Er=1567,Ur=3784,mn=5793,Pr=2896,Kf=100,Vs=64*1024*1024,aa=0;function yn(e){var n=aa+e;if(n>Vs){var t=Math.ceil((n-Vs)/1024/1024);throw new Error("Max memory limit exceeded by at least ".concat(t,"MB"))}aa=n}function Jf(e,n){for(var t=16;t>0&&!e[t-1];)t--;for(var r=[{children:[],index:0}],i=0,a=r[0],o=0;o<t;o++){for(var s=0;s<e[o];s++){for(a=r.pop(),a.children[a.index]=n[i];a.index>0;){if(r.length===0)throw new Error("Could not recreate Huffman Table");a=r.pop()}for(a.index++,r.push(a);r.length<=o;){var c={children:[],index:0};r.push(c),a.children[a.index]=c.children,a=c}i++}if(o+1<t){var c={children:[],index:0};r.push(c),a.children[a.index]=c.children,a=c}}return r[0].children}function Qf(e,n,t,r,i,a,o,s,c){var l=t.mcusPerLine,u=t.progressive,d=n,f=0,h=0;function m(){if(h>0)return h--,f>>h&1;if(f=e[n++],f==255){var $=e[n++];if($)throw new Error("unexpected marker: ".concat((f<<8|$).toString(16)))}return h=7,f>>>7}function w($){for(var K=$;;){if(K=K[m()],typeof K=="number")return K;if(K===void 0)throw new Error("invalid huffman sequence")}}function F($){for(var K=0;$>0;)K=K<<1|m(),$--;return K}function y($){var K=F($);return K>=1<<$-1?K:K+(-1<<$)+1}function _($,K){var fe=w($.huffmanTableDC),be=fe===0?0:y(fe);K[0]=$.pred+=be;for(var me=1;me<64;){var ke=w($.huffmanTableAC),Oe=ke&15,Ge=ke>>4;if(Oe===0){if(Ge<15)break;me+=16;continue}me+=Ge;var bt=er[me];K[bt]=y(Oe),me++}}function I($,K){var fe=w($.huffmanTableDC),be=fe===0?0:y(fe)<<c;K[0]=$.pred+=be}function S($,K){K[0]|=m()<<c}var C=0;function E($,K){if(C>0){C--;return}for(var fe=a,be=o;fe<=be;){var me=w($.huffmanTableAC),ke=me&15,Oe=me>>4;if(ke===0){if(Oe<15){C=F(Oe)+(1<<Oe)-1;break}fe+=16;continue}fe+=Oe;var Ge=er[fe];K[Ge]=y(ke)*(1<<c),fe++}}var k=0,A=0;function L($,K){for(var fe=a,be=o,me=0;fe<=be;){var ke=er[fe],Oe=K[ke]<0?-1:1;switch(k){case 0:var Ge=w($.huffmanTableAC),bt=Ge&15;if(me=Ge>>4,bt===0)me<15?(C=F(me)+(1<<me),k=4):(me=16,k=1);else{if(bt!==1)throw new Error("invalid ACn encoding");A=y(bt),k=me?2:3}continue;case 1:case 2:K[ke]?K[ke]+=(m()<<c)*Oe:(me--,me===0&&(k=k==2?3:0));break;case 3:K[ke]?K[ke]+=(m()<<c)*Oe:(K[ke]=A<<c,k=0);break;case 4:K[ke]&&(K[ke]+=(m()<<c)*Oe);break}fe++}k===4&&(C--,C===0&&(k=0))}function T($,K,fe,be,me){var ke=fe/l|0,Oe=fe%l,Ge=ke*$.v+be,bt=Oe*$.h+me;$.blocks[Ge]!==void 0&&K($,$.blocks[Ge][bt])}function O($,K,fe){var be=fe/$.blocksPerLine|0,me=fe%$.blocksPerLine;$.blocks[be]!==void 0&&K($,$.blocks[be][me])}var W=r.length,D,B;u?a===0?B=s===0?I:S:B=s===0?E:L:B=_;var H=0,M;W==1?M=r[0].blocksPerLine*r[0].blocksPerColumn:M=l*t.mcusPerColumn,i||(i=M);for(var q,se,pe;H<M;){for(var Y=0;Y<W;Y++)r[Y].pred=0;if(C=0,W==1){D=r[0];for(var ge=0;ge<i;ge++)O(D,B,H),H++}else for(var ge=0;ge<i;ge++){for(var Y=0;Y<W;Y++){D=r[Y],q=D.h,se=D.v;for(var Te=0;Te<se;Te++)for(var Ve=0;Ve<q;Ve++)T(D,B,H,Te,Ve)}if(H++,H===M)break}if(H===M)do{if(e[n]===255&&e[n+1]!==0)break;n+=1}while(n<e.length-2);if(h=0,pe=e[n]<<8|e[n+1],pe<65280)throw new Error("marker was not found");if(pe>=65488&&pe<=65495)n+=2;else break}return n-d}function $f(e){var n=[],t=e.blocksPerLine,r=e.blocksPerColumn,i=t<<3,a=new Int32Array(64),o=new Uint8Array(64);function s(F,y,_){for(var I=e.quantizationTable,S=_,C=0;C<64;C++)S[C]=F[C]*I[C];for(var C=0;C<8;++C){var E=8*C;if(S[1+E]==0&&S[2+E]==0&&S[3+E]==0&&S[4+E]==0&&S[5+E]==0&&S[6+E]==0&&S[7+E]==0){var k=mn*S[0+E]+512>>10;S[0+E]=k,S[1+E]=k,S[2+E]=k,S[3+E]=k,S[4+E]=k,S[5+E]=k,S[6+E]=k,S[7+E]=k;continue}var A=mn*S[0+E]+128>>8,L=mn*S[4+E]+128>>8,T=S[2+E],O=S[6+E],W=Pr*(S[1+E]-S[7+E])+128>>8,D=Pr*(S[1+E]+S[7+E])+128>>8,B=S[3+E]<<4,H=S[5+E]<<4,M=A-L+1>>1;A=A+L+1>>1,L=M,M=T*Ur+O*Er+128>>8,T=T*Er-O*Ur+128>>8,O=M,M=W-H+1>>1,W=W+H+1>>1,H=M,M=D+B+1>>1,B=D-B+1>>1,D=M,M=A-O+1>>1,A=A+O+1>>1,O=M,M=L-T+1>>1,L=L+T+1>>1,T=M,M=W*Dr+D*Ar+2048>>12,W=W*Ar-D*Dr+2048>>12,D=M,M=B*kr+H*Cr+2048>>12,B=B*Cr-H*kr+2048>>12,H=M,S[0+E]=A+D,S[7+E]=A-D,S[1+E]=L+H,S[6+E]=L-H,S[2+E]=T+B,S[5+E]=T-B,S[3+E]=O+W,S[4+E]=O-W}for(var C=0;C<8;++C){var q=C;if(S[1*8+q]==0&&S[2*8+q]==0&&S[3*8+q]==0&&S[4*8+q]==0&&S[5*8+q]==0&&S[6*8+q]==0&&S[7*8+q]==0){var se=mn*_[C+0]+8192>>14;S[0*8+q]=se,S[1*8+q]=se,S[2*8+q]=se,S[3*8+q]=se,S[4*8+q]=se,S[5*8+q]=se,S[6*8+q]=se,S[7*8+q]=se;continue}var A=mn*S[0*8+q]+2048>>12,L=mn*S[4*8+q]+2048>>12,T=S[2*8+q],O=S[6*8+q],W=Pr*(S[1*8+q]-S[7*8+q])+2048>>12,D=Pr*(S[1*8+q]+S[7*8+q])+2048>>12,B=S[3*8+q],H=S[5*8+q],M=A-L+1>>1;A=A+L+1>>1,L=M,M=T*Ur+O*Er+2048>>12,T=T*Er-O*Ur+2048>>12,O=M,M=W-H+1>>1,W=W+H+1>>1,H=M,M=D+B+1>>1,B=D-B+1>>1,D=M,M=A-O+1>>1,A=A+O+1>>1,O=M,M=L-T+1>>1,L=L+T+1>>1,T=M,M=W*Dr+D*Ar+2048>>12,W=W*Ar-D*Dr+2048>>12,D=M,M=B*kr+H*Cr+2048>>12,B=B*Cr-H*kr+2048>>12,H=M,S[0*8+q]=A+D,S[7*8+q]=A-D,S[1*8+q]=L+H,S[6*8+q]=L-H,S[2*8+q]=T+B,S[5*8+q]=T-B,S[3*8+q]=O+W,S[4*8+q]=O-W}for(var C=0;C<64;++C){var pe=128+(S[C]+8>>4);y[C]=pe<0?0:pe>255?255:pe}}yn(i*r*8);for(var c=0;c<r;c++){for(var l=c<<3,u=0;u<8;u++)n.push(new Uint8Array(i));for(var d=0;d<t;d++){s(e.blocks[c][d],o,a);for(var f=0,h=d<<3,m=0;m<8;m++)for(var w=n[l+m],u=0;u<8;u++)w[h+u]=o[f++]}}return n}function xt(e){return e<0?0:e>255?255:e}function ed(e){var n={width:0,height:0,comments:[],adobe:void 0,components:[],exifBuffer:void 0,jfif:void 0},t=Kf*1e3*1e3,r=0;function i(){var Ae=e[r]<<8|e[r+1];return r+=2,Ae}function a(){var Ae=i(),Ut=e.subarray(r,r+Ae-2);return r+=Ut.length,Ut}function o(Ae){var Ut=0,On=0;for(var Bn in Ae.components)if(Ae.components.hasOwnProperty(Bn)){var Ye=Ae.components[Bn];Ut<Ye.h&&(Ut=Ye.h),On<Ye.v&&(On=Ye.v)}var Qa=Math.ceil(Ae.samplesPerLine/8/Ut),$a=Math.ceil(Ae.scanLines/8/On);for(var Bn in Ae.components)if(Ae.components.hasOwnProperty(Bn)){var Ye=Ae.components[Bn],Rc=Math.ceil(Math.ceil(Ae.samplesPerLine/8)*Ye.h/Ut),zc=Math.ceil(Math.ceil(Ae.scanLines/8)*Ye.v/On),eo=Qa*Ye.h,to=$a*Ye.v,Nc=to*eo,no=[];yn(Nc*256);for(var ro=0;ro<to;ro++){for(var io=[],ao=0;ao<eo;ao++)io.push(new Int32Array(64));no.push(io)}Ye.blocksPerLine=Rc,Ye.blocksPerColumn=zc,Ye.blocks=no}Ae.maxH=Ut,Ae.maxV=On,Ae.mcusPerLine=Qa,Ae.mcusPerColumn=$a}var s=null,c=null,l=void 0,u=0,d=[],f=[],h=[],m=[],w=i(),F=-1;if(w!=65496)throw new Error("SOI not found");for(w=i();w!=65497;){switch(w){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{var y=a();if(w===65534){for(var _="",I=0;I<y.byteLength;I++)_+=String.fromCharCode(y[I]);n.comments.push(_)}w===65504&&y[0]===74&&y[1]===70&&y[2]===73&&y[3]===70&&y[4]===0&&(s={version:{major:y[5],minor:y[6]},densityUnits:y[7],xDensity:y[8]<<8|y[9],yDensity:y[10]<<8|y[11],thumbWidth:y[12],thumbHeight:y[13],thumbData:y.subarray(14,14+3*y[12]*y[13])}),w===65505&&y[0]===69&&y[1]===120&&y[2]===105&&y[3]===102&&y[4]===0&&(n.exifBuffer=y.subarray(5,y.length)),w===65518&&y[0]===65&&y[1]===100&&y[2]===111&&y[3]===98&&y[4]===101&&y[5]===0&&(c={version:y[6],flags0:y[7]<<8|y[8],flags1:y[9]<<8|y[10],transformCode:y[11]});break}case 65499:{for(var S=i(),C=S+r-2;r<C;){var E=e[r++];yn(64*4);var k=new Int32Array(64);if(E>>4)if(E>>4===1)for(var A=0;A<64;A++){var L=er[A];k[L]=i()}else throw new Error("DQT: invalid table spec");else for(var A=0;A<64;A++){var L=er[A];k[L]=e[r++]}d[E&15]=k}break}case 65472:case 65473:case 65474:{i(),l={extended:w===65473,progressive:w===65474,precision:e[r++],scanLines:i(),samplesPerLine:i(),components:{},componentsOrder:[],maxH:0,maxV:0,mcusPerLine:0,mcusPerColumn:0};var T=l.scanLines*l.samplesPerLine;if(T>t){var O=Math.ceil((T-t)/1e6);throw new Error("maxResolutionInMP limit exceeded by ".concat(O,"MP"))}for(var W=e[r++],D=0;D<W;D++){var B=e[r],H=e[r+1]>>4,M=e[r+1]&15,q=e[r+2];l.componentsOrder.push(B),l.components[B]={h:H,v:M,quantizationIdx:q,blocksPerColumn:0,blocksPerLine:0,blocks:[],pred:0},r+=3}o(l),f.push(l);break}case 65476:{for(var se=i(),D=2;D<se;){for(var pe=e[r++],Y=new Uint8Array(16),ge=0,A=0;A<16;A++,r++)ge+=Y[A]=e[r];yn(16+ge);for(var Te=new Uint8Array(ge),A=0;A<ge;A++,r++)Te[A]=e[r];D+=17+ge;var Ve=pe&15,$=pe>>4?h:m;$[Ve]=Jf(Y,Te)}break}case 65501:i(),u=i();break;case 65500:i(),i();break;case 65498:{i();for(var K=e[r++],fe=[],D=0;D<K;D++){var be=l.components[e[r++]],me=e[r++];be.huffmanTableDC=m[me>>4],be.huffmanTableAC=h[me&15],fe.push(be)}var ke=e[r++],Oe=e[r++],Ge=e[r++],bt=Qf(e,r,l,fe,u,ke,Oe,Ge>>4,Ge&15);r+=bt;break}case 65535:e[r]!==255&&r--;break;default:{if(e[r-3]==255&&e[r-2]>=192&&e[r-2]<=254){r-=3;break}else if(w===224||w==225){if(F!==-1)throw new Error("first unknown JPEG marker at offset ".concat(F.toString(16),", second unknown JPEG marker ").concat(w.toString(16)," at offset ").concat((r-1).toString(16)));F=r-1;var Ja=i();if(e[r+Ja-2]===255){r+=Ja-2;break}}throw new Error("unknown JPEG marker "+w.toString(16))}}w=i()}if(f.length!=1)throw new Error("only single frame JPEGs supported");for(var D=0;D<f.length;D++){var dr=f[D].components;for(var A in dr)dr[A].quantizationTable=d[dr[A].quantizationIdx],delete dr[A].quantizationIdx}n.width=l.samplesPerLine,n.height=l.scanLines,n.jfif=s,n.adobe=c,n.components=[];for(var D=0;D<l.componentsOrder.length;D++){var be=l.components[l.componentsOrder[D]];n.components.push({lines:$f(be),scaleX:be.h/l.maxH,scaleY:be.v/l.maxV})}return n}function td(e){var n=0,t=!1,r=e.width,i=e.height,a=r*i*e.components.length;yn(a);var o=new Uint8Array(a);switch(e.components.length){case 1:{for(var s=e.components[0],c=0;c<i;c++)for(var l=s.lines[0|c*s.scaleY],u=0;u<r;u++){var d=l[0|u*s.scaleX];o[n++]=d}break}case 2:{for(var s=e.components[0],f=e.components[1],c=0;c<i;c++)for(var l=s.lines[0|c*s.scaleY],h=f.lines[0|c*f.scaleY],u=0;u<r;u++){var m=l[0|u*s.scaleX];o[n++]=m;var w=h[0|u*f.scaleX];o[n++]=w}break}case 3:{t=!0,e.adobe&&e.adobe.transformCode&&(t=!0);for(var s=e.components[0],f=e.components[1],F=e.components[2],c=0;c<i;c++)for(var l=s.lines[0|c*s.scaleY],h=f.lines[0|c*f.scaleY],y=F.lines[0|c*F.scaleY],u=0;u<r;u++){var d=void 0,_=void 0,I=void 0,S=void 0,C=void 0,E=void 0;t?(d=l[0|u*s.scaleX],_=h[0|u*f.scaleX],I=y[0|u*F.scaleX],S=xt(d+1.402*(I-128)),C=xt(d-.3441363*(_-128)-.71413636*(I-128)),E=xt(d+1.772*(_-128))):(S=l[0|u*s.scaleX],C=h[0|u*f.scaleX],E=y[0|u*F.scaleX]),o[n++]=S,o[n++]=C,o[n++]=E}break}case 4:{if(!e.adobe)throw new Error("Unsupported color mode (4 components)");t=!1,e.adobe&&e.adobe.transformCode&&(t=!0);for(var s=e.components[0],f=e.components[1],F=e.components[2],k=e.components[3],c=0;c<i;c++)for(var l=s.lines[0|c*s.scaleY],h=f.lines[0|c*f.scaleY],y=F.lines[0|c*F.scaleY],A=k.lines[0|c*k.scaleY],u=0;u<r;u++){var d=void 0,_=void 0,I=void 0,L=void 0,T=void 0,O=void 0,W=void 0;t?(d=l[0|u*s.scaleX],_=h[0|u*f.scaleX],I=y[0|u*F.scaleX],L=A[0|u*k.scaleX],T=255-xt(d+1.402*(I-128)),O=255-xt(d-.3441363*(_-128)-.71413636*(I-128)),W=255-xt(d+1.772*(_-128))):(T=l[0|u*s.scaleX],O=h[0|u*f.scaleX],W=y[0|u*F.scaleX],L=A[0|u*k.scaleX]),o[n++]=255-T,o[n++]=255-O,o[n++]=255-W,o[n++]=255-L}break}default:throw new Error("Unsupported color mode")}return o}function nd(e,n){if(aa=0,e.length===0)throw new Error("Empty jpeg buffer");var t=ed(e);yn(t.width*t.height*4);var r=td(t),i=n(t.width,t.height),a=i.width,o=i.height,s=i.data,c=0,l=0;switch(t.components.length){case 1:for(var u=0;u<o;u++)for(var d=0;d<a;d++){var f=r[c++];s[l++]=f,s[l++]=f,s[l++]=f,s[l++]=255}break;case 3:for(var u=0;u<o;u++)for(var d=0;d<a;d++){var h=r[c++],m=r[c++],w=r[c++];s[l++]=h,s[l++]=m,s[l++]=w,s[l++]=255}break;case 4:for(var u=0;u<o;u++)for(var d=0;d<a;d++){var F=r[c++],y=r[c++],f=r[c++],_=r[c++],h=255-xt(F*(1-_/255)+_),m=255-xt(y*(1-_/255)+_),w=255-xt(f*(1-_/255)+_);s[l++]=h,s[l++]=m,s[l++]=w,s[l++]=255}break;default:throw new Error("Unsupported color mode")}return i}Tr.decodeJpeg=nd});var zt=oe(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.initializeCanvas=N.createImageData=N.createCanvas=N.createCanvasFromData=N.writeDataZipWithoutPrediction=N.writeDataRLE=N.writeDataRaw=N.decodeBitmap=N.imageDataToCanvas=N.resetImageData=N.hasAlpha=N.clamp=N.offsetForChannel=N.Compression=N.ChannelID=N.MaskParams=N.LayerMaskFlags=N.ColorSpace=N.createEnum=N.revMap=N.largeAdditionalInfoKeys=N.layerColors=N.toBlendMode=N.fromBlendMode=N.RAW_IMAGE_DATA=N.MOCK_HANDLERS=void 0;var rd=ia(),id=Gs();N.MOCK_HANDLERS=!1;N.RAW_IMAGE_DATA=!1;N.fromBlendMode={};N.toBlendMode={pass:"pass through",norm:"normal",diss:"dissolve",dark:"darken","mul ":"multiply",idiv:"color burn",lbrn:"linear burn",dkCl:"darker color",lite:"lighten",scrn:"screen","div ":"color dodge",lddg:"linear dodge",lgCl:"lighter color",over:"overlay",sLit:"soft light",hLit:"hard light",vLit:"vivid light",lLit:"linear light",pLit:"pin light",hMix:"hard mix",diff:"difference",smud:"exclusion",fsub:"subtract",fdiv:"divide","hue ":"hue","sat ":"saturation",colr:"color","lum ":"luminosity"};Object.keys(N.toBlendMode).forEach(function(e){return N.fromBlendMode[N.toBlendMode[e]]=e});N.layerColors=["none","red","orange","yellow","green","blue","violet","gray"];N.largeAdditionalInfoKeys=["LMsk","Lr16","Lr32","Layr","Mt16","Mt32","Mtrn","Alph","FMsk","lnk2","FEid","FXid","PxSD","cinf"];function Hs(e){var n={};return Object.keys(e).forEach(function(t){return n[e[t]]=t}),n}N.revMap=Hs;function ad(e,n,t){var r=Hs(t),i=function(o){var s=o.split(".")[1];if(s&&!r[s])throw new Error("Unrecognized value for enum: '".concat(o,"'"));return r[s]||n},a=function(o){if(o&&!t[o])throw new Error("Invalid value for enum: '".concat(o,"'"));return"".concat(e,".").concat(t[o]||t[n])};return{decode:i,encode:a}}N.createEnum=ad;var od;(function(e){e[e.RGB=0]="RGB",e[e.HSB=1]="HSB",e[e.CMYK=2]="CMYK",e[e.Lab=7]="Lab",e[e.Grayscale=8]="Grayscale"})(od=N.ColorSpace||(N.ColorSpace={}));var sd;(function(e){e[e.PositionRelativeToLayer=1]="PositionRelativeToLayer",e[e.LayerMaskDisabled=2]="LayerMaskDisabled",e[e.InvertLayerMaskWhenBlending=4]="InvertLayerMaskWhenBlending",e[e.LayerMaskFromRenderingOtherData=8]="LayerMaskFromRenderingOtherData",e[e.MaskHasParametersAppliedToIt=16]="MaskHasParametersAppliedToIt"})(sd=N.LayerMaskFlags||(N.LayerMaskFlags={}));var ld;(function(e){e[e.UserMaskDensity=1]="UserMaskDensity",e[e.UserMaskFeather=2]="UserMaskFeather",e[e.VectorMaskDensity=4]="VectorMaskDensity",e[e.VectorMaskFeather=8]="VectorMaskFeather"})(ld=N.MaskParams||(N.MaskParams={}));var cd;(function(e){e[e.Color0=0]="Color0",e[e.Color1=1]="Color1",e[e.Color2=2]="Color2",e[e.Color3=3]="Color3",e[e.Transparency=-1]="Transparency",e[e.UserMask=-2]="UserMask",e[e.RealUserMask=-3]="RealUserMask"})(cd=N.ChannelID||(N.ChannelID={}));var ud;(function(e){e[e.RawData=0]="RawData",e[e.RleCompressed=1]="RleCompressed",e[e.ZipWithoutPrediction=2]="ZipWithoutPrediction",e[e.ZipWithPrediction=3]="ZipWithPrediction"})(ud=N.Compression||(N.Compression={}));function fd(e,n){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return n?3:e+1;case-1:return n?4:3;default:return e+1}}N.offsetForChannel=fd;function dd(e,n,t){return e<n?n:e>t?t:e}N.clamp=dd;function hd(e){for(var n=e.width*e.height*4,t=3;t<n;t+=4)if(e.data[t]!==255)return!0;return!1}N.hasAlpha=hd;function pd(e){for(var n=e.data,t=n instanceof Float32Array?1:n instanceof Uint16Array?65535:255,r=0,i=n.length|0;r<i;r=r+4|0)n[r+0]=0,n[r+1]=0,n[r+2]=0,n[r+3]=t}N.resetImageData=pd;function vd(e){var n=(0,N.createCanvas)(e.width,e.height),t;if(e.data instanceof Uint8ClampedArray)t=e;else{t=(0,N.createImageData)(e.width,e.height);var r=e.data,i=t.data;if(r instanceof Float32Array)for(var a=0,o=r.length;a<o;a+=4)i[a+0]=Math.round(Math.pow(r[a+0],1/2.2)*255),i[a+1]=Math.round(Math.pow(r[a+1],1/2.2)*255),i[a+2]=Math.round(Math.pow(r[a+2],1/2.2)*255),i[a+3]=Math.round(r[a+3]*255);else for(var s=r instanceof Uint16Array?8:0,a=0,o=r.length;a<o;a++)i[a]=r[a]>>>s}return n.getContext("2d").putImageData(t,0,0),n}N.imageDataToCanvas=vd;function gd(e,n,t,r){if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("Invalid bit depth");for(var i=0,a=0,o=0;i<r;i++)for(var s=0;s<t;)for(var c=e[o++],l=0;l<8&&s<t;l++,s++,a+=4){var u=c&128?0:255;c=c<<1,n[a+0]=u,n[a+1]=u,n[a+2]=u,n[a+3]=255}}N.decodeBitmap=gd;function md(e,n,t,r){if(!(!t||!r)){for(var i=new Uint8Array(t*r),a=0;a<i.length;a++)i[a]=e.data[a*4+n];return i}}N.writeDataRaw=md;function yd(e,n,t,r){var i=n.data,a=n.width,o=n.height;if(!(!a||!o)){for(var s=4*a|0,c=0,l=t.length*(r?4:2)*o|0,u=0,d=t;u<d.length;u++)for(var f=d[u],h=0,m=f|0;h<o;h++){var w=h*s|0,F=w+s|0,y=F+f-4|0,_=y-4|0,I=l;for(m=w+f|0;m<F;m=m+4|0)if(m<_){var S=i[m];m=m+4|0;var C=i[m];m=m+4|0;var E=i[m];if(S===C&&S===E){for(var k=3;k<128&&m<y&&i[m+4|0]===S;)k=k+1|0,m=m+4|0;e[l++]=1-k,e[l++]=S}else{var A=l,L=!0,k=1;for(e[l++]=0,e[l++]=S;m<y&&k<128;)if(m=m+4|0,S=C,C=E,E=i[m],S===C&&S===E){m=m-12|0,L=!1;break}else k++,e[l++]=S;L&&(k<127?(e[l++]=C,e[l++]=E,k+=2):k<128?(e[l++]=C,k++,m=m-4|0):m=m-8|0),e[A]=k-1}}else m===y?(e[l++]=0,e[l++]=i[m]):(e[l++]=1,e[l++]=i[m],m=m+4|0,e[l++]=i[m]);var T=l-I;r&&(e[c++]=T>>24&255,e[c++]=T>>16&255),e[c++]=T>>8&255,e[c++]=T&255}return e.slice(0,l)}}N.writeDataRLE=yd;function bd(e,n){for(var t=e.data,r=e.width,i=e.height,a=r*i,o=new Uint8Array(a),s=[],c=0,l=0,u=n;l<u.length;l++){for(var d=u[l],f=0,h=d;f<a;f++,h+=4)o[f]=t[h];var m=(0,rd.deflate)(o);s.push(m),c+=m.byteLength}if(s.length>0){for(var m=new Uint8Array(c),d=0,w=0,F=s;w<F.length;w++){var y=F[w];m.set(y,d),d+=y.byteLength}return m}else return s[0]}N.writeDataZipWithoutPrediction=bd;function wd(e){var n=(0,N.createCanvas)(100,100);try{var t=n.getContext("2d"),r=(0,id.decodeJpeg)(e,function(i,a){return t.createImageData(i,a)});n.width=r.width,n.height=r.height,t.putImageData(r,0,0)}catch(i){console.error("JPEG decompression error",i.message)}return n}N.createCanvasFromData=wd;var Sd=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvas method")};N.createCanvas=Sd;var oa=void 0,_d=function(e,n){return oa||(oa=(0,N.createCanvas)(1,1)),oa.getContext("2d").createImageData(e,n)};N.createImageData=_d;typeof document<"u"&&(N.createCanvas=function(e,n){var t=document.createElement("canvas");return t.width=e,t.height=n,t});function xd(e,n){N.createCanvas=e,N.createImageData=n||N.createImageData}N.initializeCanvas=xd});var Lr=oe(Mr=>{"use strict";Mr.byteLength=Fd;Mr.toByteArray=kd;Mr.fromByteArray=Ed;var ht=[],Qe=[],Id=typeof Uint8Array<"u"?Uint8Array:Array,sa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Qt=0,js=sa.length;Qt<js;++Qt)ht[Qt]=sa[Qt],Qe[sa.charCodeAt(Qt)]=Qt;var Qt,js;Qe[45]=62;Qe[95]=63;function Ws(e){var n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");t===-1&&(t=n);var r=t===n?0:4-t%4;return[t,r]}function Fd(e){var n=Ws(e),t=n[0],r=n[1];return(t+r)*3/4-r}function Cd(e,n,t){return(n+t)*3/4-t}function kd(e){var n,t=Ws(e),r=t[0],i=t[1],a=new Id(Cd(e,r,i)),o=0,s=i>0?r-4:r,c;for(c=0;c<s;c+=4)n=Qe[e.charCodeAt(c)]<<18|Qe[e.charCodeAt(c+1)]<<12|Qe[e.charCodeAt(c+2)]<<6|Qe[e.charCodeAt(c+3)],a[o++]=n>>16&255,a[o++]=n>>8&255,a[o++]=n&255;return i===2&&(n=Qe[e.charCodeAt(c)]<<2|Qe[e.charCodeAt(c+1)]>>4,a[o++]=n&255),i===1&&(n=Qe[e.charCodeAt(c)]<<10|Qe[e.charCodeAt(c+1)]<<4|Qe[e.charCodeAt(c+2)]>>2,a[o++]=n>>8&255,a[o++]=n&255),a}function Ad(e){return ht[e>>18&63]+ht[e>>12&63]+ht[e>>6&63]+ht[e&63]}function Dd(e,n,t){for(var r,i=[],a=n;a<t;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(Ad(r));return i.join("")}function Ed(e){for(var n,t=e.length,r=t%3,i=[],a=16383,o=0,s=t-r;o<s;o+=a)i.push(Dd(e,o,o+a>s?s:o+a));return r===1?(n=e[t-1],i.push(ht[n>>2]+ht[n<<4&63]+"==")):r===2&&(n=(e[t-2]<<8)+e[t-1],i.push(ht[n>>10]+ht[n>>4&63]+ht[n<<2&63]+"=")),i.join("")}});var Ys=oe(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.decodeString=pt.encodeString=pt.encodeStringTo=pt.stringLengthInBytes=void 0;function la(e){return e&4294967168?e&4294965248?e&4294901760?4:3:2:1}function Xs(e){for(var n=0,t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r>=55296&&r<=56319){if(t+1<e.length){var i=e.charCodeAt(t+1);(i&64512)===56320&&(t++,n+=la(((r&1023)<<10)+(i&1023)+65536))}}else n+=la(r)}return n}pt.stringLengthInBytes=Xs;function Zs(e,n,t){var r=la(t);switch(r){case 1:e[n]=t;break;case 2:e[n]=t>>6&31|192,e[n+1]=t&63|128;break;case 3:e[n]=t>>12&15|224,e[n+1]=t>>6&63|128,e[n+2]=t&63|128;break;default:e[n]=t>>18&7|240,e[n+1]=t>>12&63|128,e[n+2]=t>>6&63|128,e[n+3]=t&63|128;break}return r}function qs(e,n,t){for(var r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){if(r+1<t.length){var a=t.charCodeAt(r+1);if((a&64512)===56320){r++;var o=((i&1023)<<10)+(a&1023)+65536;n+=Zs(e,n,o)}}}else n+=Zs(e,n,i)}return n}pt.encodeStringTo=qs;function Ud(e){if(e.length>1e3&&typeof TextEncoder<"u")return new TextEncoder().encode(e);var n=new Uint8Array(Xs(e));return qs(n,0,e),n}pt.encodeString=Ud;function bn(e,n){if(n>=e.length)throw Error("Invalid byte index");var t=e[n];if((t&192)===128)return t&63;throw Error("Invalid continuation byte")}function Pd(e){if(e.byteLength>1e3&&typeof TextDecoder<"u")return new TextDecoder().decode(e);for(var n=[],t=0;t<e.length;){var r=e[t++],i=void 0;if(!(r&128))i=r;else if((r&224)===192){var a=bn(e,t++);if(i=(r&31)<<6|a,i<128)throw Error("Invalid continuation byte")}else if((r&240)===224){var a=bn(e,t++),o=bn(e,t++);if(i=(r&15)<<12|a<<6|o,i<2048)throw Error("Invalid continuation byte");if(i>=55296&&i<=57343)throw Error("Lone surrogate U+".concat(i.toString(16).toUpperCase()," is not a scalar value"))}else if((r&248)===240){var a=bn(e,t++),o=bn(e,t++),s=bn(e,t++);if(i=(r&15)<<18|a<<12|o<<6|s,i<65536||i>1114111)throw Error("Invalid continuation byte")}else throw Error("Invalid UTF-8 detected");i>65535&&(i-=65536,n.push(String.fromCharCode(i>>>10&1023|55296)),i=56320|i&1023),n.push(String.fromCharCode(i))}return n.join("")}pt.decodeString=Pd});var jr=oe(x=>{"use strict";var It=x&&x.__assign||function(){return It=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},It.apply(this,arguments)},Td=x&&x.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};Object.defineProperty(x,"__esModule",{value:!0});x.ESliceOrigin=x.ESliceVertAlign=x.ESliceHorzAlign=x.ESliceType=x.FrFl=x.FStl=x.ClrS=x.gradientInterpolationMethodType=x.stdTrackID=x.animInterpStyleEnum=x.GrdT=x.IGSr=x.BETE=x.BESs=x.bvlT=x.BESl=x.BlnM=x.warpStyle=x.Annt=x.Ornt=x.textGridding=x.frac=x.unitsValue=x.unitsPercentF=x.unitsPercent=x.unitsAngle=x.parseUnitsToNumber=x.parseUnitsOrNumber=x.parseUnits=x.parsePercentOrAngle=x.parsePercent=x.parseAngle=x.serializeColor=x.parseColor=x.serializeVectorContent=x.parseVectorContent=x.serializeTrackList=x.parseTrackList=x.parseEffects=x.serializeEffects=x.boundsToDescBounds=x.descBoundsToBounds=x.xyToHorzVrtc=x.horzVrtcToXY=x.writeVersionAndDescriptor=x.readVersionAndDescriptor=x.writeDescriptorStructure=x.readDescriptorStructure=x.readAsciiStringOrClassId=x.setLogErrors=void 0;x.presetKindType=x.prjM=x.FlMd=x.IntC=x.IntE=x.Drct=x.WndM=x.CntE=x.FlCl=x.ExtR=x.ExtT=x.DfsM=x.blurType=x.Lns=x.MztT=x.Chnl=x.Dstr=x.ZZTy=x.Wvtp=x.SphM=x.RplS=x.Cnvr=x.UndA=x.DspM=x.SmBQ=x.SmBM=x.BlrQ=x.BlrM=x.strokeStyleLineAlignment=x.strokeStyleLineJoinType=x.strokeStyleLineCapType=x.ESliceBGColorType=void 0;var X=zt(),ne=Nt(),ie=Sn();function Md(e){var n={};return Object.keys(e).forEach(function(t){return n[e[t]]=t}),n}var tr={"#Ang":"Angle","#Rsl":"Density","#Rlt":"Distance","#Nne":"None","#Prc":"Percent","#Pxl":"Pixels","#Mlm":"Millimeters","#Pnt":"Points",RrPi:"Picas",RrIn:"Inches",RrCm:"Centimeters"},Or=Md(tr),nr=!1;function Ld(e){nr=e}x.setLogErrors=Ld;function R(e,n){return{name:e,classID:n}}var re=R("","null"),ca=!1,nl={strokeStyleContent:R("","solidColorLayer"),printProofSetup:R(ca?"\u6821\u6837\u8BBE\u7F6E":"Proof Setup","proofSetup"),Grad:R(ca?"\u6E10\u53D8":"Gradient","Grdn"),Trnf:R(ca?"\u53D8\u6362":"Transform","Trnf"),patternFill:R("","patternFill"),ebbl:R("","ebbl"),SoFi:R("","SoFi"),GrFl:R("","GrFl"),sdwC:R("","RGBC"),hglC:R("","RGBC"),"Clr ":R("","RGBC"),tintColor:R("","RGBC"),Ofst:R("","Pnt "),ChFX:R("","ChFX"),MpgS:R("","ShpC"),DrSh:R("","DrSh"),IrSh:R("","IrSh"),OrGl:R("","OrGl"),IrGl:R("","IrGl"),TrnS:R("","ShpC"),Ptrn:R("","Ptrn"),FrFX:R("","FrFX"),phase:R("","Pnt "),frameStep:re,duration:re,workInTime:re,workOutTime:re,audioClipGroupList:re,bounds:R("","Rctn"),customEnvelopeWarp:R("","customEnvelopeWarp"),warp:R("","warp"),"Sz  ":R("","Pnt "),origin:R("","Pnt "),autoExpandOffset:R("","Pnt "),keyOriginShapeBBox:R("","unitRect"),Vrsn:re,psVersion:re,docDefaultNewArtboardBackgroundColor:R("","RGBC"),artboardRect:R("","classFloatRect"),keyOriginRRectRadii:R("","radii"),keyOriginBoxCorners:re,rectangleCornerA:R("","Pnt "),rectangleCornerB:R("","Pnt "),rectangleCornerC:R("","Pnt "),rectangleCornerD:R("","Pnt "),compInfo:re,quiltWarp:R("","quiltWarp"),generatorSettings:re,crema:re,FrIn:re,blendOptions:re,FXRf:re,Lefx:re,time:re,animKey:re,timeScope:re,inTime:re,outTime:re,sheetStyle:re,translation:re,Skew:re,boundingBox:R("","boundingBox"),"Lnk ":R("","ExternalFileLink"),frameReader:R("","FrameReader"),effectParams:R("","motionTrackEffectParams"),Impr:R("None","none"),Anch:R("","Pnt "),"Fwd ":R("","Pnt "),"Bwd ":R("","Pnt "),FlrC:R("","Pnt "),meshBoundaryPath:R("","pathClass"),filterFX:R("","filterFXStyle"),Fltr:R("","rigidTransform"),FrgC:R("","RGBC"),BckC:R("","RGBC"),sdwM:R("Parameters","adaptCorrectTones"),hglM:R("Parameters","adaptCorrectTones"),customShape:R("","customShape"),origFXRefPoint:re,FXRefPoint:re,ClMg:R("","ClMg")},rl={"Crv ":R("","CrPt"),Clrs:R("","Clrt"),Trns:R("","TrnS"),keyDescriptorList:re,solidFillMulti:R("","SoFi"),gradientFillMulti:R("","GrFl"),dropShadowMulti:R("","DrSh"),innerShadowMulti:R("","IrSh"),frameFXMulti:R("","FrFX"),FrIn:re,FSts:re,LaSt:re,sheetTimelineOptions:re,trackList:R("","animationTrack"),globalTrackList:R("","animationTrack"),keyList:re,audioClipGroupList:re,audioClipList:re,countObjectList:R("","countObject"),countGroupList:R("","countGroup"),slices:R("","slice"),"Pts ":R("","Pthp"),SbpL:R("","SbpL"),pathComponents:R("","PaCm"),filterFXList:R("","filterFX"),puppetShapeList:R("","puppetShape"),channelDenoise:R("","channelDenoiseParams"),ShrP:R("","Pnt "),layerSettings:re,list:re,Adjs:R("","CrvA")},Ks={TEXT:["Txt ","printerName","Nm  ","Idnt","blackAndWhitePresetFileName","LUT3DFileName","presetFileName","curvesPresetFileName","mixerPresetFileName","placed","description","reason","artboardPresetName","json","clipID","relPath","fullPath","mediaDescriptor","Msge","altTag","url","cellText","preset","KnNm","FPth","comment","originalPath"],tdta:["EngineData","LUT3DFileData","indexArray","originalVertexArray","deformedVertexArray","LqMe"],long:["TextIndex","RndS","Mdpn","Smth","Lctn","strokeStyleVersion","LaID","Vrsn","Cnt ","Brgh","Cntr","means","vibrance","Strt","bwPresetKind","comp","compID","originalCompID","curvesPresetKind","mixerPresetKind","uOrder","vOrder","PgNm","totalPages","Crop","numerator","denominator","frameCount","Annt","keyOriginType","unitValueQuadVersion","keyOriginIndex","major","minor","fix","docDefaultNewArtboardBackgroundType","artboardBackgroundType","numModifyingFX","deformNumRows","deformNumCols","FrID","FrDl","FsID","LCnt","AFrm","AFSt","numBefore","numAfter","Spcn","minOpacity","maxOpacity","BlnM","sheetID","gblA","globalAltitude","descVersion","frameReaderType","LyrI","zoomOrigin","fontSize","Rds ","sliceID","topOutset","leftOutset","bottomOutset","rightOutset","filterID","meshQuality","meshExpansion","meshRigidity","VrsM","VrsN","NmbG","WLMn","WLMx","AmMn","AmMx","SclH","SclV","Lvl ","TlNm","TlOf","FlRs","Thsh","ShrS","ShrE","FlRs","Vrnc","Strg","ExtS","ExtD","HrzS","VrtS","NmbR","EdgF","Ang1","Ang2","Ang3","Ang4","lastAppliedComp","capturedInfo"],enum:["textGridding","Ornt","warpStyle","warpRotate","Inte","Bltn","ClrS","BlrQ","bvlT","bvlS","bvlD","Md  ","glwS","GrdF","GlwT","RplS","BlrM","SmBM","strokeStyleLineCapType","strokeStyleLineJoinType","strokeStyleLineAlignment","strokeStyleBlendMode","PntT","Styl","lookupType","LUTFormat","dataOrder","tableOrder","enableCompCore","enableCompCoreGPU","compCoreSupport","compCoreGPUSupport","Engn","enableCompCoreThreads","gs99","FrDs","trackID","animInterpStyle","horzAlign","vertAlign","bgColorType","shapeOperation","UndA","Wvtp","Drct","WndM","Edg ","FlCl","IntE","IntC","Cnvr","Fl  ","Dstr","MztT","Lns ","ExtT","DspM","ExtR","ZZTy","SphM","SmBQ","placedLayerOCIOConversion","gradientsInterpolationMethod"],bool:["PstS","printSixteenBit","masterFXSwitch","enab","uglg","antialiasGloss","useShape","useTexture","uglg","antialiasGloss","useShape","Vsbl","useTexture","Algn","Rvrs","Dthr","Invr","VctC","ShTr","layerConceals","strokeEnabled","fillEnabled","strokeStyleScaleLock","strokeStyleStrokeAdjust","hardProof","MpBl","paperWhite","useLegacy","Auto","Lab ","useTint","keyShapeInvalidated","autoExpandEnabled","autoNestEnabled","autoPositionEnabled","shrinkwrapOnSaveEnabled","present","showInDialog","overprint","sheetDisclosed","lightsDisclosed","meshesDisclosed","materialsDisclosed","hasMotion","muted","Effc","selected","autoScope","fillCanvas","cellTextIsHTML","Smoo","Clsp","validAtPosition","rigidType","hasoptions","filterMaskEnable","filterMaskLinked","filterMaskExtendWithWhite","removeJPEGArtifact","Mnch","ExtF","ExtM","moreAccurate","GpuY","LIWy","Cnty"],doub:["warpValue","warpPerspective","warpPerspectiveOther","Intr","Wdth","Hght","strokeStyleMiterLimit","strokeStyleResolution","layerTime","keyOriginResolution","xx","xy","yx","yy","tx","ty","FrGA","frameRate","audioLevel","rotation","X   ","Y   ","redFloat","greenFloat","blueFloat","imageResolution","PuX0","PuX1","PuX2","PuX3","PuY0","PuY1","PuY2","PuY3"],UntF:["sdwO","hglO","lagl","Lald","srgR","blur","Sftn","Opct","Dstn","Angl","Ckmt","Nose","Inpr","ShdN","strokeStyleLineWidth","strokeStyleLineDashOffset","strokeStyleOpacity","H   ","Top ","Left","Btom","Rght","Rslt","topRight","topLeft","bottomLeft","bottomRight","ClNs","Shrp"],VlLs:["Crv ","Clrs","Mnm ","Mxm ","Trns","pathList","strokeStyleLineDashSet","FrLs","slices","LaSt","Trnf","nonAffineTransform","keyDescriptorList","guideIndeces","gradientFillMulti","solidFillMulti","frameFXMulti","innerShadowMulti","dropShadowMulti","FrIn","FSts","FsFr","sheetTimelineOptions","audioClipList","trackList","globalTrackList","keyList","audioClipList","warpValues","selectedPin","Pts ","SbpL","pathComponents","pinOffsets","posFinalPins","pinVertexIndices","PinP","PnRt","PnOv","PnDp","filterFXList","puppetShapeList","ShrP","channelDenoise","Mtrx","layerSettings","list","compList","Adjs"],ObAr:["meshPoints","quiltSliceX","quiltSliceY"],"obj ":["null","Chnl"],"Pth ":["DspF"]},Od=["Rd  ","Grn ","Bl  ","Yllw","Ylw ","Cyn ","Mgnt","Blck","Gry ","Lmnc","A   ","B   "],il={"Mnm ":"long","Mxm ":"long",FrLs:"long",strokeStyleLineDashSet:"UntF",Trnf:"doub",nonAffineTransform:"doub",keyDescriptorList:"Objc",gradientFillMulti:"Objc",solidFillMulti:"Objc",frameFXMulti:"Objc",innerShadowMulti:"Objc",dropShadowMulti:"Objc",LaSt:"Objc",FrIn:"Objc",FSts:"Objc",FsFr:"long",blendOptions:"Objc",sheetTimelineOptions:"Objc",keyList:"Objc",warpValues:"doub",selectedPin:"long","Pts ":"Objc",SbpL:"Objc",pathComponents:"Objc",pinOffsets:"doub",posFinalPins:"doub",pinVertexIndices:"long",PinP:"doub",PnRt:"long",PnOv:"bool",PnDp:"doub",filterFXList:"Objc",puppetShapeList:"Objc",ShrP:"Objc",channelDenoise:"Objc",Mtrx:"long",compList:"long",Chnl:"enum"},Hr={};for(Br=0,ua=Object.keys(Ks);Br<ua.length;Br++)for(fa=ua[Br],Rr=0,da=Ks[fa];Rr<da.length;Rr++)Ct=da[Rr],Hr[Ct]=fa;var fa,Ct,Rr,da,Br,ua;for(zr=0,ha=Object.keys(nl);zr<ha.length;zr++)Ct=ha[zr],Hr[Ct]||(Hr[Ct]="Objc");var Ct,zr,ha;for(Nr=0,pa=Object.keys(rl);Nr<pa.length;Nr++)Ct=pa[Nr],il[Ct]="Objc";var Ct,Nr,pa;function Bd(e,n,t,r){return e==="presetKind"?typeof n=="string"?"enum":"long":e==="null"&&t==="slices"?"TEXT":e==="groupID"?t==="slices"?"long":"TEXT":e==="Sz  "?"Wdth"in n?"Objc":"units"in n?"UntF":"doub":e==="Type"?typeof n=="string"?"enum":"long":e==="AntA"?typeof n=="string"?"enum":"bool":(e==="Hrzn"||e==="Vrtc")&&(r.Type==="keyType.Pstn"||r._classID==="Ofst")?"long":e==="Hrzn"||e==="Vrtc"||e==="Top "||e==="Left"||e==="Btom"||e==="Rght"?t==="slices"?"long":typeof n=="number"?"doub":"UntF":e==="Vrsn"?typeof n=="number"?"long":"Objc":e==="Rd  "||e==="Grn "||e==="Bl  "?t==="artd"?"long":"doub":e==="Trnf"?Array.isArray(n)?"VlLs":"Objc":Hr[e]}function vt(e){var n=(0,ne.readInt32)(e);return(0,ne.readAsciiString)(e,n||4)}x.readAsciiStringOrClassId=vt;function Ft(e,n){if(n.length===4&&n!=="warp"&&n!=="time"&&n!=="hold"&&n!=="list")(0,ie.writeInt32)(e,0),(0,ie.writeSignature)(e,n);else{(0,ie.writeInt32)(e,n.length);for(var t=0;t<n.length;t++)(0,ie.writeUint8)(e,n.charCodeAt(t))}}function ga(e,n){for(var t=$t(e),r=n?{_name:t.name,_classID:t.classID}:{},i=(0,ne.readUint32)(e),a=0;a<i;a++){var o=vt(e),s=(0,ne.readSignature)(e),c=al(e,s,n);r[o]=c}return r}x.readDescriptorStructure=ga;function ma(e,n,t,r,i){nr&&!t&&console.log("Missing classId for: ",n,t,r),(0,ie.writeUnicodeStringWithPadding)(e,n),Ft(e,t);var a=Object.keys(r),o=a.length;"_name"in r&&o--,"_classID"in r&&o--,(0,ie.writeUint32)(e,o);for(var s=0,c=a;s<c.length;s++){var l=c[s];if(!(l==="_name"||l==="_classID")){var u=Bd(l,r[l],i,r),d=nl[l];l==="bounds"&&i==="text"?d=R("","bounds"):l==="origin"?u=i==="slices"?"enum":"Objc":(l==="Cyn "||l==="Mgnt"||l==="Ylw "||l==="Blck")&&r._classID==="CMYC"?u="doub":/^PN[a-z][a-z]$/.test(l)?u="TEXT":/^PT[a-z][a-z]$/.test(l)?u="long":/^PF[a-z][a-z]$/.test(l)||(l==="Rds "||l==="Thsh")&&typeof r[l]=="number"&&r._classID==="SmrB"?u="doub":l==="ClSz"||l==="Rds "||l==="Amnt"?u=typeof r[l]=="number"?"long":"UntF":(l==="sdwM"||l==="hglM")&&typeof r[l]=="string"||l==="blur"&&typeof r[l]=="string"?u="enum":l==="Hght"&&typeof r[l]=="number"&&r._classID==="Embs"||l==="Angl"&&typeof r[l]=="number"&&(r._classID==="Embs"||r._classID==="smartSharpen"||r._classID==="Twrl"||r._classID==="MtnB")?u="long":l==="Angl"&&typeof r[l]=="number"?u="doub":l==="bounds"&&i==="slices"?(u="Objc",d=R("","Rct1")):l==="Scl "?typeof r[l]=="object"&&"Hrzn"in r[l]?(u="Objc",d=re):typeof r[l]=="number"?u="long":u="UntF":l==="audioClipGroupList"&&a.length===1?u="VlLs":(l==="Strt"||l==="Brgh")&&"H   "in r?u="doub":l==="Wdth"&&typeof r[l]=="object"?u="UntF":l==="Ofst"&&typeof r[l]=="number"?u="long":l==="Strt"&&typeof r[l]=="object"?(u="Objc",d=re):Od.indexOf(l)!==-1?u=t==="RGBC"&&i!=="artd"?"doub":"long":l==="profile"?u=t==="printOutput"?"TEXT":"tdta":l==="strokeStyleContent"?r[l]["Clr "]?d=R("","solidColorLayer"):r[l].Grad?d=R("","gradientLayer"):r[l].Ptrn?d=R("","patternLayer"):nr&&console.log("Invalid strokeStyleContent value",r[l]):l==="bounds"&&i==="quiltWarp"&&(d=R("","classFloatRect")),d&&d.classID==="RGBC"&&"H   "in r[l]&&(d={classID:"HSBC",name:""}),Ft(e,l),(0,ie.writeSignature)(e,u||"long"),ol(e,u||"long",r[l],l,d,i),nr&&!u&&console.log("Missing descriptor field type for: '".concat(l,"' in"),r)}}}x.writeDescriptorStructure=ma;function al(e,n,t){switch(n){case"obj ":return zd(e);case"Objc":case"GlbO":return ga(e,t);case"VlLs":{for(var r=(0,ne.readInt32)(e),i=[],a=0;a<r;a++){var o=(0,ne.readSignature)(e);i.push(al(e,o,t))}return i}case"doub":return(0,ne.readFloat64)(e);case"UntF":{var s=(0,ne.readSignature)(e),c=(0,ne.readFloat64)(e);if(!tr[s])throw new Error("Invalid units: ".concat(s));return{units:tr[s],value:c}}case"UnFl":{var s=(0,ne.readSignature)(e),c=(0,ne.readFloat32)(e);if(!tr[s])throw new Error("Invalid units: ".concat(s));return{units:tr[s],value:c}}case"TEXT":return(0,ne.readUnicodeString)(e);case"enum":{var l=vt(e),c=vt(e);return"".concat(l,".").concat(c)}case"long":return(0,ne.readInt32)(e);case"comp":{var u=(0,ne.readUint32)(e),d=(0,ne.readUint32)(e);return{low:u,high:d}}case"bool":return!!(0,ne.readUint8)(e);case"type":case"GlbC":return $t(e);case"alis":{var f=(0,ne.readInt32)(e);return(0,ne.readAsciiString)(e,f)}case"tdta":{var h=(0,ne.readInt32)(e);return(0,ne.readBytes)(e,h)}case"ObAr":{(0,ne.readInt32)(e),(0,ne.readUnicodeString)(e),vt(e);for(var m=(0,ne.readInt32)(e),i=[],a=0;a<m;a++){var w=vt(e);(0,ne.readSignature)(e),(0,ne.readSignature)(e);for(var F=(0,ne.readInt32)(e),y=[],_=0;_<F;_++)y.push((0,ne.readFloat64)(e));i.push({type:w,values:y})}return i}case"Pth ":{(0,ne.readInt32)(e);var I=(0,ne.readSignature)(e);(0,ne.readInt32LE)(e);var S=(0,ne.readInt32LE)(e),C=(0,ne.readUnicodeStringWithLengthLE)(e,S);return{sig:I,path:C}}default:throw new Error("Invalid TySh descriptor OSType: ".concat(n," at ").concat(e.offset.toString(16)))}}var Rd={meshPoints:"rationalPoint",quiltSliceX:"UntF",quiltSliceY:"UntF"};function ol(e,n,t,r,i,a){switch(n){case"obj ":Nd(e,r,t);break;case"Objc":case"GlbO":{if(typeof t!="object")throw new Error("Invalid struct value: ".concat(JSON.stringify(t),", key: ").concat(r));if(!i)throw new Error("Missing ext type for: '".concat(r,"' (").concat(JSON.stringify(t),")"));var o=t._name||i.name,s=t._classID||i.classID;ma(e,o,s,t,a);break}case"VlLs":if(!Array.isArray(t))throw new Error("Invalid list value: ".concat(JSON.stringify(t),", key: ").concat(r));(0,ie.writeInt32)(e,t.length);for(var c=0;c<t.length;c++){var l=il[r];(0,ie.writeSignature)(e,l||"long"),ol(e,l||"long",t[c],"".concat(r,"[]"),rl[r],a),nr&&!l&&console.log("Missing descriptor array type for: '".concat(r,"' in"),t)}break;case"doub":if(typeof t!="number")throw new Error("Invalid number value: ".concat(JSON.stringify(t),", key: ").concat(r));(0,ie.writeFloat64)(e,t);break;case"UntF":if(!Or[t.units])throw new Error("Invalid units: ".concat(t.units," in ").concat(r));(0,ie.writeSignature)(e,Or[t.units]),(0,ie.writeFloat64)(e,t.value);break;case"UnFl":if(!Or[t.units])throw new Error("Invalid units: ".concat(t.units," in ").concat(r));(0,ie.writeSignature)(e,Or[t.units]),(0,ie.writeFloat32)(e,t.value);break;case"TEXT":(0,ie.writeUnicodeStringWithPadding)(e,t);break;case"enum":{if(typeof t!="string")throw new Error("Invalid enum value: ".concat(JSON.stringify(t),", key: ").concat(r));var u=t.split("."),d=u[0],f=u[1];Ft(e,d),Ft(e,f);break}case"long":if(typeof t!="number")throw new Error("Invalid integer value: ".concat(JSON.stringify(t),", key: ").concat(r));(0,ie.writeInt32)(e,t);break;case"bool":if(typeof t!="boolean")throw new Error("Invalid boolean value: ".concat(JSON.stringify(t),", key: ").concat(r));(0,ie.writeUint8)(e,t?1:0);break;case"tdta":(0,ie.writeInt32)(e,t.byteLength),(0,ie.writeBytes)(e,t);break;case"ObAr":{(0,ie.writeInt32)(e,16),(0,ie.writeUnicodeStringWithPadding)(e,"");var h=Rd[r];if(!h)throw new Error("Not implemented ObArType for: ".concat(r));Ft(e,h),(0,ie.writeInt32)(e,t.length);for(var c=0;c<t.length;c++){Ft(e,t[c].type),(0,ie.writeSignature)(e,"UnFl"),(0,ie.writeSignature)(e,"#Pxl"),(0,ie.writeInt32)(e,t[c].values.length);for(var m=0;m<t[c].values.length;m++)(0,ie.writeFloat64)(e,t[c].values[m])}break}case"Pth ":{var w=12+t.path.length*2;(0,ie.writeInt32)(e,w),(0,ie.writeSignature)(e,t.sig),(0,ie.writeInt32LE)(e,w),(0,ie.writeInt32LE)(e,t.path.length),(0,ie.writeUnicodeStringWithoutLengthLE)(e,t.path);break}default:throw new Error("Not implemented descriptor OSType: ".concat(n))}}function zd(e){for(var n=(0,ne.readInt32)(e),t=[],r=0;r<n;r++){var i=(0,ne.readSignature)(e);switch(i){case"prop":{$t(e);var a=vt(e);t.push(a);break}case"Clss":t.push($t(e));break;case"Enmr":{$t(e);var o=vt(e),s=vt(e);t.push("".concat(o,".").concat(s));break}case"rele":{$t(e),t.push((0,ne.readUint32)(e));break}case"Idnt":t.push((0,ne.readInt32)(e));break;case"indx":t.push((0,ne.readInt32)(e));break;case"name":{$t(e),t.push((0,ne.readUnicodeString)(e));break}default:throw new Error("Invalid descriptor reference type: ".concat(i))}}return t}function Nd(e,n,t){(0,ie.writeInt32)(e,t.length);for(var r=0;r<t.length;r++){var i=t[r],a="unknown";switch(typeof i=="string"&&(/^[a-z ]+\.[a-z ]+$/i.test(i)?a="Enmr":a="name"),(0,ie.writeSignature)(e,a),a){case"Enmr":{var o=i.split("."),s=o[0],c=o[1];Js(e,"\0",s),Ft(e,s),Ft(e,c);break}case"name":{Js(e,"\0","Lyr "),(0,ie.writeUnicodeString)(e,i+"\0");break}default:throw new Error("Invalid descriptor reference type: ".concat(a))}}return t}function $t(e){var n=(0,ne.readUnicodeString)(e),t=vt(e);return{name:n,classID:t}}function Js(e,n,t){(0,ie.writeUnicodeString)(e,n),Ft(e,t)}function Vd(e,n){n===void 0&&(n=!1);var t=(0,ne.readUint32)(e);if(t!==16)throw new Error("Invalid descriptor version: ".concat(t));var r=ga(e,n);return r}x.readVersionAndDescriptor=Vd;function Gd(e,n,t,r,i){i===void 0&&(i=""),(0,ie.writeUint32)(e,16),ma(e,n,t,r,i)}x.writeVersionAndDescriptor=Gd;function Vr(e){return{x:e.Hrzn,y:e.Vrtc}}x.horzVrtcToXY=Vr;function Gr(e){return{Hrzn:e.x,Vrtc:e.y}}x.xyToHorzVrtc=Gr;function Hd(e){return{top:nt(e["Top "]),left:nt(e.Left),right:nt(e.Rght),bottom:nt(e.Btom)}}x.descBoundsToBounds=Hd;function jd(e){var n;return n={Left:gt(e.left,"bounds.left")},n["Top "]=gt(e.top,"bounds.top"),n.Rght=gt(e.right,"bounds.right"),n.Btom=gt(e.bottom,"bounds.bottom"),n}x.boundsToDescBounds=jd;function Qs(e){var n={enabled:!!e.enab,position:x.FStl.decode(e.Styl),fillType:x.FrFl.decode(e.PntT),blendMode:x.BlnM.decode(e["Md  "]),opacity:De(e.Opct),size:nt(e["Sz  "])};return e.present!==void 0&&(n.present=e.present),e.showInDialog!==void 0&&(n.showInDialog=e.showInDialog),e.overprint!==void 0&&(n.overprint=e.overprint),e["Clr "]&&(n.color=en(e["Clr "])),e.Grad&&(n.gradient=fl(e)),e.Ptrn&&(n.pattern=dl(e)),n}function $s(e){var n={};return n.enab=!!e.enabled,e.present!==void 0&&(n.present=!!e.present),e.showInDialog!==void 0&&(n.showInDialog=!!e.showInDialog),n.Styl=x.FStl.encode(e.position),n.PntT=x.FrFl.encode(e.fillType),n["Md  "]=x.BlnM.encode(e.blendMode),n.Opct=Ue(e.opacity),n["Sz  "]=gt(e.size,"size"),e.color&&(n["Clr "]=tn(e.color)),e.gradient&&(n=It(It({},n),hl(e.gradient))),e.pattern&&(n=It(It({},n),pl(e.pattern))),e.overprint!==void 0&&(n.overprint=!!e.overprint),n}function sl(e,n,t){for(var r,i,a,o=t?{"Scl ":va((r=e.scale)!==null&&r!==void 0?r:1),masterFXSwitch:!e.disabled}:{masterFXSwitch:!e.disabled,"Scl ":va((i=e.scale)!==null&&i!==void 0?i:1)},s=["dropShadow","innerShadow","solidFill","gradientOverlay","stroke"],c=0,l=s;c<l.length;c++){var u=l[c];if(e[u]&&!Array.isArray(e[u]))throw new Error("".concat(u," should be an array"))}var d=function(I){return!!I&&I.length>1&&t},f=function(I){return!!I&&I.length>=1&&(!t||I.length===1)};if(f(e.dropShadow)&&(o.DrSh=Ze(e.dropShadow[0],"dropShadow",n)),d(e.dropShadow)&&(o.dropShadowMulti=e.dropShadow.map(function(I){return Ze(I,"dropShadow",n)})),f(e.innerShadow)&&(o.IrSh=Ze(e.innerShadow[0],"innerShadow",n)),d(e.innerShadow)&&(o.innerShadowMulti=e.innerShadow.map(function(I){return Ze(I,"innerShadow",n)})),e.outerGlow&&(o.OrGl=Ze(e.outerGlow,"outerGlow",n)),d(e.solidFill)&&(o.solidFillMulti=e.solidFill.map(function(I){return Ze(I,"solidFill",n)})),d(e.gradientOverlay)&&(o.gradientFillMulti=e.gradientOverlay.map(function(I){return Ze(I,"gradientOverlay",n)})),d(e.stroke)&&(o.frameFXMulti=e.stroke.map(function(I){return $s(I)})),e.innerGlow&&(o.IrGl=Ze(e.innerGlow,"innerGlow",n)),e.bevel&&(o.ebbl=Ze(e.bevel,"bevel",n)),f(e.solidFill)&&(o.SoFi=Ze(e.solidFill[0],"solidFill",n)),e.patternOverlay&&(o.patternFill=Ze(e.patternOverlay,"patternOverlay",n)),f(e.gradientOverlay)&&(o.GrFl=Ze(e.gradientOverlay[0],"gradientOverlay",n)),e.satin&&(o.ChFX=Ze(e.satin,"satin",n)),f(e.stroke)&&(o.FrFX=$s((a=e.stroke)===null||a===void 0?void 0:a[0])),t){o.numModifyingFX=0;for(var h=0,m=Object.keys(e);h<m.length;h++){var u=m[h],w=e[u];if(Array.isArray(w))for(var F=0,y=w;F<y.length;F++){var _=y[F];_.enabled&&o.numModifyingFX++}else w.enabled&&o.numModifyingFX++}}return o}x.serializeEffects=sl;function ll(e,n){var t={},r=e.masterFXSwitch,i=e.DrSh,a=e.dropShadowMulti,o=e.IrSh,s=e.innerShadowMulti,c=e.OrGl,l=e.IrGl,u=e.ebbl,d=e.SoFi,f=e.solidFillMulti,h=e.patternFill,m=e.GrFl,w=e.gradientFillMulti,F=e.ChFX,y=e.FrFX,_=e.frameFXMulti,I=e.numModifyingFX,S=Td(e,["masterFXSwitch","DrSh","dropShadowMulti","IrSh","innerShadowMulti","OrGl","IrGl","ebbl","SoFi","solidFillMulti","patternFill","GrFl","gradientFillMulti","ChFX","FrFX","frameFXMulti","numModifyingFX"]);return r||(t.disabled=!0),e["Scl "]&&(t.scale=De(e["Scl "])),i&&(t.dropShadow=[We(i,n)]),a&&(t.dropShadow=a.map(function(C){return We(C,n)})),o&&(t.innerShadow=[We(o,n)]),s&&(t.innerShadow=s.map(function(C){return We(C,n)})),c&&(t.outerGlow=We(c,n)),l&&(t.innerGlow=We(l,n)),u&&(t.bevel=We(u,n)),d&&(t.solidFill=[We(d,n)]),f&&(t.solidFill=f.map(function(C){return We(C,n)})),h&&(t.patternOverlay=We(h,n)),m&&(t.gradientOverlay=[We(m,n)]),w&&(t.gradientOverlay=w.map(function(C){return We(C,n)})),F&&(t.satin=We(F,n)),y&&(t.stroke=[Qs(y)]),_&&(t.stroke=_.map(function(C){return Qs(C)})),n&&Object.keys(S).length>1&&console.log("Unhandled effect keys:",S),t}x.parseEffects=ll;function el(e,n){for(var t=[],r=0;r<e.length;r++){var i=e[r],a=i.time,o=a.denominator,s=a.numerator,c=i.selected,l=i.animKey,u={numerator:s,denominator:o},d=x.animInterpStyleEnum.decode(i.animInterpStyle);switch(l.Type){case"keyType.Opct":t.push({interpolation:d,time:u,selected:c,type:"opacity",value:De(l.Opct)});break;case"keyType.Pstn":t.push({interpolation:d,time:u,selected:c,type:"position",x:l.Hrzn,y:l.Vrtc});break;case"keyType.Trnf":t.push({interpolation:d,time:u,selected:c,type:"transform",scale:Vr(l["Scl "]),skew:Vr(l.Skew),rotation:l.rotation,translation:Vr(l.translation)});break;case"keyType.sheetStyle":{var f={interpolation:d,time:u,selected:c,type:"style"};l.sheetStyle.Lefx&&(f.style=ll(l.sheetStyle.Lefx,n)),t.push(f);break}case"keyType.globalLighting":{t.push({interpolation:d,time:u,selected:c,type:"globalLighting",globalAngle:l.gblA,globalAltitude:l.globalAltitude});break}default:throw new Error("Unsupported keyType value")}}return t}function tl(e){for(var n=[],t=0;t<e.length;t++){var r=e[t],i=r.time,a=r.selected,o=a===void 0?!1:a,s=r.interpolation,c=x.animInterpStyleEnum.encode(s),l=void 0;switch(r.type){case"opacity":l={Type:"keyType.Opct",Opct:Ue(r.value)};break;case"position":l={Type:"keyType.Pstn",Hrzn:r.x,Vrtc:r.y};break;case"transform":l={Type:"keyType.Trnf","Scl ":Gr(r.scale),Skew:Gr(r.skew),rotation:r.rotation,translation:Gr(r.translation)};break;case"style":l={Type:"keyType.sheetStyle",sheetStyle:{Vrsn:1,blendOptions:{}}},r.style&&(l.sheetStyle={Vrsn:1,Lefx:sl(r.style,!1,!1),blendOptions:{}});break;case"globalLighting":{l={Type:"keyType.globalLighting",gblA:r.globalAngle,globalAltitude:r.globalAltitude};break}default:throw new Error("Unsupported keyType value")}n.push({Vrsn:1,animInterpStyle:c,time:i,animKey:l,selected:o})}return n}function Wd(e,n){for(var t=[],r=0;r<e.length;r++){var i=e[r],a={type:x.stdTrackID.decode(i.trackID),enabled:i.enab,keys:el(i.keyList,n)};i.effectParams&&(a.effectParams={fillCanvas:i.effectParams.fillCanvas,zoomOrigin:i.effectParams.zoomOrigin,keys:el(i.effectParams.keyList,n)}),t.push(a)}return t}x.parseTrackList=Wd;function Zd(e){for(var n=[],t=0;t<e.length;t++){var r=e[t];n.push(It(It({trackID:x.stdTrackID.encode(r.type),Vrsn:1,enab:!!r.enabled,Effc:!!r.effectParams},r.effectParams?{effectParams:{keyList:tl(r.keys),fillCanvas:r.effectParams.fillCanvas,zoomOrigin:r.effectParams.zoomOrigin}}:{}),{keyList:tl(r.keys)}))}return n}x.serializeTrackList=Zd;function We(e,n){for(var t={},r=0,i=Object.keys(e);r<i.length;r++){var a=i[r],o=e[a];switch(a){case"enab":t.enabled=!!o;break;case"uglg":t.useGlobalLight=!!o;break;case"AntA":t.antialiased=!!o;break;case"Algn":t.align=!!o;break;case"Dthr":t.dither=!!o;break;case"Invr":t.invert=!!o;break;case"Rvrs":t.reverse=!!o;break;case"Clr ":t.color=en(o);break;case"hglC":t.highlightColor=en(o);break;case"sdwC":t.shadowColor=en(o);break;case"Styl":t.position=x.FStl.decode(o);break;case"Md  ":t.blendMode=x.BlnM.decode(o);break;case"hglM":t.highlightBlendMode=x.BlnM.decode(o);break;case"sdwM":t.shadowBlendMode=x.BlnM.decode(o);break;case"bvlS":t.style=x.BESl.decode(o);break;case"bvlD":t.direction=x.BESs.decode(o);break;case"bvlT":t.technique=x.bvlT.decode(o);break;case"GlwT":t.technique=x.BETE.decode(o);break;case"glwS":t.source=x.IGSr.decode(o);break;case"Type":t.type=x.GrdT.decode(o);break;case"gs99":t.interpolationMethod=x.gradientInterpolationMethodType.decode(o);break;case"Opct":t.opacity=De(o);break;case"hglO":t.highlightOpacity=De(o);break;case"sdwO":t.shadowOpacity=De(o);break;case"lagl":t.angle=rr(o);break;case"Angl":t.angle=rr(o);break;case"Lald":t.altitude=rr(o);break;case"Sftn":t.soften=nt(o);break;case"srgR":t.strength=De(o);break;case"blur":t.size=nt(o);break;case"Nose":t.noise=De(o);break;case"Inpr":t.range=De(o);break;case"Ckmt":t.choke=nt(o);break;case"ShdN":t.jitter=De(o);break;case"Dstn":t.distance=nt(o);break;case"Scl ":t.scale=De(o);break;case"Ptrn":t.pattern={name:o["Nm  "],id:o.Idnt};break;case"phase":t.phase={x:o.Hrzn,y:o.Vrtc};break;case"Ofst":t.offset={x:De(o.Hrzn),y:De(o.Vrtc)};break;case"MpgS":case"TrnS":t.contour={name:o["Nm  "],curve:o["Crv "].map(function(s){return{x:s.Hrzn,y:s.Vrtc}})};break;case"Grad":t.gradient=cl(o);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":t[a]=o;break;case"_name":case"_classID":break;default:n&&console.log("Invalid effect key: '".concat(a,"', value:"),o)}}return t}function Ze(e,n,t){var r={enab:!1};n==="dropShadow"&&(r.TrnS={"Nm  ":"","Crv ":[]});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],s=o,c=e[s];switch(s){case"enabled":r.enab=!!c;break;case"useGlobalLight":r.uglg=!!c;break;case"antialiased":r.AntA=!!c;break;case"align":r.Algn=!!c;break;case"dither":r.Dthr=!!c;break;case"invert":r.Invr=!!c;break;case"reverse":r.Rvrs=!!c;break;case"color":r["Clr "]=tn(c);break;case"highlightColor":r.hglC=tn(c);break;case"shadowColor":r.sdwC=tn(c);break;case"position":r.Styl=x.FStl.encode(c);break;case"blendMode":r["Md  "]=x.BlnM.encode(c);break;case"highlightBlendMode":r.hglM=x.BlnM.encode(c);break;case"shadowBlendMode":r.sdwM=x.BlnM.encode(c);break;case"style":r.bvlS=x.BESl.encode(c);break;case"direction":r.bvlD=x.BESs.encode(c);break;case"technique":n==="bevel"?r.bvlT=x.bvlT.encode(c):r.GlwT=x.BETE.encode(c);break;case"source":r.glwS=x.IGSr.encode(c);break;case"type":r.Type=x.GrdT.encode(c);break;case"interpolationMethod":r.gs99=x.gradientInterpolationMethodType.encode(c);break;case"opacity":r.Opct=Ue(c);break;case"highlightOpacity":r.hglO=Ue(c);break;case"shadowOpacity":r.sdwO=Ue(c);break;case"angle":n==="gradientOverlay"||n==="patternFill"?r.Angl=wn(c):r.lagl=wn(c);break;case"altitude":r.Lald=wn(c);break;case"soften":r.Sftn=gt(c,s);break;case"strength":r.srgR=Ue(c);break;case"size":r.blur=gt(c,s);break;case"noise":r.Nose=Ue(c);break;case"range":r.Inpr=Ue(c);break;case"choke":r.Ckmt=gt(c,s);break;case"jitter":r.ShdN=Ue(c);break;case"distance":r.Dstn=gt(c,s);break;case"scale":r["Scl "]=Ue(c);break;case"pattern":r.Ptrn={"Nm  ":c.name,Idnt:c.id};break;case"phase":r.phase={Hrzn:c.x,Vrtc:c.y};break;case"offset":r.Ofst={Hrzn:Ue(c.x),Vrtc:Ue(c.y)};break;case"contour":{r[n==="satin"?"MpgS":"TrnS"]={"Nm  ":c.name,"Crv ":c.curve.map(function(l){return{Hrzn:l.x,Vrtc:l.y}})};break}case"gradient":r.Grad=ul(c);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":r[s]=c;break;default:t&&console.log("Invalid effect key: '".concat(s,"', value:"),c)}}return r}function cl(e){if(e.GrdF==="GrdF.CstS"){var n=e.Intr||4096;return{type:"solid",name:e["Nm  "],smoothness:e.Intr/4096,colorStops:e.Clrs.map(function(t){return{color:en(t["Clr "]),location:t.Lctn/n,midpoint:t.Mdpn/100}}),opacityStops:e.Trns.map(function(t){return{opacity:De(t.Opct),location:t.Lctn/n,midpoint:t.Mdpn/100}})}}else return{type:"noise",name:e["Nm  "],roughness:e.Smth/4096,colorModel:x.ClrS.decode(e.ClrS),randomSeed:e.RndS,restrictColors:!!e.VctC,addTransparency:!!e.ShTr,min:e["Mnm "].map(function(t){return t/100}),max:e["Mxm "].map(function(t){return t/100})}}function ul(e){var n,t;if(e.type==="solid"){var r=Math.round(((n=e.smoothness)!==null&&n!==void 0?n:1)*4096);return{"Nm  ":e.name||"",GrdF:"GrdF.CstS",Intr:r,Clrs:e.colorStops.map(function(i){var a;return{"Clr ":tn(i.color),Type:"Clry.UsrS",Lctn:Math.round(i.location*r),Mdpn:Math.round(((a=i.midpoint)!==null&&a!==void 0?a:.5)*100)}}),Trns:e.opacityStops.map(function(i){var a;return{Opct:Ue(i.opacity),Lctn:Math.round(i.location*r),Mdpn:Math.round(((a=i.midpoint)!==null&&a!==void 0?a:.5)*100)}})}}else return{GrdF:"GrdF.ClNs","Nm  ":e.name||"",ShTr:!!e.addTransparency,VctC:!!e.restrictColors,ClrS:x.ClrS.encode(e.colorModel),RndS:e.randomSeed||0,Smth:Math.round(((t=e.roughness)!==null&&t!==void 0?t:1)*4096),"Mnm ":(e.min||[0,0,0,0]).map(function(i){return i*100}),"Mxm ":(e.max||[1,1,1,1]).map(function(i){return i*100})}}function fl(e){var n=cl(e.Grad);return n.style=x.GrdT.decode(e.Type),e.Dthr!==void 0&&(n.dither=e.Dthr),e.gradientsInterpolationMethod!==void 0&&(n.interpolationMethod=x.gradientInterpolationMethodType.decode(e.gradientsInterpolationMethod)),e.Rvrs!==void 0&&(n.reverse=e.Rvrs),e.Angl!==void 0&&(n.angle=rr(e.Angl)),e["Scl "]!==void 0&&(n.scale=De(e["Scl "])),e.Algn!==void 0&&(n.align=e.Algn),e.Ofst!==void 0&&(n.offset={x:De(e.Ofst.Hrzn),y:De(e.Ofst.Vrtc)}),n}function dl(e){var n={name:e.Ptrn["Nm  "],id:e.Ptrn.Idnt};return e.Lnkd!==void 0&&(n.linked=e.Lnkd),e.phase!==void 0&&(n.phase={x:e.phase.Hrzn,y:e.phase.Vrtc}),n}function Xd(e){if("Grad"in e)return fl(e);if("Ptrn"in e)return It({type:"pattern"},dl(e));if("Clr "in e)return{type:"color",color:en(e["Clr "])};throw new Error("Invalid vector content")}x.parseVectorContent=Xd;function hl(e){var n={};return e.dither!==void 0&&(n.Dthr=e.dither),e.interpolationMethod!==void 0&&(n.gradientsInterpolationMethod=x.gradientInterpolationMethodType.encode(e.interpolationMethod)),e.reverse!==void 0&&(n.Rvrs=e.reverse),e.angle!==void 0&&(n.Angl=wn(e.angle)),n.Type=x.GrdT.encode(e.style),e.align!==void 0&&(n.Algn=e.align),e.scale!==void 0&&(n["Scl "]=Ue(e.scale)),e.offset&&(n.Ofst={Hrzn:Ue(e.offset.x),Vrtc:Ue(e.offset.y)}),n.Grad=ul(e),n}function pl(e){var n={Ptrn:{"Nm  ":e.name||"",Idnt:e.id||""}};return e.linked!==void 0&&(n.Lnkd=!!e.linked),e.phase!==void 0&&(n.phase={Hrzn:e.phase.x,Vrtc:e.phase.y}),n}function qd(e){return e.type==="color"?{key:"SoCo",descriptor:{"Clr ":tn(e.color)}}:e.type==="pattern"?{key:"PtFl",descriptor:pl(e)}:{key:"GdFl",descriptor:hl(e)}}x.serializeVectorContent=qd;function en(e){if("H   "in e)return{h:vl(e["H   "]),s:e.Strt,b:e.Brgh};if("Rd  "in e)return{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]};if("Cyn "in e)return{c:e["Cyn "],m:e.Mgnt,y:e["Ylw "],k:e.Blck};if("Gry "in e)return{k:e["Gry "]};if("Lmnc"in e)return{l:e.Lmnc,a:e["A   "],b:e["B   "]};if("redFloat"in e)return{fr:e.redFloat,fg:e.greenFloat,fb:e.blueFloat};throw new Error("Unsupported color descriptor")}x.parseColor=en;function tn(e){if(e){if("r"in e)return{_name:"",_classID:"RGBC","Rd  ":e.r||0,"Grn ":e.g||0,"Bl  ":e.b||0};if("fr"in e)return{_name:"",_classID:"RGBC",redFloat:e.fr,greenFloat:e.fg,blueFloat:e.fb};if("h"in e)return{_name:"",_classID:"HSBC","H   ":wn(e.h*360),Strt:e.s||0,Brgh:e.b||0};if("c"in e)return{_name:"",_classID:"CMYC","Cyn ":e.c||0,Mgnt:e.m||0,"Ylw ":e.y||0,Blck:e.k||0};if("l"in e)return{_name:"",_classID:"LABC",Lmnc:e.l||0,"A   ":e.a||0,"B   ":e.b||0};if("k"in e)return{_name:"",_classID:"GRYC","Gry ":e.k};throw new Error("Invalid color value")}else return{_name:"",_classID:"RGBC","Rd  ":0,"Grn ":0,"Bl  ":0}}x.serializeColor=tn;function rr(e){if(e===void 0)return 0;if(e.units!=="Angle")throw new Error("Invalid units: ".concat(e.units));return e.value}x.parseAngle=rr;function De(e){if(e===void 0)return 1;if(e.units!=="Percent")throw new Error("Invalid units: ".concat(e.units));return e.value/100}x.parsePercent=De;function vl(e){if(e===void 0)return 1;if(e.units==="Percent")return e.value/100;if(e.units==="Angle")return e.value/360;throw new Error("Invalid units: ".concat(e.units))}x.parsePercentOrAngle=vl;function nt(e){var n=e.units,t=e.value;if(n!=="Pixels"&&n!=="Millimeters"&&n!=="Points"&&n!=="None"&&n!=="Picas"&&n!=="Inches"&&n!=="Centimeters"&&n!=="Density")throw new Error("Invalid units: ".concat(JSON.stringify({units:n,value:t})));return{value:t,units:n}}x.parseUnits=nt;function Yd(e,n){return n===void 0&&(n="Pixels"),typeof e=="number"?{value:e,units:n}:nt(e)}x.parseUnitsOrNumber=Yd;function Kd(e,n){var t=e.units,r=e.value;if(t!==n)throw new Error("Invalid units: ".concat(JSON.stringify({units:t,value:r})));return r}x.parseUnitsToNumber=Kd;function wn(e){return{units:"Angle",value:e||0}}x.unitsAngle=wn;function Ue(e){return{units:"Percent",value:Math.round((e||0)*100)}}x.unitsPercent=Ue;function va(e){return{units:"Percent",value:(e||0)*100}}x.unitsPercentF=va;function gt(e,n){if(e==null)return{units:"Pixels",value:0};if(typeof e!="object")throw new Error("Invalid value: ".concat(JSON.stringify(e)," (key: ").concat(n,") (should have value and units)"));var t=e.units,r=e.value;if(typeof r!="number")throw new Error("Invalid value in ".concat(JSON.stringify(e)," (key: ").concat(n,")"));if(t!=="Pixels"&&t!=="Millimeters"&&t!=="Points"&&t!=="None"&&t!=="Picas"&&t!=="Inches"&&t!=="Centimeters"&&t!=="Density")throw new Error("Invalid units in ".concat(JSON.stringify(e)," (key: ").concat(n,")"));return{units:t,value:r}}x.unitsValue=gt;function Jd(e){var n=e.numerator,t=e.denominator;return{numerator:n,denominator:t}}x.frac=Jd;x.textGridding=(0,X.createEnum)("textGridding","none",{none:"None",round:"Rnd "});x.Ornt=(0,X.createEnum)("Ornt","horizontal",{horizontal:"Hrzn",vertical:"Vrtc"});x.Annt=(0,X.createEnum)("Annt","sharp",{none:"Anno",sharp:"antiAliasSharp",crisp:"AnCr",strong:"AnSt",smooth:"AnSm",platform:"antiAliasPlatformGray",platformLCD:"antiAliasPlatformLCD"});x.warpStyle=(0,X.createEnum)("warpStyle","none",{none:"warpNone",arc:"warpArc",arcLower:"warpArcLower",arcUpper:"warpArcUpper",arch:"warpArch",bulge:"warpBulge",shellLower:"warpShellLower",shellUpper:"warpShellUpper",flag:"warpFlag",wave:"warpWave",fish:"warpFish",rise:"warpRise",fisheye:"warpFisheye",inflate:"warpInflate",squeeze:"warpSqueeze",twist:"warpTwist",cylinder:"warpCylinder",custom:"warpCustom"});x.BlnM=(0,X.createEnum)("BlnM","normal",{normal:"Nrml",dissolve:"Dslv",darken:"Drkn",multiply:"Mltp","color burn":"CBrn","linear burn":"linearBurn","darker color":"darkerColor",lighten:"Lghn",screen:"Scrn","color dodge":"CDdg","linear dodge":"linearDodge","lighter color":"lighterColor",overlay:"Ovrl","soft light":"SftL","hard light":"HrdL","vivid light":"vividLight","linear light":"linearLight","pin light":"pinLight","hard mix":"hardMix",difference:"Dfrn",exclusion:"Xclu",subtract:"blendSubtraction",divide:"blendDivide",hue:"H   ",saturation:"Strt",color:"Clr ",luminosity:"Lmns","linear height":"linearHeight",height:"Hght",subtraction:"Sbtr"});x.BESl=(0,X.createEnum)("BESl","inner bevel",{"inner bevel":"InrB","outer bevel":"OtrB",emboss:"Embs","pillow emboss":"PlEb","stroke emboss":"strokeEmboss"});x.bvlT=(0,X.createEnum)("bvlT","smooth",{smooth:"SfBL","chisel hard":"PrBL","chisel soft":"Slmt"});x.BESs=(0,X.createEnum)("BESs","up",{up:"In  ",down:"Out "});x.BETE=(0,X.createEnum)("BETE","softer",{softer:"SfBL",precise:"PrBL"});x.IGSr=(0,X.createEnum)("IGSr","edge",{edge:"SrcE",center:"SrcC"});x.GrdT=(0,X.createEnum)("GrdT","linear",{linear:"Lnr ",radial:"Rdl ",angle:"Angl",reflected:"Rflc",diamond:"Dmnd"});x.animInterpStyleEnum=(0,X.createEnum)("animInterpStyle","linear",{linear:"Lnr ",hold:"hold"});x.stdTrackID=(0,X.createEnum)("stdTrackID","opacity",{opacity:"opacityTrack",style:"styleTrack",sheetTransform:"sheetTransformTrack",sheetPosition:"sheetPositionTrack",globalLighting:"globalLightingTrack"});x.gradientInterpolationMethodType=(0,X.createEnum)("gradientInterpolationMethodType","perceptual",{perceptual:"Perc",linear:"Lnr ",classic:"Gcls",smooth:"Smoo"});x.ClrS=(0,X.createEnum)("ClrS","rgb",{rgb:"RGBC",hsb:"HSBl",lab:"LbCl",hsl:"HSLC"});x.FStl=(0,X.createEnum)("FStl","outside",{outside:"OutF",center:"CtrF",inside:"InsF"});x.FrFl=(0,X.createEnum)("FrFl","color",{color:"SClr",gradient:"GrFl",pattern:"Ptrn"});x.ESliceType=(0,X.createEnum)("ESliceType","image",{image:"Img ",noImage:"noImage"});x.ESliceHorzAlign=(0,X.createEnum)("ESliceHorzAlign","default",{default:"default"});x.ESliceVertAlign=(0,X.createEnum)("ESliceVertAlign","default",{default:"default"});x.ESliceOrigin=(0,X.createEnum)("ESliceOrigin","userGenerated",{userGenerated:"userGenerated",autoGenerated:"autoGenerated",layer:"layer"});x.ESliceBGColorType=(0,X.createEnum)("ESliceBGColorType","none",{none:"None",matte:"matte",color:"Clr "});x.strokeStyleLineCapType=(0,X.createEnum)("strokeStyleLineCapType","butt",{butt:"strokeStyleButtCap",round:"strokeStyleRoundCap",square:"strokeStyleSquareCap"});x.strokeStyleLineJoinType=(0,X.createEnum)("strokeStyleLineJoinType","miter",{miter:"strokeStyleMiterJoin",round:"strokeStyleRoundJoin",bevel:"strokeStyleBevelJoin"});x.strokeStyleLineAlignment=(0,X.createEnum)("strokeStyleLineAlignment","inside",{inside:"strokeStyleAlignInside",center:"strokeStyleAlignCenter",outside:"strokeStyleAlignOutside"});x.BlrM=(0,X.createEnum)("BlrM","ispinmage",{spin:"Spn ",zoom:"Zm  "});x.BlrQ=(0,X.createEnum)("BlrQ","good",{draft:"Drft",good:"Gd  ",best:"Bst "});x.SmBM=(0,X.createEnum)("SmBM","normal",{normal:"SBMN","edge only":"SBME","overlay edge":"SBMO"});x.SmBQ=(0,X.createEnum)("SmBQ","medium",{low:"SBQL",medium:"SBQM",high:"SBQH"});x.DspM=(0,X.createEnum)("DspM","stretch to fit",{"stretch to fit":"StrF",tile:"Tile"});x.UndA=(0,X.createEnum)("UndA","repeat edge pixels",{"wrap around":"WrpA","repeat edge pixels":"RptE"});x.Cnvr=(0,X.createEnum)("Cnvr","rectangular to polar",{"rectangular to polar":"RctP","polar to rectangular":"PlrR"});x.RplS=(0,X.createEnum)("RplS","medium",{small:"Sml ",medium:"Mdm ",large:"Lrg "});x.SphM=(0,X.createEnum)("SphM","normal",{normal:"Nrml","horizontal only":"HrzO","vertical only":"VrtO"});x.Wvtp=(0,X.createEnum)("Wvtp","sine",{sine:"WvSn",triangle:"WvTr",square:"WvSq"});x.ZZTy=(0,X.createEnum)("ZZTy","pond ripples",{"around center":"ArnC","out from center":"OtFr","pond ripples":"PndR"});x.Dstr=(0,X.createEnum)("Dstr","uniform",{uniform:"Unfr",gaussian:"Gsn "});x.Chnl=(0,X.createEnum)("Chnl","composite",{red:"Rd  ",green:"Grn ",blue:"Bl  ",composite:"Cmps"});x.MztT=(0,X.createEnum)("MztT","fine dots",{"fine dots":"FnDt","medium dots":"MdmD","grainy dots":"GrnD","coarse dots":"CrsD","short lines":"ShrL","medium lines":"MdmL","long lines":"LngL","short strokes":"ShSt","medium strokes":"MdmS","long strokes":"LngS"});x.Lns=(0,X.createEnum)("Lns ","50-300mm zoom",{"50-300mm zoom":"Zm  ","32mm prime":"Nkn ","105mm prime":"Nkn1","movie prime":"PnVs"});x.blurType=(0,X.createEnum)("blurType","gaussian blur",{"gaussian blur":"GsnB","lens blur":"lensBlur","motion blur":"MtnB"});x.DfsM=(0,X.createEnum)("DfsM","normal",{normal:"Nrml","darken only":"DrkO","lighten only":"LghO",anisotropic:"anisotropic"});x.ExtT=(0,X.createEnum)("ExtT","blocks",{blocks:"Blks",pyramids:"Pyrm"});x.ExtR=(0,X.createEnum)("ExtR","random",{random:"Rndm","level-based":"LvlB"});x.FlCl=(0,X.createEnum)("FlCl","background color",{"background color":"FlBc","foreground color":"FlFr","inverse image":"FlIn","unaltered image":"FlSm"});x.CntE=(0,X.createEnum)("CntE","upper",{lower:"Lwr ",upper:"Upr "});x.WndM=(0,X.createEnum)("WndM","wind",{wind:"Wnd ",blast:"Blst",stagger:"Stgr"});x.Drct=(0,X.createEnum)("Drct","from the right",{left:"Left",right:"Rght"});x.IntE=(0,X.createEnum)("IntE","odd lines",{"odd lines":"ElmO","even lines":"ElmE"});x.IntC=(0,X.createEnum)("IntC","interpolation",{duplication:"CrtD",interpolation:"CrtI"});x.FlMd=(0,X.createEnum)("FlMd","wrap around",{"set to transparent":"Bckg","repeat edge pixels":"Rpt ","wrap around":"Wrp "});x.prjM=(0,X.createEnum)("prjM","fisheye",{fisheye:"fisP",perspective:"perP",auto:"auto","full spherical":"fusP"});x.presetKindType=(0,X.createEnum)("presetKindType","presetKindCustom",{custom:"presetKindCustom",default:"presetKindDefault"})});var wa=oe(mt=>{"use strict";var _n=mt&&mt.__assign||function(){return _n=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_n.apply(this,arguments)};Object.defineProperty(mt,"__esModule",{value:!0});mt.resourceHandlersMap=mt.resourceHandlers=void 0;var Qd=Lr(),U=Nt(),P=Sn(),Pe=zt(),Kr=Ys(),te=jr();mt.resourceHandlers=[];mt.resourceHandlersMap={};function J(e,n,t,r){var i={key:e,has:n,read:t,write:r};mt.resourceHandlers.push(i),mt.resourceHandlersMap[i.key]=i}var $e=!1,Wr=[void 0,"PPI","PPCM"],Zr=[void 0,"Inches","Centimeters","Points","Picas","Columns"],gl="0123456789abcdef";function ml(e){return e<=57?e-48:e-87}function $d(e,n){return ml(e.charCodeAt(n))<<4|ml(e.charCodeAt(n+1))}function ya(e,n){var t=(0,U.readBytes)(e,n);return(0,Kr.decodeString)(t)}function ba(e,n){var t=(0,Kr.encodeString)(n);(0,P.writeBytes)(e,t)}function e0(e){for(var n=(0,U.readUint8)(e),t=(0,U.readBytes)(e,n),r=!1,i=0;i<t.byteLength;i++)if(t[i]&128){r=!0;break}if(r){var a=new TextDecoder("gbk");return a.decode(t)}else return(0,Kr.decodeString)(t)}function t0(e,n){for(var t="",r=0,i=n.codePointAt(r++);i!==void 0;i=n.codePointAt(r++))t+=i>127?"?":String.fromCodePoint(i);var a=(0,Kr.encodeString)(t);(0,P.writeUint8)(e,a.byteLength),(0,P.writeBytes)(e,a)}Pe.MOCK_HANDLERS&&J(1028,function(e){return e._ir1028!==void 0},function(e,n,t){$e&&console.log("image resource 1028",t()),n._ir1028=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir1028)});J(1061,function(e){return e.captionDigest!==void 0},function(e,n){for(var t="",r=0;r<16;r++){var i=(0,U.readUint8)(e);t+=gl[i>>4],t+=gl[i&15]}n.captionDigest=t},function(e,n){for(var t=0;t<16;t++)(0,P.writeUint8)(e,$d(n.captionDigest,t*2))});J(1060,function(e){return e.xmpMetadata!==void 0},function(e,n,t){n.xmpMetadata=ya(e,t())},function(e,n){ba(e,n.xmpMetadata)});var Xr=(0,Pe.createEnum)("Inte","perceptual",{perceptual:"Img ",saturation:"Grp ","relative colorimetric":"Clrm","absolute colorimetric":"AClr"});Pe.MOCK_HANDLERS&&J(1085,function(e){return e._ir1085!==void 0},function(e,n,t){n._ir1085=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir1085)});J(1082,function(e){return e.printInformation!==void 0},function(e,n){var t,r,i=(0,te.readVersionAndDescriptor)(e);n.printInformation={printerName:i.printerName||"",renderingIntent:Xr.decode((t=i.Inte)!==null&&t!==void 0?t:"Inte.Img ")};var a=n.printInformation;i.PstS!==void 0&&(a.printerManagesColors=i.PstS),i["Nm  "]!==void 0&&(a.printerProfile=i["Nm  "]),i.MpBl!==void 0&&(a.blackPointCompensation=i.MpBl),i.printSixteenBit!==void 0&&(a.printSixteenBit=i.printSixteenBit),i.hardProof!==void 0&&(a.hardProof=i.hardProof),i.printProofSetup&&("Bltn"in i.printProofSetup?a.proofSetup={builtin:i.printProofSetup.Bltn.split(".")[1]}:a.proofSetup={profile:i.printProofSetup.profile,renderingIntent:Xr.decode((r=i.printProofSetup.Inte)!==null&&r!==void 0?r:"Inte.Img "),blackPointCompensation:!!i.printProofSetup.MpBl,paperWhite:!!i.printProofSetup.paperWhite})},function(e,n){var t,r,i=n.printInformation,a={};i.printerManagesColors?a.PstS=!0:(i.hardProof!==void 0&&(a.hardProof=!!i.hardProof),a.ClrS="ClrS.RGBC",a["Nm  "]=(t=i.printerProfile)!==null&&t!==void 0?t:"CIE RGB"),a.Inte=Xr.encode(i.renderingIntent),i.printerManagesColors||(a.MpBl=!!i.blackPointCompensation),a.printSixteenBit=!!i.printSixteenBit,a.printerName=i.printerName||"",i.proofSetup&&"profile"in i.proofSetup?a.printProofSetup={profile:i.proofSetup.profile||"",Inte:Xr.encode(i.proofSetup.renderingIntent),MpBl:!!i.proofSetup.blackPointCompensation,paperWhite:!!i.proofSetup.paperWhite}:a.printProofSetup={Bltn:!((r=i.proofSetup)===null||r===void 0)&&r.builtin?"builtinProof.".concat(i.proofSetup.builtin):"builtinProof.proofCMYK"},(0,te.writeVersionAndDescriptor)(e,"","printOutput",a)});Pe.MOCK_HANDLERS&&J(1083,function(e){return e._ir1083!==void 0},function(e,n,t){$e&&console.log("image resource 1083",t()),n._ir1083=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir1083)});J(1005,function(e){return e.resolutionInfo!==void 0},function(e,n){var t=(0,U.readFixedPoint32)(e),r=(0,U.readUint16)(e),i=(0,U.readUint16)(e),a=(0,U.readFixedPoint32)(e),o=(0,U.readUint16)(e),s=(0,U.readUint16)(e);n.resolutionInfo={horizontalResolution:t,horizontalResolutionUnit:Wr[r]||"PPI",widthUnit:Zr[i]||"Inches",verticalResolution:a,verticalResolutionUnit:Wr[o]||"PPI",heightUnit:Zr[s]||"Inches"}},function(e,n){var t=n.resolutionInfo;(0,P.writeFixedPoint32)(e,t.horizontalResolution||0),(0,P.writeUint16)(e,Math.max(1,Wr.indexOf(t.horizontalResolutionUnit))),(0,P.writeUint16)(e,Math.max(1,Zr.indexOf(t.widthUnit))),(0,P.writeFixedPoint32)(e,t.verticalResolution||0),(0,P.writeUint16)(e,Math.max(1,Wr.indexOf(t.verticalResolutionUnit))),(0,P.writeUint16)(e,Math.max(1,Zr.indexOf(t.heightUnit)))});var yl=["centered","size to fit","user defined"];J(1062,function(e){return e.printScale!==void 0},function(e,n){n.printScale={style:yl[(0,U.readInt16)(e)],x:(0,U.readFloat32)(e),y:(0,U.readFloat32)(e),scale:(0,U.readFloat32)(e)}},function(e,n){var t=n.printScale,r=t.style,i=t.x,a=t.y,o=t.scale;(0,P.writeInt16)(e,Math.max(0,yl.indexOf(r))),(0,P.writeFloat32)(e,i||0),(0,P.writeFloat32)(e,a||0),(0,P.writeFloat32)(e,o||0)});J(1006,function(e){return e.alphaChannelNames!==void 0},function(e,n,t){if(n.alphaChannelNames)(0,U.skipBytes)(e,t());else for(n.alphaChannelNames=[];t()>0;){var r=e0(e);n.alphaChannelNames.push(r)}},function(e,n){for(var t=0,r=n.alphaChannelNames;t<r.length;t++){var i=r[t];t0(e,i)}});J(1045,function(e){return e.alphaChannelNames!==void 0},function(e,n,t){for(n.alphaChannelNames=[];t()>0;)n.alphaChannelNames.push((0,U.readUnicodeString)(e))},function(e,n){for(var t=0,r=n.alphaChannelNames;t<r.length;t++){var i=r[t];(0,P.writeUnicodeStringWithPadding)(e,i)}});Pe.MOCK_HANDLERS&&J(1077,function(e){return e._ir1077!==void 0},function(e,n,t){$e&&console.log("image resource 1077",t()),n._ir1077=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir1077)});J(1053,function(e){return e.alphaIdentifiers!==void 0},function(e,n,t){for(n.alphaIdentifiers=[];t()>=4;)n.alphaIdentifiers.push((0,U.readUint32)(e))},function(e,n){for(var t=0,r=n.alphaIdentifiers;t<r.length;t++){var i=r[t];(0,P.writeUint32)(e,i)}});J(1010,function(e){return e.backgroundColor!==void 0},function(e,n){return n.backgroundColor=(0,U.readColor)(e)},function(e,n){return(0,P.writeColor)(e,n.backgroundColor)});J(1037,function(e){return e.globalAngle!==void 0},function(e,n){return n.globalAngle=(0,U.readInt32)(e)},function(e,n){return(0,P.writeInt32)(e,n.globalAngle)});J(1049,function(e){return e.globalAltitude!==void 0},function(e,n){return n.globalAltitude=(0,U.readUint32)(e)},function(e,n){return(0,P.writeUint32)(e,n.globalAltitude)});J(1011,function(e){return e.printFlags!==void 0},function(e,n){n.printFlags={labels:!!(0,U.readUint8)(e),cropMarks:!!(0,U.readUint8)(e),colorBars:!!(0,U.readUint8)(e),registrationMarks:!!(0,U.readUint8)(e),negative:!!(0,U.readUint8)(e),flip:!!(0,U.readUint8)(e),interpolate:!!(0,U.readUint8)(e),caption:!!(0,U.readUint8)(e),printFlags:!!(0,U.readUint8)(e)}},function(e,n){var t=n.printFlags;(0,P.writeUint8)(e,t.labels?1:0),(0,P.writeUint8)(e,t.cropMarks?1:0),(0,P.writeUint8)(e,t.colorBars?1:0),(0,P.writeUint8)(e,t.registrationMarks?1:0),(0,P.writeUint8)(e,t.negative?1:0),(0,P.writeUint8)(e,t.flip?1:0),(0,P.writeUint8)(e,t.interpolate?1:0),(0,P.writeUint8)(e,t.caption?1:0),(0,P.writeUint8)(e,t.printFlags?1:0)});J(1034,function(e){return e.copyrighted!==void 0},function(e,n){n.copyrighted=!!(0,U.readUint8)(e)},function(e,n){(0,P.writeUint8)(e,n.copyrighted?1:0)});J(1035,function(e){return e.url!==void 0},function(e,n,t){n.url=(0,U.readAsciiString)(e,t())},function(e,n){(0,P.writeAsciiString)(e,n.url)});Pe.MOCK_HANDLERS&&J(1e4,function(e){return e._ir10000!==void 0},function(e,n,t){$e&&console.log("image resource 10000",t()),n._ir10000=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir10000)});Pe.MOCK_HANDLERS&&J(1013,function(e){return e._ir1013!==void 0},function(e,n,t){$e&&console.log("image resource 1013",t()),n._ir1013=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir1013)});Pe.MOCK_HANDLERS&&J(1016,function(e){return e._ir1016!==void 0},function(e,n,t){$e&&console.log("image resource 1016",t()),n._ir1016=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir1016)});J(1080,function(e){return e.countInformation!==void 0},function(e,n){var t=(0,te.readVersionAndDescriptor)(e);n.countInformation=t.countGroupList.map(function(r){return{color:{r:r["Rd  "],g:r["Grn "],b:r["Bl  "]},name:r["Nm  "],size:r["Rds "],fontSize:r.fontSize,visible:r.Vsbl,points:r.countObjectList.map(function(i){return{x:i["X   "],y:i["Y   "]}})}})},function(e,n){var t={Vrsn:1,countGroupList:n.countInformation.map(function(r){return{"Rd  ":r.color.r,"Grn ":r.color.g,"Bl  ":r.color.b,"Nm  ":r.name,"Rds ":r.size,fontSize:r.fontSize,Vsbl:r.visible,countObjectList:r.points.map(function(i){return{"X   ":i.x,"Y   ":i.y}})}})};(0,te.writeVersionAndDescriptor)(e,"","Cnt ",t)});J(1024,function(e){return e.layerState!==void 0},function(e,n){return n.layerState=(0,U.readUint16)(e)},function(e,n){return(0,P.writeUint16)(e,n.layerState)});J(1026,function(e){return e.layersGroup!==void 0},function(e,n,t){for(n.layersGroup=[];t()>0;)n.layersGroup.push((0,U.readUint16)(e))},function(e,n){for(var t=0,r=n.layersGroup;t<r.length;t++){var i=r[t];(0,P.writeUint16)(e,i)}});J(1072,function(e){return e.layerGroupsEnabledId!==void 0},function(e,n,t){for(n.layerGroupsEnabledId=[];t()>0;)n.layerGroupsEnabledId.push((0,U.readUint8)(e))},function(e,n){for(var t=0,r=n.layerGroupsEnabledId;t<r.length;t++){var i=r[t];(0,P.writeUint8)(e,i)}});J(1069,function(e){return e.layerSelectionIds!==void 0},function(e,n){var t=(0,U.readUint16)(e);for(n.layerSelectionIds=[];t--;)n.layerSelectionIds.push((0,U.readUint32)(e))},function(e,n){(0,P.writeUint16)(e,n.layerSelectionIds.length);for(var t=0,r=n.layerSelectionIds;t<r.length;t++){var i=r[t];(0,P.writeUint32)(e,i)}});J(1032,function(e){return e.gridAndGuidesInformation!==void 0},function(e,n){var t=(0,U.readUint32)(e),r=(0,U.readUint32)(e),i=(0,U.readUint32)(e),a=(0,U.readUint32)(e);if(t!==1)throw new Error("Invalid 1032 resource version: ".concat(t));n.gridAndGuidesInformation={grid:{horizontal:r,vertical:i},guides:[]};for(var o=0;o<a;o++)n.gridAndGuidesInformation.guides.push({location:(0,U.readUint32)(e)/32,direction:(0,U.readUint8)(e)?"horizontal":"vertical"})},function(e,n){var t=n.gridAndGuidesInformation,r=t.grid||{horizontal:18*32,vertical:18*32},i=t.guides||[];(0,P.writeUint32)(e,1),(0,P.writeUint32)(e,r.horizontal),(0,P.writeUint32)(e,r.vertical),(0,P.writeUint32)(e,i.length);for(var a=0,o=i;a<o.length;a++){var s=o[a];(0,P.writeUint32)(e,s.location*32),(0,P.writeUint8)(e,s.direction==="horizontal"?1:0)}});J(1065,function(e){return e.layerComps!==void 0},function(e,n){var t=(0,te.readVersionAndDescriptor)(e,!0);n.layerComps={list:[]};for(var r=0,i=t.list;r<i.length;r++){var a=i[r];n.layerComps.list.push({id:a.compID,name:a["Nm  "],capturedInfo:a.capturedInfo}),"comment"in a&&(n.layerComps.list[n.layerComps.list.length-1].comment=a.comment)}"lastAppliedComp"in t&&(n.layerComps.lastApplied=t.lastAppliedComp)},function(e,n){for(var t=n.layerComps,r={list:[]},i=0,a=t.list;i<a.length;i++){var o=a[i],s={};s._classID="Comp",s["Nm  "]=o.name,"comment"in o&&(s.comment=o.comment),s.compID=o.id,s.capturedInfo=o.capturedInfo,r.list.push(s)}"lastApplied"in t&&(r.lastAppliedComp=t.lastApplied),(0,te.writeVersionAndDescriptor)(e,"","CompList",r)});Pe.MOCK_HANDLERS&&J(1092,function(e){return e._ir1092!==void 0},function(e,n,t){$e&&console.log("image resource 1092",t()),n._ir1092=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir1092)});var bl=["normal",void 0,void 0,void 0,void 0,void 0,void 0,"multiply","screen",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"difference"];J(1078,function(e){return e.onionSkins!==void 0},function(e,n){var t=(0,te.readVersionAndDescriptor)(e);n.onionSkins={enabled:t.enab,framesBefore:t.numBefore,framesAfter:t.numAfter,frameSpacing:t.Spcn,minOpacity:t.minOpacity/100,maxOpacity:t.maxOpacity/100,blendMode:bl[t.BlnM]||"normal"}},function(e,n){var t=n.onionSkins,r={Vrsn:1,enab:t.enabled,numBefore:t.framesBefore,numAfter:t.framesAfter,Spcn:t.frameSpacing,minOpacity:t.minOpacity*100|0,maxOpacity:t.maxOpacity*100|0,BlnM:Math.max(0,bl.indexOf(t.blendMode))};(0,te.writeVersionAndDescriptor)(e,"","null",r)});J(1075,function(e){return e.timelineInformation!==void 0},function(e,n){var t,r,i=(0,te.readVersionAndDescriptor)(e);n.timelineInformation={enabled:i.enab,frameStep:(0,te.frac)(i.frameStep),frameRate:i.frameRate,time:(0,te.frac)(i.time),duration:(0,te.frac)(i.duration),workInTime:(0,te.frac)(i.workInTime),workOutTime:(0,te.frac)(i.workOutTime),repeats:i.LCnt,hasMotion:i.hasMotion,globalTracks:(0,te.parseTrackList)(i.globalTrackList,!!e.logMissingFeatures)},!((r=(t=i.audioClipGroupList)===null||t===void 0?void 0:t.audioClipGroupList)===null||r===void 0)&&r.length&&(n.timelineInformation.audioClipGroups=i.audioClipGroupList.audioClipGroupList.map(function(a){return{id:a.groupID,muted:a.muted,audioClips:a.audioClipList.map(function(o){var s=o.clipID,c=o.timeScope,l=o.muted,u=o.audioLevel,d=o.frameReader;return{id:s,start:(0,te.frac)(c.Strt),duration:(0,te.frac)(c.duration),inTime:(0,te.frac)(c.inTime),outTime:(0,te.frac)(c.outTime),muted:l,audioLevel:u,frameReader:{type:d.frameReaderType,mediaDescriptor:d.mediaDescriptor,link:{name:d["Lnk "]["Nm  "],fullPath:d["Lnk "].fullPath,relativePath:d["Lnk "].relPath}}}})}}))},function(e,n){var t,r=n.timelineInformation,i={Vrsn:1,enab:r.enabled,frameStep:r.frameStep,frameRate:r.frameRate,time:r.time,duration:r.duration,workInTime:r.workInTime,workOutTime:r.workOutTime,LCnt:r.repeats,globalTrackList:(0,te.serializeTrackList)(r.globalTracks),audioClipGroupList:{audioClipGroupList:(t=r.audioClipGroups)===null||t===void 0?void 0:t.map(function(a){return{groupID:a.id,muted:a.muted,audioClipList:a.audioClips.map(function(o){return{clipID:o.id,timeScope:{Vrsn:1,Strt:o.start,duration:o.duration,inTime:o.inTime,outTime:o.outTime},frameReader:{frameReaderType:o.frameReader.type,descVersion:1,"Lnk ":{descVersion:1,"Nm  ":o.frameReader.link.name,fullPath:o.frameReader.link.fullPath,relPath:o.frameReader.link.relativePath},mediaDescriptor:o.frameReader.mediaDescriptor},muted:o.muted,audioLevel:o.audioLevel}})}})},hasMotion:r.hasMotion};(0,te.writeVersionAndDescriptor)(e,"","null",i,"anim")});J(1076,function(e){return e.sheetDisclosure!==void 0},function(e,n){var t=(0,te.readVersionAndDescriptor)(e);n.sheetDisclosure={},t.sheetTimelineOptions&&(n.sheetDisclosure.sheetTimelineOptions=t.sheetTimelineOptions.map(function(r){return{sheetID:r.sheetID,sheetDisclosed:r.sheetDisclosed,lightsDisclosed:r.lightsDisclosed,meshesDisclosed:r.meshesDisclosed,materialsDisclosed:r.materialsDisclosed}}))},function(e,n){var t=n.sheetDisclosure,r={Vrsn:1};t.sheetTimelineOptions&&(r.sheetTimelineOptions=t.sheetTimelineOptions.map(function(i){return{Vrsn:2,sheetID:i.sheetID,sheetDisclosed:i.sheetDisclosed,lightsDisclosed:i.lightsDisclosed,meshesDisclosed:i.meshesDisclosed,materialsDisclosed:i.materialsDisclosed}})),(0,te.writeVersionAndDescriptor)(e,"","null",r)});J(1054,function(e){return e.urlsList!==void 0},function(e,n){var t=(0,U.readUint32)(e);n.urlsList=[];for(var r=0;r<t;r++){var i=(0,U.readSignature)(e);if(i!=="slic"&&e.throwForMissingFeatures)throw new Error("Unknown long");var a=(0,U.readUint32)(e),o=(0,U.readUnicodeString)(e);n.urlsList.push({id:a,url:o,ref:"slice"})}},function(e,n){var t=n.urlsList;(0,P.writeUint32)(e,t.length);for(var r=0;r<t.length;r++)(0,P.writeSignature)(e,"slic"),(0,P.writeUint32)(e,t[r].id),(0,P.writeUnicodeString)(e,t[r].url)});function wl(e){return{"Top ":e.top,Left:e.left,Btom:e.bottom,Rght:e.right}}function Sl(e){return{top:e["Top "],left:e.Left,bottom:e.Btom,right:e.Rght}}function qr(e,n){return e[Math.max(0,Math.min(e.length-1,n))]}var _l=["autoGenerated","layer","userGenerated"],xl=["noImage","image"],Yr=["default"];J(1050,function(e){return e.slices?e.slices.length:0},function(e,n){var t=(0,U.readUint32)(e);if(t===6){n.slices||(n.slices=[]);var r=(0,U.readInt32)(e),i=(0,U.readInt32)(e),a=(0,U.readInt32)(e),o=(0,U.readInt32)(e),s=(0,U.readUnicodeString)(e),c=(0,U.readUint32)(e);n.slices.push({bounds:{top:r,left:i,bottom:a,right:o},groupName:s,slices:[]});for(var l=n.slices[n.slices.length-1].slices,u=0;u<c;u++){var d=(0,U.readUint32)(e),f=(0,U.readUint32)(e),h=qr(_l,(0,U.readUint32)(e)),m=h=="layer"?(0,U.readUint32)(e):0,w=(0,U.readUnicodeString)(e),F=qr(xl,(0,U.readUint32)(e)),y=(0,U.readInt32)(e),_=(0,U.readInt32)(e),I=(0,U.readInt32)(e),S=(0,U.readInt32)(e),C=(0,U.readUnicodeString)(e),E=(0,U.readUnicodeString)(e),k=(0,U.readUnicodeString)(e),A=(0,U.readUnicodeString)(e),L=!!(0,U.readUint8)(e),T=(0,U.readUnicodeString)(e),O=qr(Yr,(0,U.readUint32)(e)),W=qr(Yr,(0,U.readUint32)(e)),D=(0,U.readUint8)(e),B=(0,U.readUint8)(e),H=(0,U.readUint8)(e),M=(0,U.readUint8)(e),q=D+B+H+M===0?"none":D===0?"matte":"color";l.push({id:d,groupId:f,origin:h,associatedLayerId:m,name:w,target:E,message:k,altTag:A,cellTextIsHTML:L,cellText:T,horizontalAlignment:O,verticalAlignment:W,type:F,url:C,bounds:{top:_,left:y,bottom:S,right:I},backgroundColorType:q,backgroundColor:{r:B,g:H,b:M,a:D}})}var se=(0,te.readVersionAndDescriptor)(e);se.slices.forEach(function(pe){var Y=l.find(function(ge){return pe.sliceID==ge.id});Y&&(Y.topOutset=pe.topOutset,Y.leftOutset=pe.leftOutset,Y.bottomOutset=pe.bottomOutset,Y.rightOutset=pe.rightOutset)})}else if(t===7||t===8){var se=(0,te.readVersionAndDescriptor)(e);n.slices||(n.slices=[]),n.slices.push({groupName:se.baseName,bounds:Sl(se.bounds),slices:se.slices.map(function(Y){return _n(_n({},Y["Nm  "]?{name:Y["Nm  "]}:{}),{id:Y.sliceID,groupId:Y.groupID,associatedLayerId:0,origin:te.ESliceOrigin.decode(Y.origin),type:te.ESliceType.decode(Y.Type),bounds:Sl(Y.bounds),url:Y.url,target:Y.null,message:Y.Msge,altTag:Y.altTag,cellTextIsHTML:Y.cellTextIsHTML,cellText:Y.cellText,horizontalAlignment:te.ESliceHorzAlign.decode(Y.horzAlign),verticalAlignment:te.ESliceVertAlign.decode(Y.vertAlign),backgroundColorType:te.ESliceBGColorType.decode(Y.bgColorType),backgroundColor:Y.bgColor?{r:Y.bgColor["Rd  "],g:Y.bgColor["Grn "],b:Y.bgColor["Bl  "],a:Y.bgColor.alpha}:{r:0,g:0,b:0,a:0},topOutset:Y.topOutset||0,leftOutset:Y.leftOutset||0,bottomOutset:Y.bottomOutset||0,rightOutset:Y.rightOutset||0})})})}else throw new Error("Invalid slices version (".concat(t,")"))},function(e,n,t){var r=n.slices[t],i=r.bounds,a=r.groupName,o=r.slices;(0,P.writeUint32)(e,6),(0,P.writeInt32)(e,i.top),(0,P.writeInt32)(e,i.left),(0,P.writeInt32)(e,i.bottom),(0,P.writeInt32)(e,i.right),(0,P.writeUnicodeString)(e,a),(0,P.writeUint32)(e,o.length);for(var s=0;s<o.length;s++){var c=o[s],l=c.backgroundColor,u=l.a,d=l.r,f=l.g,h=l.b;c.backgroundColorType==="none"?u=d=f=h=0:c.backgroundColorType==="matte"&&(u=0,d=f=h=255),(0,P.writeUint32)(e,c.id),(0,P.writeUint32)(e,c.groupId),(0,P.writeUint32)(e,_l.indexOf(c.origin)),c.origin==="layer"&&(0,P.writeUint32)(e,c.associatedLayerId),(0,P.writeUnicodeString)(e,c.name||""),(0,P.writeUint32)(e,xl.indexOf(c.type)),(0,P.writeInt32)(e,c.bounds.left),(0,P.writeInt32)(e,c.bounds.top),(0,P.writeInt32)(e,c.bounds.right),(0,P.writeInt32)(e,c.bounds.bottom),(0,P.writeUnicodeString)(e,c.url),(0,P.writeUnicodeString)(e,c.target),(0,P.writeUnicodeString)(e,c.message),(0,P.writeUnicodeString)(e,c.altTag),(0,P.writeUint8)(e,c.cellTextIsHTML?1:0),(0,P.writeUnicodeString)(e,c.cellText),(0,P.writeUint32)(e,Yr.indexOf(c.horizontalAlignment)),(0,P.writeUint32)(e,Yr.indexOf(c.verticalAlignment)),(0,P.writeUint8)(e,u),(0,P.writeUint8)(e,d),(0,P.writeUint8)(e,f),(0,P.writeUint8)(e,h)}var m={bounds:wl(i),slices:[]};o.forEach(function(w){var F=_n(_n({sliceID:w.id,groupID:w.groupId,origin:te.ESliceOrigin.encode(w.origin),Type:te.ESliceType.encode(w.type),bounds:wl(w.bounds)},w.name?{"Nm  ":w.name}:{}),{url:w.url,null:w.target,Msge:w.message,altTag:w.altTag,cellTextIsHTML:w.cellTextIsHTML,cellText:w.cellText,horzAlign:te.ESliceHorzAlign.encode(w.horizontalAlignment),vertAlign:te.ESliceVertAlign.encode(w.verticalAlignment),bgColorType:te.ESliceBGColorType.encode(w.backgroundColorType)});if(w.backgroundColorType==="color"){var y=w.backgroundColor,_=y.r,I=y.g,S=y.b,C=y.a;F.bgColor={"Rd  ":_,"Grn ":I,"Bl  ":S,alpha:C}}F.topOutset=w.topOutset||0,F.leftOutset=w.leftOutset||0,F.bottomOutset=w.bottomOutset||0,F.rightOutset=w.rightOutset||0,m.slices.push(F)}),(0,te.writeVersionAndDescriptor)(e,"","null",m,"slices")});J(1064,function(e){return e.pixelAspectRatio!==void 0},function(e,n){if((0,U.readUint32)(e)>2)throw new Error("Invalid pixelAspectRatio version");n.pixelAspectRatio={aspect:(0,U.readFloat64)(e)}},function(e,n){(0,P.writeUint32)(e,2),(0,P.writeFloat64)(e,n.pixelAspectRatio.aspect)});J(1041,function(e){return e.iccUntaggedProfile!==void 0},function(e,n){n.iccUntaggedProfile=!!(0,U.readUint8)(e)},function(e,n){(0,P.writeUint8)(e,n.iccUntaggedProfile?1:0)});Pe.MOCK_HANDLERS&&J(1039,function(e){return e._ir1039!==void 0},function(e,n,t){$e&&console.log("image resource 1039",t()),n._ir1039=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir1039)});J(1044,function(e){return e.idsSeedNumber!==void 0},function(e,n){return n.idsSeedNumber=(0,U.readUint32)(e)},function(e,n){return(0,P.writeUint32)(e,n.idsSeedNumber)});J(1036,function(e){return e.thumbnail!==void 0||e.thumbnailRaw!==void 0},function(e,n,t){var r=(0,U.readUint32)(e),i=(0,U.readUint32)(e),a=(0,U.readUint32)(e);(0,U.readUint32)(e),(0,U.readUint32)(e),(0,U.readUint32)(e);var o=(0,U.readUint16)(e),s=(0,U.readUint16)(e);if(r!==1||o!==24||s!==1){e.logMissingFeatures&&e.log("Invalid thumbnail data (format: ".concat(r,", bitsPerPixel: ").concat(o,", planes: ").concat(s,")")),(0,U.skipBytes)(e,t());return}var c=t(),l=(0,U.readBytes)(e,c);e.useRawThumbnail?n.thumbnailRaw={width:i,height:a,data:l}:l.byteLength&&(n.thumbnail=(0,Pe.createCanvasFromData)(l))},function(e,n){var t,r=0,i=0,a=new Uint8Array(0);if(n.thumbnailRaw)r=n.thumbnailRaw.width,i=n.thumbnailRaw.height,a=n.thumbnailRaw.data;else try{var o=(t=n.thumbnail.toDataURL("image/jpeg",1))===null||t===void 0?void 0:t.substring(23);o&&(a=(0,Qd.toByteArray)(o),r=n.thumbnail.width,i=n.thumbnail.height)}catch{}var s=24,c=Math.floor((r*s+31)/32)*4,l=1,u=c*i*l,d=a.length;(0,P.writeUint32)(e,1),(0,P.writeUint32)(e,r),(0,P.writeUint32)(e,i),(0,P.writeUint32)(e,c),(0,P.writeUint32)(e,u),(0,P.writeUint32)(e,d),(0,P.writeUint16)(e,s),(0,P.writeUint16)(e,l),(0,P.writeBytes)(e,a)});J(1057,function(e){return e.versionInfo!==void 0},function(e,n,t){var r=(0,U.readUint32)(e);if(r!==1)throw new Error("Invalid versionInfo version");n.versionInfo={hasRealMergedData:!!(0,U.readUint8)(e),writerName:(0,U.readUnicodeString)(e),readerName:(0,U.readUnicodeString)(e),fileVersion:(0,U.readUint32)(e)},(0,U.skipBytes)(e,t())},function(e,n){var t=n.versionInfo;(0,P.writeUint32)(e,1),(0,P.writeUint8)(e,t.hasRealMergedData?1:0),(0,P.writeUnicodeString)(e,t.writerName),(0,P.writeUnicodeString)(e,t.readerName),(0,P.writeUint32)(e,t.fileVersion)});Pe.MOCK_HANDLERS&&J(1058,function(e){return e._ir1058!==void 0},function(e,n,t){$e&&console.log("image resource 1058",t()),n._ir1058=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir1058)});J(7e3,function(e){return e.imageReadyVariables!==void 0},function(e,n,t){n.imageReadyVariables=ya(e,t())},function(e,n){ba(e,n.imageReadyVariables)});J(7001,function(e){return e.imageReadyDataSets!==void 0},function(e,n,t){n.imageReadyDataSets=ya(e,t())},function(e,n){ba(e,n.imageReadyDataSets)});J(1088,function(e){return e.pathSelectionState!==void 0},function(e,n,t){var r=(0,te.readVersionAndDescriptor)(e);n.pathSelectionState=r.null},function(e,n){var t={null:n.pathSelectionState};(0,te.writeVersionAndDescriptor)(e,"","null",t)});Pe.MOCK_HANDLERS&&J(1025,function(e){return e._ir1025!==void 0},function(e,n,t){$e&&console.log("image resource 1025",t()),n._ir1025=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir1025)});var Il=(0,Pe.createEnum)("FrmD","",{auto:"Auto",none:"None",dispose:"Disp"});J(4e3,function(e){return e.animations!==void 0},function(e,n,t){var r=(0,U.readSignature)(e);if(r==="mani")(0,U.checkSignature)(e,"IRFR"),(0,U.readSection)(e,1,function(a){for(var o=function(){(0,U.checkSignature)(e,"8BIM");var s=(0,U.readSignature)(e);(0,U.readSection)(e,1,function(c){if(s==="AnDs"){var l=(0,te.readVersionAndDescriptor)(e);n.animations={frames:l.FrIn.map(function(d){return{id:d.FrID,delay:(d.FrDl||0)/100,dispose:d.FrDs?Il.decode(d.FrDs):"auto"}}),animations:l.FSts.map(function(d){return{id:d.FsID,frames:d.FsFr,repeats:d.LCnt,activeFrame:d.AFrm||0}})}}else if(s==="Roll"){var u=(0,U.readBytes)(e,c());e.logDevFeatures&&e.log("#4000 Roll",u)}else e.logMissingFeatures&&e.log("Unhandled subsection in #4000",s)})};a()>0;)o()});else if(r==="mopt"){var i=(0,U.readBytes)(e,t());e.logDevFeatures&&e.log("#4000 mopt",i)}else e.logMissingFeatures&&e.log("Unhandled key in #4000:",r)},function(e,n){n.animations&&((0,P.writeSignature)(e,"mani"),(0,P.writeSignature)(e,"IRFR"),(0,P.writeSection)(e,1,function(){(0,P.writeSignature)(e,"8BIM"),(0,P.writeSignature)(e,"AnDs"),(0,P.writeSection)(e,1,function(){for(var t={FrIn:[],FSts:[]},r=0;r<n.animations.frames.length;r++){var i=n.animations.frames[r],a={FrID:i.id};i.delay&&(a.FrDl=i.delay*100|0),a.FrDs=Il.encode(i.dispose),t.FrIn.push(a)}for(var r=0;r<n.animations.animations.length;r++){var o=n.animations.animations[r],s={FsID:o.id,AFrm:o.activeFrame|0,FsFr:o.frames,LCnt:o.repeats|0};t.FSts.push(s)}(0,te.writeVersionAndDescriptor)(e,"","null",t)})}))});Pe.MOCK_HANDLERS&&J(4001,function(e){return e._ir4001!==void 0},function(e,n,t){if(Pe.MOCK_HANDLERS){$e&&console.log("image resource 4001",t()),n._ir4001=(0,U.readBytes)(e,t());return}var r=(0,U.readSignature)(e);if(r==="mfri"){var i=(0,U.readUint32)(e);if(i!==2)throw new Error("Invalid mfri version");var a=(0,U.readUint32)(e),o=(0,U.readBytes)(e,a);e.logDevFeatures&&e.log("mfri",o)}else if(r==="mset"){var s=(0,te.readVersionAndDescriptor)(e);e.logDevFeatures&&e.log("mset",s)}else e.logMissingFeatures&&e.log("Unhandled key in #4001",r)},function(e,n){(0,P.writeBytes)(e,n._ir4001)});Pe.MOCK_HANDLERS&&J(4002,function(e){return e._ir4002!==void 0},function(e,n,t){$e&&console.log("image resource 4002",t()),n._ir4002=(0,U.readBytes)(e,t())},function(e,n){(0,P.writeBytes)(e,n._ir4002)})});var Nt=oe(z=>{"use strict";var n0=z&&z.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};Object.defineProperty(z,"__esModule",{value:!0});z.readPattern=z.readColor=z.readSection=z.readDataRLE=z.readDataZip=z.createImageDataBitDepth=z.readAdditionalLayerInfo=z.readGlobalLayerMaskInfo=z.readData=z.readLayerInfo=z.readPsd=z.checkSignature=z.skipBytes=z.readAsciiString=z.readUnicodeStringWithLengthLE=z.readUnicodeStringWithLength=z.readUnicodeString=z.readPascalString=z.validSignatureAt=z.readSignature=z.readBytes=z.readFixedPointPath32=z.readFixedPoint32=z.readFloat64=z.readFloat32=z.readUint32=z.readInt32LE=z.readInt32=z.readUint16LE=z.readUint16=z.readInt16=z.peekUint8=z.readUint8=z.warnOrThrow=z.createReader=z.supportedColorModes=void 0;var r0=ia(),Ie=zt(),i0=ni(),a0=wa();z.supportedColorModes=[0,1,3,2];var o0=["bitmap","grayscale","indexed","RGB","CMYK","multichannel","duotone","lab"];function Qr(e){for(var n=e.width*e.height*4,t=0;t<n;t+=4){var r=e.data[t];e.data[t+1]=r,e.data[t+2]=r}}function Cl(e,n,t){var r=new DataView(e,n,t);return{view:r,offset:0,strict:!1,debug:!1,large:!1,globalAlpha:!1,log:console.log}}z.createReader=Cl;function $r(e,n){if(e.strict)throw new Error(n);e.debug&&e.log(n)}z.warnOrThrow=$r;function ve(e){return e.offset+=1,e.view.getUint8(e.offset-1)}z.readUint8=ve;function kl(e){return e.view.getUint8(e.offset)}z.peekUint8=kl;function Gt(e){return e.offset+=2,e.view.getInt16(e.offset-2,!1)}z.readInt16=Gt;function le(e){return e.offset+=2,e.view.getUint16(e.offset-2,!1)}z.readUint16=le;function Al(e){return e.offset+=2,e.view.getUint16(e.offset-2,!0)}z.readUint16LE=Al;function Re(e){return e.offset+=4,e.view.getInt32(e.offset-4,!1)}z.readInt32=Re;function s0(e){return e.offset+=4,e.view.getInt32(e.offset-4,!0)}z.readInt32LE=s0;function he(e){return e.offset+=4,e.view.getUint32(e.offset-4,!1)}z.readUint32=he;function l0(e){return e.offset+=4,e.view.getFloat32(e.offset-4,!1)}z.readFloat32=l0;function _a(e){return e.offset+=8,e.view.getFloat64(e.offset-8,!1)}z.readFloat64=_a;function c0(e){return Re(e)/65536}z.readFixedPoint32=c0;function u0(e){return Re(e)/(1<<24)}z.readFixedPointPath32=u0;function nn(e,n){var t=e.view.byteOffset+e.offset;if(e.offset+=n,t+n>e.view.buffer.byteLength){if($r(e,"Reading bytes exceeding buffer length"),n>100*1024*1024)throw new Error("Reading past end of file");var r=new Uint8Array(n),i=Math.min(n,e.view.byteLength-t);return i>0&&r.set(new Uint8Array(e.view.buffer,t,i)),r}else return new Uint8Array(e.view.buffer,t,n)}z.readBytes=nn;function ir(e){return Pl(e,4)}z.readSignature=ir;function Dl(e,n){var t=String.fromCharCode(e.view.getUint8(n))+String.fromCharCode(e.view.getUint8(n+1))+String.fromCharCode(e.view.getUint8(n+2))+String.fromCharCode(e.view.getUint8(n+3));return t=="8BIM"||t=="8B64"}z.validSignatureAt=Dl;function ti(e,n){for(var t=ve(e),r=t?Pl(e,t):"";++t%n;)e.offset++;return r}z.readPascalString=ti;function El(e){var n=he(e);return Ul(e,n)}z.readUnicodeString=El;function Ul(e,n){for(var t="";n--;){var r=le(e);(r||n>0)&&(t+=String.fromCharCode(r))}return t}z.readUnicodeStringWithLength=Ul;function f0(e,n){for(var t="";n--;){var r=Al(e);(r||n>0)&&(t+=String.fromCharCode(r))}return t}z.readUnicodeStringWithLengthLE=f0;function d0(e,n){for(var t="";n--;)t+=String.fromCharCode(ve(e));return t}z.readAsciiString=d0;function Se(e,n){e.offset+=n}z.skipBytes=Se;function Ca(e,n,t){var r=e.offset,i=ir(e);if(i!==n&&i!==t)throw new Error("Invalid signature: '".concat(i,"' at 0x").concat(r.toString(16)))}z.checkSignature=Ca;function Pl(e,n){for(var t=nn(e,n),r="",i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}function h0(e){return e==="8BIM"||e==="MeSa"||e==="AgHg"||e==="PHUT"||e==="DCSR"}function p0(e,n){var t;n===void 0&&(n={}),Ca(e,"8BPS");var r=le(e);if(r!==1&&r!==2)throw new Error("Invalid PSD file version: ".concat(r));Se(e,6);var i=le(e),a=he(e),o=he(e),s=le(e),c=le(e),l=r===1?3e4:3e5;if(o>l||a>l)throw new Error("Invalid size: ".concat(o,"x").concat(a));if(i>16)throw new Error("Invalid channel count: ".concat(i));if(![1,8,16,32].includes(s))throw new Error("Invalid bitsPerChannel: ".concat(s));if(z.supportedColorModes.indexOf(c)===-1)throw new Error("Color mode not supported: ".concat((t=o0[c])!==null&&t!==void 0?t:c));var u={width:o,height:a,channels:i,bitsPerChannel:s,colorMode:c};Object.assign(e,n),e.large=r===2,e.globalAlpha=!1,rt(e,1,function(y){if(y()){if(c===2){if(y()!=768)throw new Error("Invalid color palette size");u.palette=[];for(var _=0;_<256;_++)u.palette.push({r:ve(e),g:0,b:0});for(var _=0;_<256;_++)u.palette[_].g=ve(e);for(var _=0;_<256;_++)u.palette[_].b=ve(e)}Se(e,y())}});var d={};rt(e,1,function(y){for(var _=function(){Ll(e,h0);var I=le(e);ti(e,2),rt(e,2,function(S){var C=a0.resourceHandlersMap[I],E=I===1036&&!!e.skipThumbnail;if(C&&!E)try{C.read(e,d,S)}catch(k){if(e.throwForMissingFeatures)throw k;Se(e,S())}else Se(e,S())})};y()>0;)_()});var f=d.layersGroup,h=d.layerGroupsEnabledId,m=n0(d,["layersGroup","layerGroupsEnabledId"]);Object.keys(m)&&(u.imageResources=m),rt(e,1,function(y){if(rt(e,2,function(I){Tl(e,u,d),Se(e,I())},void 0,e.large),y()>0){var _=Ml(e);_&&(u.globalLayerMaskInfo=_)}else Se(e,y());for(;y()>0;){for(;y()&&kl(e)===0;)Se(e,1);y()>=12?ka(e,u,u,d):Se(e,y())}},void 0,e.large);var w=u.children&&u.children.length,F=e.skipCompositeImageData&&(e.skipLayerImageData||w);return F||S0(e,u),u}z.readPsd=p0;function Tl(e,n,t){var r,i,a=t.layersGroup,o=a===void 0?[]:a,s=t.layerGroupsEnabledId,c=s===void 0?[]:s,l=Gt(e);l<0&&(e.globalAlpha=!0,l=-l);for(var u=[],d=[],f=0;f<l;f++){var h=v0(e,n,t),m=h.layer,w=h.channels;o[f]!==void 0&&(m.linkGroup=o[f]),c[f]!==void 0&&(m.linkGroupEnabled=!!c[f]),u.push(m),d.push(w)}if(!e.skipLayerImageData)for(var f=0;f<l;f++)y0(e,n,u[f],d[f]);n.children||(n.children=[]);for(var F=[n],f=u.length-1;f>=0;f--){var y=u[f],_=y.sectionDivider?y.sectionDivider.type:0;_===1||_===2?(y.opened=_===1,y.children=[],!((r=y.sectionDivider)===null||r===void 0)&&r.key&&(y.blendMode=(i=Ie.toBlendMode[y.sectionDivider.key])!==null&&i!==void 0?i:y.blendMode),F[F.length-1].children.unshift(y),F.push(y)):_===3?F.pop():F[F.length-1].children.unshift(y)}}z.readLayerInfo=Tl;function v0(e,n,t){var r={};r.top=Re(e),r.left=Re(e),r.bottom=Re(e),r.right=Re(e);for(var i=le(e),a=[],o=0;o<i;o++){var s=Gt(e),c=he(e);if(e.large){if(c!==0)throw new Error("Sizes larger than 4GB are not supported");c=he(e)}a.push({id:s,length:c})}Ca(e,"8BIM");var l=ir(e);if(!Ie.toBlendMode[l])throw new Error("Invalid blend mode: '".concat(l,"'"));r.blendMode=Ie.toBlendMode[l],r.opacity=ve(e)/255,r.clipping=ve(e)===1;var u=ve(e);return r.transparencyProtected=(u&1)!==0,r.hidden=(u&2)!==0,u&32&&(r.effectsOpen=!0),Se(e,1),rt(e,1,function(d){g0(e,r);var f=m0(e);for(f&&(r.blendingRanges=f),r.name=ti(e,1);d()>4&&!Dl(e,e.offset);)e.offset++;for(;d()>=12;)ka(e,r,n,t);Se(e,d())}),{layer:r,channels:a}}function g0(e,n){return rt(e,1,function(t){if(t()){var r={};n.mask=r,r.top=Re(e),r.left=Re(e),r.bottom=Re(e),r.right=Re(e),r.defaultColor=ve(e);var i=ve(e);if(r.positionRelativeToLayer=(i&1)!==0,r.disabled=(i&2)!==0,r.fromVectorData=(i&8)!==0,t()>=18){var a={};n.realMask=a;var o=ve(e);a.positionRelativeToLayer=(o&1)!==0,a.disabled=(o&2)!==0,a.fromVectorData=(o&8)!==0,a.defaultColor=ve(e),a.top=Re(e),a.left=Re(e),a.bottom=Re(e),a.right=Re(e)}if(i&16){var s=ve(e);s&1&&(r.userMaskDensity=ve(e)/255),s&2&&(r.userMaskFeather=_a(e)),s&4&&(r.vectorMaskDensity=ve(e)/255),s&8&&(r.vectorMaskFeather=_a(e))}Se(e,t())}})}function Jr(e){return[ve(e),ve(e),ve(e),ve(e)]}function m0(e){return rt(e,1,function(n){for(var t=Jr(e),r=Jr(e),i=[];n()>0;){var a=Jr(e),o=Jr(e);i.push({sourceRange:a,destRange:o})}return{compositeGrayBlendSource:t,compositeGraphBlendDestinationRange:r,ranges:i}})}function y0(e,n,t,r){var i,a,o,s,c=(t.right||0)-(t.left||0),l=(t.bottom||0)-(t.top||0),u=n.colorMode===4,d;if(c&&l)if(u){if(n.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");d={width:c,height:l,data:new Uint8ClampedArray(c*l*5)};for(var f=4;f<d.data.byteLength;f+=5)d.data[f]=255}else d=ei(c,l,(i=n.bitsPerChannel)!==null&&i!==void 0?i:8),(0,Ie.resetImageData)(d);Ie.RAW_IMAGE_DATA&&(t.imageDataRaw=[],t.imageDataRawCompression=[]);for(var h=0,m=r;h<m.length;h++){var w=m[h];if(w.length!==0){if(w.length<2)throw new Error("Invalid channel length");var F=e.offset,y=le(e);if(y>3&&(e.offset-=1,y=le(e)),y>3&&(e.offset-=3,y=le(e)),y>3)throw new Error("Invalid compression: ".concat(y));if(w.id===-2||w.id===-3){var _=w.id===-2?t.mask:t.realMask;if(!_)throw new Error("Missing layer ".concat(w.id===-2?"mask":"real mask"," data"));var I=(_.right||0)-(_.left||0),S=(_.bottom||0)-(_.top||0);if(I<0||S<0||I>3e4||S>3e4)throw new Error("Invalid mask size");if(I&&S){var C=ei(I,S,(a=n.bitsPerChannel)!==null&&a!==void 0?a:8);(0,Ie.resetImageData)(C);var E=e.offset;xa(e,w.length,C,y,I,S,(o=n.bitsPerChannel)!==null&&o!==void 0?o:8,0,e.large,4),Ie.RAW_IMAGE_DATA&&(w.id===-2?(t.maskDataRawCompression=y,t.maskDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+E,e.offset-E)):(t.realMaskDataRawCompression=y,t.realMaskDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+E,e.offset-E))),Qr(C),e.useImageData?_.imageData=C:_.canvas=(0,Ie.imageDataToCanvas)(C)}}else{var k=(0,Ie.offsetForChannel)(w.id,u),A=d;if(k<0&&(A=void 0,e.throwForMissingFeatures))throw new Error("Channel not supported: ".concat(w.id));xa(e,w.length,A,y,c,l,(s=n.bitsPerChannel)!==null&&s!==void 0?s:8,k,e.large,u?5:4),Ie.RAW_IMAGE_DATA&&(t.imageDataRawCompression[w.id]=y,t.imageDataRaw[w.id]=new Uint8Array(e.view.buffer,e.view.byteOffset+F+2,w.length-2)),e.offset=F+w.length,A&&n.colorMode===1&&Qr(A)}}}if(d){if(u){var L=d;d=(0,Ie.createImageData)(L.width,L.height),Ol(L,d,!1)}e.useImageData?t.imageData=d:t.canvas=(0,Ie.imageDataToCanvas)(d)}}function xa(e,n,t,r,i,a,o,s,c,l){if(r===0)Rl(e,t,i,a,o,l,s);else if(r===1)Vt(e,t,i,a,o,l,[s],c);else if(r===2)Fa(e,n,t,i,a,o,l,s,!1);else if(r===3)Fa(e,n,t,i,a,o,l,s,!0);else throw new Error("Invalid Compression type: ".concat(r))}z.readData=xa;function Ml(e){return rt(e,1,function(n){if(n()){var t=le(e),r=le(e),i=le(e),a=le(e),o=le(e),s=le(e)/255,c=ve(e);return Se(e,n()),{overlayColorSpace:t,colorSpace1:r,colorSpace2:i,colorSpace3:a,colorSpace4:o,opacity:s,kind:c}}})}z.readGlobalLayerMaskInfo=Ml;var b0=[0,1,-1,2,-2,3,-3,4,-4];function Ll(e,n){for(var t=e.offset,r="",i=0,a=b0;i<a.length;i++){var o=a[i];try{e.offset=t+o,r=ir(e)}catch{}if(n(r))break}if(!n(r))throw new Error("Invalid signature: '".concat(r,"' at 0x").concat(t.toString(16)));return r}function w0(e){return e==="8BIM"||e==="8B64"}function ka(e,n,t,r){var i=Ll(e,w0),a=ir(e),o=i==="8B64"||e.large&&Ie.largeAdditionalInfoKeys.indexOf(a)!==-1;rt(e,2,function(s){var c=i0.infoHandlersMap[a];if(c)try{c.read(e,n,s,t,r)}catch(l){if(e.throwForMissingFeatures)throw l}else e.logMissingFeatures&&e.log("Unhandled additional info: ".concat(a)),Se(e,s());s()&&(e.logMissingFeatures&&e.log("Unread ".concat(s()," bytes left for additional info: ").concat(a)),Se(e,s()))},!1,o)}z.readAdditionalLayerInfo=ka;function ei(e,n,t,r){if(r===void 0&&(r=4),t===1||t===8)return r===4?(0,Ie.createImageData)(e,n):{width:e,height:n,data:new Uint8ClampedArray(e*n*r)};if(t===16)return{width:e,height:n,data:new Uint16Array(e*n*r)};if(t===32)return{width:e,height:n,data:new Float32Array(e*n*r)};throw new Error("Invalid bitDepth (".concat(t,")"))}z.createImageDataBitDepth=ei;function S0(e,n){var t,r=le(e),i=(t=n.bitsPerChannel)!==null&&t!==void 0?t:8;if(z.supportedColorModes.indexOf(n.colorMode)===-1)throw new Error("Color mode not supported: ".concat(n.colorMode));if(r!==0&&r!==1)throw new Error("Compression type not supported: ".concat(r));var a=ei(n.width,n.height,i);switch((0,Ie.resetImageData)(a),n.colorMode){case 0:{if(i!==1)throw new Error("Invalid bitsPerChannel for bitmap color mode");var o=void 0;if(r===0)o=nn(e,Math.ceil(n.width/8)*n.height);else if(r===1)o=new Uint8Array(n.width*n.height),Vt(e,{data:o,width:n.width,height:n.height},n.width,n.height,8,1,[0],e.large);else throw new Error("Bitmap compression not supported: ".concat(r));(0,Ie.decodeBitmap)(o,a.data,n.width,n.height);break}case 3:case 1:{var s=n.colorMode===1?[0]:[0,1,2];if(n.channels&&n.channels>3)for(var c=3;c<n.channels;c++)s.push(c);else e.globalAlpha&&s.push(3);if(r===0)for(var c=0;c<s.length;c++)Rl(e,a,n.width,n.height,i,4,s[c]);else if(r===1){var l=e.offset;Vt(e,a,n.width,n.height,i,4,s,e.large),Ie.RAW_IMAGE_DATA&&(n.imageDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+l,e.offset-l))}n.colorMode===1&&Qr(a);break}case 2:{if(i!==8)throw new Error("bitsPerChannel Not supproted");if(n.channels!==1)throw new Error("Invalid channel count");if(!n.palette)throw new Error("Missing color palette");if(r===0)throw new Error("Not implemented");if(r===1){var u={width:a.width,height:a.height,data:new Uint8Array(a.width*a.height)};Vt(e,u,n.width,n.height,i,1,[0],e.large),_0(u,a,n.palette)}else throw new Error("Not implemented");break}case 4:{if(i!==8)throw new Error("bitsPerChannel Not supproted");if(n.channels!==4)throw new Error("Invalid channel count");var s=[0,1,2,3];if(e.globalAlpha&&s.push(4),r===0)throw new Error("Not implemented");if(r===1){var d={width:a.width,height:a.height,data:new Uint8Array(a.width*a.height*5)},l=e.offset;Vt(e,d,n.width,n.height,i,5,s,e.large),Ol(d,a,!0),Ie.RAW_IMAGE_DATA&&(n.imageDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+l,e.offset-l))}else throw new Error("Not implemented");break}default:throw new Error("Color mode not supported: ".concat(n.colorMode))}if(e.globalAlpha){if(n.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");for(var f=a.data,h=a.width*a.height*4,c=0;c<h;c+=4){var m=f[c+3];if(m!=0&&m!=255){var w=m/255,F=1/w,y=255*(1-F);f[c+0]=f[c+0]*F+y,f[c+1]=f[c+1]*F+y,f[c+2]=f[c+2]*F+y}}}e.useImageData?n.imageData=a:n.canvas=(0,Ie.imageDataToCanvas)(a)}function Ol(e,n,t){for(var r=n.width*n.height*4,i=e.data,a=n.data,o=0,s=0;s<r;o+=5,s+=4){var c=i[o],l=i[o+1],u=i[o+2],d=i[o+3];a[s]=(c*d|0)/255|0,a[s+1]=(l*d|0)/255|0,a[s+2]=(u*d|0)/255|0,a[s+3]=t?255-i[o+4]:i[o+4]}}function _0(e,n,t){for(var r=e.width*e.height,i=e.data,a=n.data,o=0,s=0;o<r;o++,s+=4){var c=t[i[o]];a[s+0]=c.r,a[s+1]=c.g,a[s+2]=c.b,a[s+3]=255}}function x0(e,n){if(e.byteLength/e.length!==n.byteLength/n.length)throw new Error("Invalid array types")}function Bl(e,n){if(n===8)return e;if(n===16)if(e.byteOffset%2){var t=new Uint16Array(e.byteLength/2);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(e),t}else return new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);else if(n===32)if(e.byteOffset%4){var t=new Float32Array(e.byteLength/4);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(e),t}else return new Float32Array(e.buffer,e.byteOffset,e.byteLength/4);else throw new Error("Invalid bitDepth (".concat(n,")"))}function Ia(e,n,t,r){x0(e.data,n);for(var i=e.width*e.height,a=e.data,o=0,s=t|0;o<i;o++,s=s+r|0)a[s]=n[o]}function Rl(e,n,t,r,i,a,o){var s=nn(e,t*r*Math.floor(i/8));if(i==32)for(var c=0;c<s.byteLength;c+=4){var l=s[c+0],u=s[c+1],d=s[c+2],f=s[c+3];s[c+0]=f,s[c+1]=d,s[c+2]=u,s[c+3]=l}var h=Bl(s,i);n&&o<a&&Ia(n,h,o,a)}function Sa(e,n,t,r){for(var i=0;i<t;i++)for(var a=i*n,o=1,s=a+1;o<n;o++,s++)e[s]=(e[s-1]+e[s])%r}function Fa(e,n,t,r,i,a,o,s,c){var l=nn(e,n),u=(0,r0.inflate)(l);if(t&&s<o){var d=Bl(u,a);if(a===8)c&&Sa(u,r,i,256),Ia(t,u,s,o);else if(a===16)c&&Sa(d,r,i,65536),Ia(t,d,s,o);else if(a===32){c&&Sa(u,r*4,i,256);for(var f=s,h=new Uint32Array(t.data.buffer,t.data.byteOffset,t.data.length),m=0;m<i;m++)for(var w=r*4*m,F=0;F<r;F++,w++,f+=o){var y=w+r,_=y+r,I=_+r;h[f]=(u[w]<<24|u[y]<<16|u[_]<<8|u[I])>>>0}}else throw new Error("Invalid bitDepth")}}z.readDataZip=Fa;function Vt(e,n,t,r,i,a,o,s){var c=n&&n.data,l;if(s){l=new Uint32Array(o.length*r);for(var u=0,d=0;u<o.length;u++)for(var f=0;f<r;f++,d++)l[d]=he(e)}else{l=new Uint16Array(o.length*r);for(var u=0,d=0;u<o.length;u++)for(var f=0;f<r;f++,d++)l[d]=le(e)}if(i!==1&&i!==8)throw new Error("Invalid bit depth (".concat(i,")"));for(var h=a-1|0,m=0,d=0;m<o.length;m++){var w=o[m]|0,F=m>h||w>h;if(!c||F)for(var f=0;f<r;f++,d++)Se(e,l[d]);else for(var f=0,y=w|0;f<r;f++,d++)for(var _=l[d],I=nn(e,_),S=0,C=0;S<_;S++){var E=I[S];if(E>128){var k=I[++S];E=256-E|0;for(var A=0;A<=E&&C<t;A=A+1|0,C=C+1|0)c[y]=k,y=y+a|0}else if(E<128)for(var A=0;A<=E&&C<t;A=A+1|0,C=C+1|0)c[y]=I[++S],y=y+a|0}}}z.readDataRLE=Vt;function rt(e,n,t,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1);var a=he(e);if(i){if(a!==0)throw new Error("Sizes larger than 4GB are not supported");a=he(e)}if(!(a<=0&&r)){var o=e.offset+a;if(o>e.view.byteLength)throw new Error("Section exceeds file size");var s=t(function(){return o-e.offset});for(e.offset!==o&&(e.offset>o?$r(e,"Exceeded section limits"):$r(e,"Unread section data"));a%n;)a++,o++;return e.offset=o,s}}z.readSection=rt;function I0(e){var n=le(e);switch(n){case 0:{var t=le(e)/257,r=le(e)/257,i=le(e)/257;return Se(e,2),{r:t,g:r,b:i}}case 1:{var a=le(e)/65535,o=le(e)/65535,i=le(e)/65535;return Se(e,2),{h:a,s:o,b:i}}case 2:{var s=le(e)/257,c=le(e)/257,l=le(e)/257,u=le(e)/257;return{c:s,m:c,y:l,k:u}}case 7:{var d=Gt(e)/1e4,f=Gt(e),h=Gt(e),m=f<0?f/12800:f/12700,i=h<0?h/12800:h/12700;return Se(e,2),{l:d,a:m,b:i}}case 8:{var u=le(e)*255/1e4;return Se(e,6),{k:u}}default:throw new Error("Invalid color space")}}z.readColor=I0;function F0(e){he(e);var n=he(e);if(n!==1)throw new Error("Invalid pattern version: ".concat(n));var t=he(e),r=Gt(e),i=Gt(e);if(t!==3&&t!==1&&t!==2)throw new Error("Unsupported pattern color mode: ".concat(t));var a=El(e),o=ti(e,1),s=[];if(t===2){for(var c=0;c<256;c++)s.push({r:ve(e),g:ve(e),b:ve(e)});Se(e,4)}var l=he(e);if(l!==3)throw new Error("Invalid pattern VMAL version: ".concat(l));he(e);for(var u=he(e),d=he(e),f=he(e),h=he(e),m=he(e),w=h-d,F=f-u,y=new Uint8Array(w*F*4),c=3;c<y.byteLength;c+=4)y[c]=255;for(var c=0,_=0;c<m+2;c++){var I=he(e);if(I){var S=he(e),C=he(e),E=he(e),k=he(e),A=he(e),L=he(e),T=le(e),O=ve(e),W=S-23,D=nn(e,W);if(C!==8||T!==8)throw new Error("16bit pixel depth not supported for patterns");var B=L-k,H=A-E,M=k-d,q=E-u;if(O===0){if(t===3&&_<3)for(var se=0;se<H;se++)for(var pe=0;pe<B;pe++){var Y=pe+se*B,ge=(M+pe+(se+q)*w)*4;y[ge+_]=D[Y]}if(t===1&&_<1)for(var Te=0;Te<H;Te++)for(var Ve=0;Ve<B;Ve++){var Y=Ve+Te*B,ge=(M+Ve+(Te+q)*w)*4,$=D[Y];y[ge+0]=$,y[ge+1]=$,y[ge+2]=$}if(t===2)throw new Error("Indexed pattern color mode not implemented")}else if(O===1){var K={data:y,width:w,height:F},fe={data:new Uint8Array(B*H),width:B,height:H},be=Cl(D.buffer,D.byteOffset,D.byteLength);if(t===3&&_<3&&(Vt(be,fe,B,H,8,1,[0],!1),Fl(fe,K,M,q,_)),t===1&&_<1&&(Vt(be,fe,B,H,8,1,[0],!1),Fl(fe,K,M,q,0),Qr(K)),t===2)throw new Error("Indexed pattern color mode not implemented")}else throw new Error("Invalid pattern compression mode");_++}}return{id:o,name:a,x:r,y:i,bounds:{x:d,y:u,w,h:F},data:y}}z.readPattern=F0;function Fl(e,n,t,r,i){for(var a=e.width,o=e.height,s=n.width,c=0;c<o;c++)for(var l=0;l<a;l++){var u=l+c*a,d=(t+l+(c+r)*s)*4,f=e.data[u];n.data[d+i]=f}}});var Gl=oe(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.writeEffects=kn.readEffects=void 0;var Nl=zt(),Z=Nt(),G=Sn(),Vl=[void 0,"outer bevel","inner bevel","emboss","pillow emboss","stroke emboss"];function xn(e){return(0,Z.checkSignature)(e,"8BIM"),Nl.toBlendMode[(0,Z.readSignature)(e)]||"normal"}function Fn(e,n){(0,G.writeSignature)(e,"8BIM"),(0,G.writeSignature)(e,Nl.fromBlendMode[n]||"norm")}function In(e){return(0,Z.readUint8)(e)/255}function Cn(e,n){(0,G.writeUint8)(e,Math.round(n*255)|0)}function C0(e){var n=(0,Z.readUint16)(e);if(n!==0)throw new Error("Invalid effects layer version: ".concat(n));for(var t=(0,Z.readUint16)(e),r={},i=0;i<t;i++){(0,Z.checkSignature)(e,"8BIM");var a=(0,Z.readSignature)(e);switch(a){case"cmnS":{var o=(0,Z.readUint32)(e),s=(0,Z.readUint32)(e),c=!!(0,Z.readUint8)(e);if((0,Z.skipBytes)(e,2),o!==7||s!==0||!c)throw new Error("Invalid effects common state");break}case"dsdw":case"isdw":{var l=(0,Z.readUint32)(e),u=(0,Z.readUint32)(e);if(l!==41&&l!==51)throw new Error("Invalid shadow size: ".concat(l));if(u!==0&&u!==2)throw new Error("Invalid shadow version: ".concat(u));var o=(0,Z.readFixedPoint32)(e);(0,Z.readFixedPoint32)(e);var d=(0,Z.readFixedPoint32)(e),f=(0,Z.readFixedPoint32)(e),h=(0,Z.readColor)(e),m=xn(e),w=!!(0,Z.readUint8)(e),F=!!(0,Z.readUint8)(e),y=In(e);l>=51&&(0,Z.readColor)(e);var _={size:{units:"Pixels",value:o},distance:{units:"Pixels",value:f},angle:d,color:h,blendMode:m,enabled:w,useGlobalLight:F,opacity:y};a==="dsdw"?r.dropShadow=[_]:r.innerShadow=[_];break}case"oglw":{var l=(0,Z.readUint32)(e),I=(0,Z.readUint32)(e);if(l!==32&&l!==42)throw new Error("Invalid outer glow size: ".concat(l));if(I!==0&&I!==2)throw new Error("Invalid outer glow version: ".concat(I));var o=(0,Z.readFixedPoint32)(e);(0,Z.readFixedPoint32)(e);var h=(0,Z.readColor)(e),m=xn(e),w=!!(0,Z.readUint8)(e),y=In(e);l>=42&&(0,Z.readColor)(e),r.outerGlow={size:{units:"Pixels",value:o},color:h,blendMode:m,enabled:w,opacity:y};break}case"iglw":{var l=(0,Z.readUint32)(e),S=(0,Z.readUint32)(e);if(l!==32&&l!==43)throw new Error("Invalid inner glow size: ".concat(l));if(S!==0&&S!==2)throw new Error("Invalid inner glow version: ".concat(S));var o=(0,Z.readFixedPoint32)(e);(0,Z.readFixedPoint32)(e);var h=(0,Z.readColor)(e),m=xn(e),w=!!(0,Z.readUint8)(e),y=In(e);l>=43&&((0,Z.readUint8)(e),(0,Z.readColor)(e)),r.innerGlow={size:{units:"Pixels",value:o},color:h,blendMode:m,enabled:w,opacity:y};break}case"bevl":{var l=(0,Z.readUint32)(e),C=(0,Z.readUint32)(e);if(l!==58&&l!==78)throw new Error("Invalid bevel size: ".concat(l));if(C!==0&&C!==2)throw new Error("Invalid bevel version: ".concat(C));var d=(0,Z.readFixedPoint32)(e),E=(0,Z.readFixedPoint32)(e),o=(0,Z.readFixedPoint32)(e),k=xn(e),A=xn(e),L=(0,Z.readColor)(e),T=(0,Z.readColor)(e),O=Vl[(0,Z.readUint8)(e)]||"inner bevel",W=In(e),D=In(e),w=!!(0,Z.readUint8)(e),F=!!(0,Z.readUint8)(e),B=(0,Z.readUint8)(e)?"down":"up";l>=78&&((0,Z.readColor)(e),(0,Z.readColor)(e)),r.bevel={size:{units:"Pixels",value:o},angle:d,strength:E,highlightBlendMode:k,shadowBlendMode:A,highlightColor:L,shadowColor:T,style:O,highlightOpacity:W,shadowOpacity:D,enabled:w,useGlobalLight:F,direction:B};break}case"sofi":{var o=(0,Z.readUint32)(e),H=(0,Z.readUint32)(e);if(o!==34)throw new Error("Invalid effects solid fill info size: ".concat(o));if(H!==2)throw new Error("Invalid effects solid fill info version: ".concat(H));var m=xn(e),h=(0,Z.readColor)(e),y=In(e),w=!!(0,Z.readUint8)(e);(0,Z.readColor)(e),r.solidFill=[{blendMode:m,color:h,opacity:y,enabled:w}];break}default:throw new Error("Invalid effect type: '".concat(a,"'"))}}return r}kn.readEffects=C0;function zl(e,n){var t;(0,G.writeUint32)(e,51),(0,G.writeUint32)(e,2),(0,G.writeFixedPoint32)(e,n.size&&n.size.value||0),(0,G.writeFixedPoint32)(e,0),(0,G.writeFixedPoint32)(e,n.angle||0),(0,G.writeFixedPoint32)(e,n.distance&&n.distance.value||0),(0,G.writeColor)(e,n.color),Fn(e,n.blendMode),(0,G.writeUint8)(e,n.enabled?1:0),(0,G.writeUint8)(e,n.useGlobalLight?1:0),Cn(e,(t=n.opacity)!==null&&t!==void 0?t:1),(0,G.writeColor)(e,n.color)}function k0(e,n){var t,r,i,a,o,s,c=(t=n.dropShadow)===null||t===void 0?void 0:t[0],l=(r=n.innerShadow)===null||r===void 0?void 0:r[0],u=n.outerGlow,d=n.innerGlow,f=n.bevel,h=(i=n.solidFill)===null||i===void 0?void 0:i[0],m=1;if(c&&m++,l&&m++,u&&m++,d&&m++,f&&m++,h&&m++,(0,G.writeUint16)(e,0),(0,G.writeUint16)(e,m),(0,G.writeSignature)(e,"8BIM"),(0,G.writeSignature)(e,"cmnS"),(0,G.writeUint32)(e,7),(0,G.writeUint32)(e,0),(0,G.writeUint8)(e,1),(0,G.writeZeros)(e,2),c&&((0,G.writeSignature)(e,"8BIM"),(0,G.writeSignature)(e,"dsdw"),zl(e,c)),l&&((0,G.writeSignature)(e,"8BIM"),(0,G.writeSignature)(e,"isdw"),zl(e,l)),u&&((0,G.writeSignature)(e,"8BIM"),(0,G.writeSignature)(e,"oglw"),(0,G.writeUint32)(e,42),(0,G.writeUint32)(e,2),(0,G.writeFixedPoint32)(e,((a=u.size)===null||a===void 0?void 0:a.value)||0),(0,G.writeFixedPoint32)(e,0),(0,G.writeColor)(e,u.color),Fn(e,u.blendMode),(0,G.writeUint8)(e,u.enabled?1:0),Cn(e,u.opacity||0),(0,G.writeColor)(e,u.color)),d&&((0,G.writeSignature)(e,"8BIM"),(0,G.writeSignature)(e,"iglw"),(0,G.writeUint32)(e,43),(0,G.writeUint32)(e,2),(0,G.writeFixedPoint32)(e,((o=d.size)===null||o===void 0?void 0:o.value)||0),(0,G.writeFixedPoint32)(e,0),(0,G.writeColor)(e,d.color),Fn(e,d.blendMode),(0,G.writeUint8)(e,d.enabled?1:0),Cn(e,d.opacity||0),(0,G.writeUint8)(e,0),(0,G.writeColor)(e,d.color)),f){(0,G.writeSignature)(e,"8BIM"),(0,G.writeSignature)(e,"bevl"),(0,G.writeUint32)(e,78),(0,G.writeUint32)(e,2),(0,G.writeFixedPoint32)(e,f.angle||0),(0,G.writeFixedPoint32)(e,f.strength||0),(0,G.writeFixedPoint32)(e,((s=f.size)===null||s===void 0?void 0:s.value)||0),Fn(e,f.highlightBlendMode),Fn(e,f.shadowBlendMode),(0,G.writeColor)(e,f.highlightColor),(0,G.writeColor)(e,f.shadowColor);var w=Vl.indexOf(f.style);(0,G.writeUint8)(e,w<=0?1:w),Cn(e,f.highlightOpacity||0),Cn(e,f.shadowOpacity||0),(0,G.writeUint8)(e,f.enabled?1:0),(0,G.writeUint8)(e,f.useGlobalLight?1:0),(0,G.writeUint8)(e,f.direction==="down"?1:0),(0,G.writeColor)(e,f.highlightColor),(0,G.writeColor)(e,f.shadowColor)}h&&((0,G.writeSignature)(e,"8BIM"),(0,G.writeSignature)(e,"sofi"),(0,G.writeUint32)(e,34),(0,G.writeUint32)(e,2),Fn(e,h.blendMode),(0,G.writeColor)(e,h.color),Cn(e,h.opacity||0),(0,G.writeUint8)(e,h.enabled?1:0),(0,G.writeColor)(e,h.color))}kn.writeEffects=k0});var Wl=oe(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.serializeEngineData=An.parseEngineData=void 0;function Hl(e){return e===32||e===10||e===13||e===9}function jl(e){return e>=48&&e<=57||e===46||e===45}function A0(e){var n=0;function t(){for(;n<e.length&&Hl(e[n]);)n++}function r(){var _=e[n];return n++,_===92&&(_=e[n],n++),_}function i(){var _="";if(e[n]===41)return n++,_;if(e[n]!==254||e[n+1]!==255)throw new Error("Invalid utf-16 BOM");for(n+=2;n<e.length&&e[n]!==41;){var I=r(),S=r(),C=I<<8|S;_+=String.fromCharCode(C)}return n++,_}var a=null,o=[];function s(_){o.length?(c(_),o.push(_)):(o.push(_),a=_)}function c(_){if(!o.length)throw new Error("Invalid data");var I=o[o.length-1];if(typeof I=="string")o[o.length-2][I]=_,u();else if(Array.isArray(I))I.push(_);else throw new Error("Invalid data")}function l(_){o.length||s({});var I=o[o.length-1];if(I&&typeof I=="string")c(_==="nil"?null:"/".concat(_));else if(I&&typeof I=="object")o.push(_);else throw new Error("Invalid data")}function u(){if(!o.length)throw new Error("Invalid data");o.pop()}t();for(var d=e.length;d>0&&e[d-1]===0;)d--;for(;n<d;){var f=n,h=e[f];if(h===60&&e[f+1]===60)n+=2,s({});else if(h===62&&e[f+1]===62)n+=2,u();else if(h===47){n+=1;for(var m=n;n<e.length&&!Hl(e[n]);)n++;for(var w="",F=m;F<n;F++)w+=String.fromCharCode(e[F]);l(w)}else if(h===40)n+=1,c(i());else if(h===91)n+=1,s([]);else if(h===93)n+=1,u();else if(h===110&&e[f+1]===117&&e[f+2]===108&&e[f+3]===108)n+=4,c(null);else if(h===116&&e[f+1]===114&&e[f+2]===117&&e[f+3]===101)n+=4,c(!0);else if(h===102&&e[f+1]===97&&e[f+2]===108&&e[f+3]===115&&e[f+4]===101)n+=5,c(!1);else if(jl(h)){for(var y="";n<e.length&&jl(e[n]);)y+=String.fromCharCode(e[n]),n++;c(parseFloat(y))}else n+=1,console.log("Invalid token '".concat(String.fromCharCode(h),"' (").concat(h,") at ").concat(n));t()}return a}An.parseEngineData=A0;var D0=["Axis","XY","Zone","WordSpacing","FirstLineIndent","GlyphSpacing","StartIndent","EndIndent","SpaceBefore","SpaceAfter","LetterSpacing","Values","GridSize","GridLeading","PointBase","BoxBounds","TransformPoint0","TransformPoint1","TransformPoint2","FontSize","Leading","HorizontalScale","VerticalScale","BaselineShift","Tsume","OutlineWidth","AutoLeading"],E0=["RunLengthArray"];function U0(e,n){n===void 0&&(n=!1);var t=new Uint8Array(1024),r=0,i=0;function a(_){if(r>=t.length){var I=new Uint8Array(t.length*2);I.set(t),t=I}t[r]=_,r++}function o(_){for(var I=0;I<_.length;I++)a(_.charCodeAt(I))}function s(){if(n)o(" ");else for(var _=0;_<i;_++)o("	")}function c(_,I){s(),o("/".concat(_)),m(I,_,!0),n||o(`
`)}function l(_){return _.toString()}function u(_){return _.toFixed(5).replace(/(\d)0+$/g,"$1").replace(/^0+\.([1-9])/g,".$1").replace(/^-0+\.0(\d)/g,"-.0$1")}function d(_,I){var S=I&&D0.indexOf(I)!==-1||(_|0)!==_;return S?u(_):l(_)}function f(_){var I=Object.keys(_);return I.indexOf("98")!==-1&&I.unshift.apply(I,I.splice(I.indexOf("99"),1)),I.indexOf("99")!==-1&&I.unshift.apply(I,I.splice(I.indexOf("99"),1)),I}function h(_){(_===40||_===41||_===92)&&a(92),a(_)}function m(_,I,S){S===void 0&&(S=!1);function C(){S?o(" "):s()}if(_===null)C(),o(n?"/nil":"null");else if(typeof _=="number")C(),o(d(_,I));else if(typeof _=="boolean")C(),o(_?"true":"false");else if(typeof _=="string")if(C(),(I==="99"||I==="98")&&_.charAt(0)==="/")o(_);else{o("("),a(254),a(255);for(var E=0;E<_.length;E++){var k=_.charCodeAt(E);h(k>>8&255),h(k&255)}o(")")}else if(Array.isArray(_))if(C(),_.every(function(q){return typeof q=="number"})){o("[");for(var A=E0.indexOf(I)!==-1,L=0,T=_;L<T.length;L++){var O=T[L];o(" "),o(A?d(O):u(O))}o(" ]")}else{o("["),n||o(`
`);for(var W=0,D=_;W<D.length;W++){var O=D[W];m(O,I),n||o(`
`)}s(),o("]")}else if(typeof _=="object"){S&&!n&&o(`
`),s(),o("<<"),n||o(`
`),i++;for(var B=0,H=f(_);B<H.length;B++){var M=H[B];c(M,_[M])}i--,s(),o(">>")}}if(n){if(typeof e=="object")for(var w=0,F=f(e);w<F.length;w++){var y=F[w];c(y,e[y])}}else o(`

`),m(e);return t.slice(0,r)}An.serializeEngineData=U0});var tc=oe(Ht=>{"use strict";var xe=Ht&&Ht.__assign||function(){return xe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xe.apply(this,arguments)};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.encodeEngineData=Ht.decodeEngineData=void 0;var Yl={name:"MyriadPro-Regular",script:0,type:0,synthetic:0},ri={justification:"left",firstLineIndent:0,startIndent:0,endIndent:0,spaceBefore:0,spaceAfter:0,autoHyphenate:!0,hyphenatedWordSize:6,preHyphen:2,postHyphen:2,consecutiveHyphens:8,zone:36,wordSpacing:[.8,1,1.33],letterSpacing:[0,0,0],glyphSpacing:[1,1,1],autoLeading:1.2,leadingType:0,hanging:!1,burasagari:!1,kinsokuOrder:0,everyLineComposer:!1},P0={font:Yl,fontSize:12,fauxBold:!1,fauxItalic:!1,autoLeading:!0,leading:0,horizontalScale:1,verticalScale:1,tracking:0,autoKerning:!0,kerning:0,baselineShift:0,fontCaps:0,fontBaseline:0,underline:!1,strikethrough:!1,ligatures:!0,dLigatures:!1,baselineDirection:2,tsume:0,styleRunAlignment:2,language:0,noBreak:!1,fillColor:{r:0,g:0,b:0},strokeColor:{r:0,g:0,b:0},fillFlag:!0,strokeFlag:!1,fillFirst:!0,yUnderline:1,outlineWidth:1,characterDirection:0,hindiNumbers:!1,kashida:1,diacriticPos:2},T0={isOn:!1,show:!1,size:18,leading:22,color:{r:0,g:0,b:255},leadingFillColor:{r:0,g:0,b:255},alignLineHeightToGridFlags:!1},Ea=["justification","firstLineIndent","startIndent","endIndent","spaceBefore","spaceAfter","autoHyphenate","hyphenatedWordSize","preHyphen","postHyphen","consecutiveHyphens","zone","wordSpacing","letterSpacing","glyphSpacing","autoLeading","leadingType","hanging","burasagari","kinsokuOrder","everyLineComposer"],Ua=["font","fontSize","fauxBold","fauxItalic","autoLeading","leading","horizontalScale","verticalScale","tracking","autoKerning","kerning","baselineShift","fontCaps","fontBaseline","underline","strikethrough","ligatures","dLigatures","baselineDirection","tsume","styleRunAlignment","language","noBreak","fillColor","strokeColor","fillFlag","strokeFlag","fillFirst","yUnderline","outlineWidth","characterDirection","hindiNumbers","kashida","diacriticPos"],Kl=["none","crisp","strong","smooth","sharp"],Jl=["left","right","center","justify-left","justify-right","justify-center","justify-all"];function Ql(e){return e.substring(0,1).toUpperCase()+e.substring(1)}function M0(e){var n=e.Values;switch(e.Type){case 0:return{k:n[1]*255};case 1:return n[0]===1?{r:n[1]*255,g:n[2]*255,b:n[3]*255}:{r:n[1]*255,g:n[2]*255,b:n[3]*255,a:n[0]*255};case 2:return{c:n[1]*255,m:n[2]*255,y:n[3]*255,k:n[4]*255};default:throw new Error("Unknown color type in text layer")}}function Da(e){if(e){if("r"in e)return{Type:1,Values:["a"in e?e.a/255:1,e.r/255,e.g/255,e.b/255]};if("c"in e)return{Type:2,Values:[1,e.c/255,e.m/255,e.y/255,e.k/255]};if("k"in e)return{Type:0,Values:[1,e.k/255]};throw new Error("Invalid color type in text layer")}else return{Type:1,Values:[0,0,0,0]}}function Zl(e,n){if(!e||!n||e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function Xl(e,n){if(!e||!n)return!1;for(var t=0,r=Object.keys(e);t<r.length;t++){var i=r[t];if(e[i]!==n[i])return!1}for(var a=0,o=Object.keys(n);a<o.length;a++){var i=o[a];if(e[i]!==n[i])return!1}return!0}function L0(e,n){for(var t=0;t<e.length;t++)if(e[t].name===n.name)return t;return e.push(n),e.length-1}function $l(e,n,t){for(var r={},i=0,a=n;i<a.length;i++){var o=a[i],s=Ql(o);e[s]!==void 0&&(o==="justification"?r[o]=Jl[e[s]]:o==="font"?r[o]=t[e[s]]:o==="fillColor"||o==="strokeColor"?r[o]=M0(e[s]):r[o]=e[s])}return r}function ec(e,n,t){for(var r,i={},a=0,o=n;a<o.length;a++){var s=o[a],c=Ql(s);e[s]!==void 0&&(s==="justification"?i[c]=Jl.indexOf((r=e[s])!==null&&r!==void 0?r:"left"):s==="font"?i[c]=L0(t,e[s]):s==="fillColor"||s==="strokeColor"?i[c]=Da(e[s]):i[c]=e[s])}return i}function O0(e,n){return $l(e,Ea,n)}function B0(e,n){return $l(e,Ua,n)}function ii(e,n){return ec(e,Ea,n)}function Aa(e,n){return ec(e,Ua,n)}function ql(e,n,t){if(n.length){for(var r=function(s){var c=n[0].style[s];if(c!==void 0){var l=!1;Array.isArray(c)?l=n.every(function(w){return Zl(w.style[s],c)}):typeof c=="object"?l=n.every(function(w){return Xl(w.style[s],c)}):l=n.every(function(w){return w.style[s]===c}),l&&(e[s]=c)}var u=e[s];if(u!==void 0)for(var d=0,f=n;d<f.length;d++){var h=f[d],m=!1;Array.isArray(c)?m=Zl(h.style[s],c):typeof c=="object"?m=Xl(h.style[s],c):m=h.style[s]===c,m&&delete h.style[s]}},i=0,a=t;i<a.length;i++){var o=a[i];r(o)}n.every(function(s){return Object.keys(s.style).length===0})&&(n.length=0)}}function R0(e){for(var n,t,r,i,a,o,s=e.EngineDict,c=e.ResourceDict,l=c.FontSet.map(function(E){return{name:E.Name,script:E.Script,type:E.FontType,synthetic:E.Synthetic}}),u=s.Editor.Text.replace(/\r/g,`
`),d=0;/\n$/.test(u);)u=u.substring(0,u.length-1),d++;var f={text:u,antiAlias:(n=Kl[s.AntiAlias])!==null&&n!==void 0?n:"smooth",useFractionalGlyphWidths:!!s.UseFractionalGlyphWidths,superscriptSize:c.SuperscriptSize,superscriptPosition:c.SuperscriptPosition,subscriptSize:c.SubscriptSize,subscriptPosition:c.SubscriptPosition,smallCapSize:c.SmallCapSize},h=(o=(a=(i=(r=(t=s.Rendered)===null||t===void 0?void 0:t.Shapes)===null||r===void 0?void 0:r.Children)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.Cookie)===null||o===void 0?void 0:o.Photoshop;h&&(f.shapeType=h.ShapeType===1?"box":"point",h.PointBase&&(f.pointBase=h.PointBase),h.BoxBounds&&(f.boxBounds=h.BoxBounds));var m=s.ParagraphRun;f.paragraphStyle={},f.paragraphStyleRuns=[];for(var w=0;w<m.RunArray.length;w++){var F=m.RunArray[w],y=m.RunLengthArray[w],_=O0(F.ParagraphSheet.Properties,l);f.paragraphStyleRuns.push({length:y,style:_})}for(var I=d;f.paragraphStyleRuns.length&&I>0;I--)--f.paragraphStyleRuns[f.paragraphStyleRuns.length-1].length===0&&f.paragraphStyleRuns.pop();ql(f.paragraphStyle,f.paragraphStyleRuns,Ea),f.paragraphStyleRuns.length||delete f.paragraphStyleRuns;var S=s.StyleRun;f.style={},f.styleRuns=[];for(var w=0;w<S.RunArray.length;w++){var C=S.RunLengthArray[w],_=B0(S.RunArray[w].StyleSheet.StyleSheetData,l);_.font||(_.font=l[0]),f.styleRuns.push({length:C,style:_})}for(var I=d;f.styleRuns.length&&I>0;I--)--f.styleRuns[f.styleRuns.length-1].length===0&&f.styleRuns.pop();return ql(f.style,f.styleRuns,Ua),f.styleRuns.length||delete f.styleRuns,f}Ht.decodeEngineData=R0;function z0(e){var n,t,r,i,a,o,s,c,l,u,d,f,h="".concat((e.text||"").replace(/\r?\n/g,"\r"),"\r"),m=[{name:"AdobeInvisFont",script:0,type:0,synthetic:0}],w=((n=e.style)===null||n===void 0?void 0:n.font)||((r=(t=e.styleRuns)===null||t===void 0?void 0:t.find(function(K){return K.style.font}))===null||r===void 0?void 0:r.style.font)||Yl,F=[],y=[],_=e.paragraphStyleRuns;if(_&&_.length){for(var I=h.length,S=0,C=_;S<C.length;S++){var E=C[S],k=Math.min(E.length,I);I-=k,k&&(I===1&&E===_[_.length-1]&&(k++,I--),y.push(k),F.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:ii(xe(xe(xe({},ri),e.paragraphStyle),E.style),m)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}I&&(y.push(I),F.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:ii(xe(xe({},ri),e.paragraphStyle),m)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}else for(var A=0,L=0;A<h.length;A++)h.charCodeAt(A)===13&&(y.push(A-L+1),F.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:ii(xe(xe({},ri),e.paragraphStyle),m)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}),L=A+1);for(var T=Aa(xe(xe({},P0),{font:w}),m),O=e.styleRuns||[{length:h.length,style:e.style||{}}],W=[],D=[],B=h.length,H=0,M=O;H<M.length;H++){var q=M[H],k=Math.min(q.length,B);B-=k,k&&(B===1&&q===O[O.length-1]&&(k++,B--),D.push(k),W.push({StyleSheet:{StyleSheetData:Aa(xe(xe({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),q.style),m)}}))}B&&O.length&&(D.push(B),W.push({StyleSheet:{StyleSheetData:Aa(xe({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),m)}}));var se=xe(xe({},T0),e.gridInfo),pe=e.orientation==="vertical"?2:0,Y=e.orientation==="vertical"?1:0,ge=e.shapeType==="box"?1:0,Te={ShapeType:ge};ge===0?Te.PointBase=e.pointBase||[0,0]:Te.BoxBounds=e.boxBounds||[0,0,0,0],Te.Base={ShapeType:ge,TransformPoint0:[1,0],TransformPoint1:[0,1],TransformPoint2:[0,0]};var Ve={KinsokuSet:[{Name:"PhotoshopKinsokuHard",NoStart:"\u3001\u3002\uFF0C\uFF0E\u30FB\uFF1A\uFF1B\uFF1F\uFF01\u30FC\u2015\u2019\u201D\uFF09\u3015\uFF3D\uFF5D\u3009\u300B\u300D\u300F\u3011\u30FD\u30FE\u309D\u309E\u3005\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u309B\u309C?!)]},.:;\u2103\u2109\xA2\uFF05\u2030",NoEnd:"\u2018\u201C\uFF08\u3014\uFF3B\uFF5B\u3008\u300A\u300C\u300E\u3010([{\uFFE5\uFF04\xA3\uFF20\xA7\u3012\uFF03",Keep:"\u2015\u2025",Hanging:"\u3001\u3002.,"},{Name:"PhotoshopKinsokuSoft",NoStart:"\u3001\u3002\uFF0C\uFF0E\u30FB\uFF1A\uFF1B\uFF1F\uFF01\u2019\u201D\uFF09\u3015\uFF3D\uFF5D\u3009\u300B\u300D\u300F\u3011\u30FD\u30FE\u309D\u309E\u3005",NoEnd:"\u2018\u201C\uFF08\u3014\uFF3B\uFF5B\u3008\u300A\u300C\u300E\u3010",Keep:"\u2015\u2025",Hanging:"\u3001\u3002.,"}],MojiKumiSet:[{InternalName:"Photoshop6MojiKumiSet1"},{InternalName:"Photoshop6MojiKumiSet2"},{InternalName:"Photoshop6MojiKumiSet3"},{InternalName:"Photoshop6MojiKumiSet4"}],TheNormalStyleSheet:0,TheNormalParagraphSheet:0,ParagraphSheetSet:[{Name:"Normal RGB",DefaultStyleSheet:0,Properties:ii(xe(xe({},ri),e.paragraphStyle),m)}],StyleSheetSet:[{Name:"Normal RGB",StyleSheetData:T}],FontSet:m.map(function(K){return{Name:K.name,Script:K.script||0,FontType:K.type||0,Synthetic:K.synthetic||0}}),SuperscriptSize:(i=e.superscriptSize)!==null&&i!==void 0?i:.583,SuperscriptPosition:(a=e.superscriptPosition)!==null&&a!==void 0?a:.333,SubscriptSize:(o=e.subscriptSize)!==null&&o!==void 0?o:.583,SubscriptPosition:(s=e.subscriptPosition)!==null&&s!==void 0?s:.333,SmallCapSize:(c=e.smallCapSize)!==null&&c!==void 0?c:.7},$={EngineDict:{Editor:{Text:h},ParagraphRun:{DefaultRunData:{ParagraphSheet:{DefaultStyleSheet:0,Properties:{}},Adjustments:{Axis:[1,0,1],XY:[0,0]}},RunArray:F,RunLengthArray:y,IsJoinable:1},StyleRun:{DefaultRunData:{StyleSheet:{StyleSheetData:{}}},RunArray:W,RunLengthArray:D,IsJoinable:2},GridInfo:{GridIsOn:!!se.isOn,ShowGrid:!!se.show,GridSize:(l=se.size)!==null&&l!==void 0?l:18,GridLeading:(u=se.leading)!==null&&u!==void 0?u:22,GridColor:Da(se.color),GridLeadingFillColor:Da(se.color),AlignLineHeightToGridFlags:!!se.alignLineHeightToGridFlags},AntiAlias:Kl.indexOf((d=e.antiAlias)!==null&&d!==void 0?d:"sharp"),UseFractionalGlyphWidths:(f=e.useFractionalGlyphWidths)!==null&&f!==void 0?f:!0,Rendered:{Version:1,Shapes:{WritingDirection:pe,Children:[{ShapeType:ge,Procession:Y,Lines:{WritingDirection:pe,Children:[]},Cookie:{Photoshop:Te}}]}}},ResourceDict:xe({},Ve),DocumentResources:xe({},Ve)};return $}Ht.encodeEngineData=z0});var rc=oe(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.decodeEngineData2=void 0;var Pa={0:{uproot:!0,children:{0:{name:"Type"},1:{name:"Values"}}}},Ma={0:{name:"Font"},1:{name:"FontSize"},2:{name:"FauxBold"},3:{name:"FauxItalic"},4:{name:"AutoLeading"},5:{name:"Leading"},6:{name:"HorizontalScale"},7:{name:"VerticalScale"},8:{name:"Tracking"},9:{name:"BaselineShift"},11:{name:"Kerning?"},12:{name:"FontCaps"},13:{name:"FontBaseline"},15:{name:"Strikethrough?"},16:{name:"Underline?"},18:{name:"Ligatures"},19:{name:"DLigatures"},23:{name:"Fractions"},24:{name:"Ordinals"},28:{name:"StylisticAlternates"},30:{name:"OldStyle?"},35:{name:"BaselineDirection"},38:{name:"Language"},52:{name:"NoBreak"},53:{name:"FillColor",children:Pa},54:{name:"StrokeColor",children:Pa},55:{children:{99:{uproot:!0}}},79:{children:Pa}},Ta={0:{name:"Justification"},1:{name:"FirstLineIndent"},2:{name:"StartIndent"},3:{name:"EndIndent"},4:{name:"SpaceBefore"},5:{name:"SpaceAfter"},7:{name:"AutoLeading"},9:{name:"AutoHyphenate"},10:{name:"HyphenatedWordSize"},11:{name:"PreHyphen"},12:{name:"PostHyphen"},13:{name:"ConsecutiveHyphens?"},14:{name:"Zone"},15:{name:"HypenateCapitalizedWords"},17:{name:"WordSpacing"},18:{name:"LetterSpacing"},19:{name:"GlyphSpacing"},32:{name:"StyleSheet",children:Ma}},nc={name:"StyleSheetData",children:Ma},N0={0:{name:"ResourceDict",children:{1:{name:"FontSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},2:{name:"FontType"}}}}}}}}},2:{name:"2",children:{}},3:{name:"MojiKumiSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"InternalName"}}}}}}},4:{name:"KinsokuSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{uproot:!0,children:{0:{name:"NoStart"},1:{name:"NoEnd"},2:{name:"Keep"},3:{name:"Hanging"},4:{name:"Name"}}}}}}}}},5:{name:"StyleSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},6:nc}}}}}},6:{name:"ParagraphSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{name:"Properties",children:Ta},6:{name:"DefaultStyleSheet"}}}}}}},8:{name:"TextFrameSet",children:{0:{uproot:!0,children:{0:{name:"path",children:{0:{name:"name"},1:{name:"bezierCurve",children:{0:{name:"controlPoints"}}},2:{name:"data",children:{0:{name:"type"},1:{name:"orientation"},2:{name:"frameMatrix"},4:{name:"4"},6:{name:"textRange"},7:{name:"rowGutter"},8:{name:"columnGutter"},9:{name:"9"},10:{name:"baselineAlignment",children:{0:{name:"flag"},1:{name:"min"}}},11:{name:"pathData",children:{1:{name:"1"},0:{name:"reversed"},2:{name:"2"},3:{name:"3"},4:{name:"spacing"},5:{name:"5"},6:{name:"6"},7:{name:"7"},18:{name:"18"}}},12:{name:"12"},13:{name:"13"}}},3:{name:"3"},97:{name:"uuid"}}}}}}},9:{name:"Predefined",children:{0:{children:{0:{uproot:!0}}},1:{children:{0:{uproot:!0}}}}}}},1:{name:"EngineDict",children:{0:{name:"0",children:{3:{name:"SuperscriptSize"},4:{name:"SuperscriptPosition"},5:{name:"SubscriptSize"},6:{name:"SubscriptPosition"},7:{name:"SmallCapSize"},8:{name:"UseFractionalGlyphWidths"},15:{children:{0:{uproot:!0}}}}},1:{name:"Editors?",children:{0:{name:"Editor",children:{0:{name:"Text"},5:{name:"ParagraphRun",children:{0:{name:"RunArray",children:{0:{name:"ParagraphSheet",children:{0:{uproot:!0,children:{0:{name:"0"},5:{name:"5",children:Ta},6:{name:"6"}}}}},1:{name:"RunLength"}}}}},6:{name:"StyleRun",children:{0:{name:"RunArray",children:{0:{name:"StyleSheet",children:{0:{uproot:!0,children:{6:nc}}}},1:{name:"RunLength"}}}}}}},1:{name:"FontVectorData ???"}}},2:{name:"StyleSheet",children:Ma},3:{name:"ParagraphSheet",children:Ta}}}};function ar(e,n){var t,r;if(e===null)return e;if(Array.isArray(e))return e.map(function(c){return ar(c,n)});if(typeof e!="object")return e;for(var i={},a=0,o=Object.keys(e);a<o.length;a++){var s=o[a];if(n[s])if(n[s].uproot){s!=="99"&&(i=ar(e[s],(t=n[s].children)!==null&&t!==void 0?t:{})),e[99]&&(i._type=e[99]);break}else i[n[s].name||s]=ar(e[s],(r=n[s].children)!==null&&r!==void 0?r:{});else s==="99"?i._type=e[s]:i[s]=ar(e[s],{})}return i}function V0(e){return ar(e,N0)}ai.decodeEngineData2=V0});var La={};oo(La,{default:()=>H0,inspect:()=>G0});var G0,H0,Oa=Zc(()=>{G0=()=>"",H0={inspect:()=>""}});var ni=oe(we=>{"use strict";var v=we&&we.__assign||function(){return v=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v.apply(this,arguments)};Object.defineProperty(we,"__esModule",{value:!0});we.hasMultiEffects=we.readVectorMask=we.booleanOperations=we.readBezierKnot=we.infoHandlersMap=we.infoHandlers=void 0;var ic=Lr(),ac=Gl(),qe=zt(),p=Nt(),g=Sn(),b=jr(),Ga=Wl(),oc=tc(),j0=rc(),Xe="abcdefghijklmnopqrstuvwxyz";we.infoHandlers=[];we.infoHandlersMap={};function V(e,n,t,r){var i={key:e,has:n,read:t,write:r};we.infoHandlers.push(i),we.infoHandlersMap[i.key]=i}function En(e,n){we.infoHandlersMap[e]=we.infoHandlersMap[n]}function ue(e){return function(n){return n[e]!==void 0}}function Ba(e){if((0,p.readUint32)(e))throw new Error("Resource size above 4 GB limit at ".concat(e.offset.toString(16)));return(0,p.readUint32)(e)}function Ra(e,n){(0,g.writeUint32)(e,0),(0,g.writeUint32)(e,n)}V("TySh",ue("text"),function(e,n,t){if((0,p.readInt16)(e)!==1)throw new Error("Invalid TySh version");for(var r=[],i=0;i<6;i++)r.push((0,p.readFloat64)(e));if((0,p.readInt16)(e)!==50)throw new Error("Invalid TySh text version");var a=(0,b.readVersionAndDescriptor)(e);if((0,p.readInt16)(e)!==1)throw new Error("Invalid TySh warp version");var o=(0,b.readVersionAndDescriptor)(e);if(n.text={transform:r,left:(0,p.readFloat32)(e),top:(0,p.readFloat32)(e),right:(0,p.readFloat32)(e),bottom:(0,p.readFloat32)(e),text:a["Txt "].replace(/\r/g,`
`),index:a.TextIndex||0,gridding:b.textGridding.decode(a.textGridding),antiAlias:b.Annt.decode(a.AntA),orientation:b.Ornt.decode(a.Ornt),warp:{style:b.warpStyle.decode(o.warpStyle),value:o.warpValue||0,perspective:o.warpPerspective||0,perspectiveOther:o.warpPerspectiveOther||0,rotate:b.Ornt.decode(o.warpRotate)}},a.bounds&&(n.text.bounds=(0,b.descBoundsToBounds)(a.bounds)),a.boundingBox&&(n.text.boundingBox=(0,b.descBoundsToBounds)(a.boundingBox)),a.EngineData){var s=(0,Ga.parseEngineData)(a.EngineData),c=(0,oc.decodeEngineData)(s);n.text=v(v({},n.text),c)}(0,p.skipBytes)(e,t())},function(e,n){var t=n.text,r=t.warp||{},i=t.transform||[1,0,0,1,0,0],a=v(v(v({"Txt ":(t.text||"").replace(/\r?\n/g,"\r"),textGridding:b.textGridding.encode(t.gridding),Ornt:b.Ornt.encode(t.orientation),AntA:b.Annt.encode(t.antiAlias)},t.bounds?{bounds:(0,b.boundsToDescBounds)(t.bounds)}:{}),t.boundingBox?{boundingBox:(0,b.boundsToDescBounds)(t.boundingBox)}:{}),{TextIndex:t.index||0,EngineData:(0,Ga.serializeEngineData)((0,oc.encodeEngineData)(t))});(0,g.writeInt16)(e,1);for(var o=0;o<6;o++)(0,g.writeFloat64)(e,i[o]);(0,g.writeInt16)(e,50),(0,b.writeVersionAndDescriptor)(e,"","TxLr",a,"text"),(0,g.writeInt16)(e,1),(0,b.writeVersionAndDescriptor)(e,"","warp",fi(r)),(0,g.writeFloat32)(e,t.left),(0,g.writeFloat32)(e,t.top),(0,g.writeFloat32)(e,t.right),(0,g.writeFloat32)(e,t.bottom)});V("SoCo",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&e.vectorFill.type==="color"},function(e,n){var t=(0,b.readVersionAndDescriptor)(e);n.vectorFill=(0,b.parseVectorContent)(t)},function(e,n){var t=(0,b.serializeVectorContent)(n.vectorFill).descriptor;(0,b.writeVersionAndDescriptor)(e,"","null",t)});V("GdFl",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&(e.vectorFill.type==="solid"||e.vectorFill.type==="noise")},function(e,n,t){var r=(0,b.readVersionAndDescriptor)(e);n.vectorFill=(0,b.parseVectorContent)(r),(0,p.skipBytes)(e,t())},function(e,n){var t=(0,b.serializeVectorContent)(n.vectorFill).descriptor;(0,b.writeVersionAndDescriptor)(e,"","null",t)});V("PtFl",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&e.vectorFill.type==="pattern"},function(e,n){var t=(0,b.readVersionAndDescriptor)(e);n.vectorFill=(0,b.parseVectorContent)(t)},function(e,n){var t=(0,b.serializeVectorContent)(n.vectorFill).descriptor;(0,b.writeVersionAndDescriptor)(e,"","null",t)});V("vscg",function(e){return e.vectorFill!==void 0&&e.vectorStroke!==void 0},function(e,n,t){(0,p.readSignature)(e);var r=(0,b.readVersionAndDescriptor)(e);n.vectorFill=(0,b.parseVectorContent)(r),(0,p.skipBytes)(e,t())},function(e,n){var t=(0,b.serializeVectorContent)(n.vectorFill),r=t.descriptor,i=t.key;(0,g.writeSignature)(e,i),(0,b.writeVersionAndDescriptor)(e,"","null",r)});function hc(e,n,t){var r=(0,p.readFixedPointPath32)(e)*t,i=(0,p.readFixedPointPath32)(e)*n,a=(0,p.readFixedPointPath32)(e)*t,o=(0,p.readFixedPointPath32)(e)*n,s=(0,p.readFixedPointPath32)(e)*t,c=(0,p.readFixedPointPath32)(e)*n;return[i,r,o,a,c,s]}we.readBezierKnot=hc;function W0(e,n,t,r){(0,g.writeFixedPointPath32)(e,n[1]/r),(0,g.writeFixedPointPath32)(e,n[0]/t),(0,g.writeFixedPointPath32)(e,n[3]/r),(0,g.writeFixedPointPath32)(e,n[2]/t),(0,g.writeFixedPointPath32)(e,n[5]/r),(0,g.writeFixedPointPath32)(e,n[4]/t)}we.booleanOperations=["exclude","combine","subtract","intersect"];function pc(e,n,t,r,i){for(var a=e.offset+i,o=n.paths,s=void 0;a-e.offset>=26;){var c=(0,p.readUint16)(e);switch(c){case 0:case 3:{(0,p.readUint16)(e);var l=(0,p.readInt16)(e),u=(0,p.readUint16)(e);(0,p.skipBytes)(e,18),s={open:c===3,knots:[],fillRule:u===2?"non-zero":"even-odd"},l!==-1&&(s.operation=we.booleanOperations[l]),o.push(s);break}case 1:case 2:case 4:case 5:s.knots.push({linked:c===1||c===4,points:hc(e,t,r)});break;case 6:(0,p.skipBytes)(e,24);break;case 7:{var d=(0,p.readFixedPointPath32)(e),f=(0,p.readFixedPointPath32)(e),h=(0,p.readFixedPointPath32)(e),m=(0,p.readFixedPointPath32)(e),w=(0,p.readFixedPointPath32)(e);(0,p.skipBytes)(e,4),n.clipboard={top:d,left:f,bottom:h,right:m,resolution:w};break}case 8:n.fillStartsWithAllPixels=!!(0,p.readUint16)(e),(0,p.skipBytes)(e,22);break;default:throw new Error("Invalid vmsk section")}}return o}we.readVectorMask=pc;V("vmsk",ue("vectorMask"),function(e,n,t,r){var i=r.width,a=r.height;if((0,p.readUint32)(e)!==3)throw new Error("Invalid vmsk version");n.vectorMask={paths:[]};var o=n.vectorMask,s=(0,p.readUint32)(e);o.invert=(s&1)!==0,o.notLink=(s&2)!==0,o.disable=(s&4)!==0,pc(e,o,i,a,t()),(0,p.skipBytes)(e,t())},function(e,n,t){var r=t.width,i=t.height,a=n.vectorMask,o=(a.invert?1:0)|(a.notLink?2:0)|(a.disable?4:0);(0,g.writeUint32)(e,3),(0,g.writeUint32)(e,o),(0,g.writeUint16)(e,6),(0,g.writeZeros)(e,24);var s=a.clipboard;s&&((0,g.writeUint16)(e,7),(0,g.writeFixedPointPath32)(e,s.top),(0,g.writeFixedPointPath32)(e,s.left),(0,g.writeFixedPointPath32)(e,s.bottom),(0,g.writeFixedPointPath32)(e,s.right),(0,g.writeFixedPointPath32)(e,s.resolution),(0,g.writeZeros)(e,4)),(0,g.writeUint16)(e,8),(0,g.writeUint16)(e,a.fillStartsWithAllPixels?1:0),(0,g.writeZeros)(e,22);for(var c=0,l=a.paths;c<l.length;c++){var u=l[c];(0,g.writeUint16)(e,u.open?3:0),(0,g.writeUint16)(e,u.knots.length),(0,g.writeUint16)(e,u.operation?we.booleanOperations.indexOf(u.operation):-1),(0,g.writeUint16)(e,u.fillRule==="non-zero"?2:1),(0,g.writeZeros)(e,18);for(var d=u.open?4:1,f=u.open?5:2,h=0,m=u.knots;h<m.length;h++){var w=m[h],F=w.linked,y=w.points;(0,g.writeUint16)(e,F?d:f),W0(e,y,r,i)}}});En("vsms","vmsk");V("vowv",ue("vowv"),function(e,n){n.vowv=(0,p.readUint32)(e)},function(e,n){(0,g.writeUint32)(e,n.vowv)});V("vogk",ue("vectorOrigination"),function(e,n,t){if((0,p.readInt32)(e)!==1)throw new Error("Invalid vogk version");var r=(0,b.readVersionAndDescriptor)(e);n.vectorOrigination={keyDescriptorList:[]};for(var i=0,a=r.keyDescriptorList;i<a.length;i++){var o=a[i],s={};o.keyShapeInvalidated!=null&&(s.keyShapeInvalidated=o.keyShapeInvalidated),o.keyOriginType!=null&&(s.keyOriginType=o.keyOriginType),o.keyOriginResolution!=null&&(s.keyOriginResolution=o.keyOriginResolution),o.keyOriginShapeBBox&&(s.keyOriginShapeBoundingBox={top:(0,b.parseUnitsOrNumber)(o.keyOriginShapeBBox["Top "]),left:(0,b.parseUnitsOrNumber)(o.keyOriginShapeBBox.Left),bottom:(0,b.parseUnitsOrNumber)(o.keyOriginShapeBBox.Btom),right:(0,b.parseUnitsOrNumber)(o.keyOriginShapeBBox.Rght)});var c=o.keyOriginRRectRadii;c&&(s.keyOriginRRectRadii={topRight:(0,b.parseUnits)(c.topRight),topLeft:(0,b.parseUnits)(c.topLeft),bottomLeft:(0,b.parseUnits)(c.bottomLeft),bottomRight:(0,b.parseUnits)(c.bottomRight)});var l=o.keyOriginBoxCorners;l&&(s.keyOriginBoxCorners=[{x:l.rectangleCornerA.Hrzn,y:l.rectangleCornerA.Vrtc},{x:l.rectangleCornerB.Hrzn,y:l.rectangleCornerB.Vrtc},{x:l.rectangleCornerC.Hrzn,y:l.rectangleCornerC.Vrtc},{x:l.rectangleCornerD.Hrzn,y:l.rectangleCornerD.Vrtc}]);var u=o.Trnf;u&&(s.transform=[u.xx,u.xy,u.yx,u.yy,u.tx,u.ty]),n.vectorOrigination.keyDescriptorList.push(s)}(0,p.skipBytes)(e,t())},function(e,n){for(var t=n.vectorOrigination,r={keyDescriptorList:[]},i=0;i<t.keyDescriptorList.length;i++){var a=t.keyDescriptorList[i];r.keyDescriptorList.push({});var o=r.keyDescriptorList[r.keyDescriptorList.length-1];a.keyOriginType!=null&&(o.keyOriginType=a.keyOriginType),a.keyOriginResolution!=null&&(o.keyOriginResolution=a.keyOriginResolution);var s=a.keyOriginRRectRadii;s&&(o.keyOriginRRectRadii={unitValueQuadVersion:1,topRight:(0,b.unitsValue)(s.topRight,"topRight"),topLeft:(0,b.unitsValue)(s.topLeft,"topLeft"),bottomLeft:(0,b.unitsValue)(s.bottomLeft,"bottomLeft"),bottomRight:(0,b.unitsValue)(s.bottomRight,"bottomRight")});var c=a.keyOriginShapeBoundingBox;c&&(o.keyOriginShapeBBox={unitValueQuadVersion:1,"Top ":(0,b.unitsValue)(c.top,"top"),Left:(0,b.unitsValue)(c.left,"left"),Btom:(0,b.unitsValue)(c.bottom,"bottom"),Rght:(0,b.unitsValue)(c.right,"right")});var l=a.keyOriginBoxCorners;l&&l.length===4&&(o.keyOriginBoxCorners={rectangleCornerA:{Hrzn:l[0].x,Vrtc:l[0].y},rectangleCornerB:{Hrzn:l[1].x,Vrtc:l[1].y},rectangleCornerC:{Hrzn:l[2].x,Vrtc:l[2].y},rectangleCornerD:{Hrzn:l[3].x,Vrtc:l[3].y}});var u=a.transform;u&&u.length===6&&(o.Trnf={xx:u[0],xy:u[1],yx:u[2],yy:u[3],tx:u[4],ty:u[5]}),a.keyShapeInvalidated!=null&&(o.keyShapeInvalidated=a.keyShapeInvalidated),o.keyOriginIndex=i}(0,g.writeInt32)(e,1),(0,b.writeVersionAndDescriptor)(e,"","null",r)});V("lmfx",function(e){return e.effects!==void 0&&ja(e.effects)},function(e,n,t){var r=(0,p.readUint32)(e);if(r!==0)throw new Error("Invalid lmfx version");var i=(0,b.readVersionAndDescriptor)(e);n.effects=(0,b.parseEffects)(i,!!e.logMissingFeatures),(0,p.skipBytes)(e,t())},function(e,n,t,r){var i=(0,b.serializeEffects)(n.effects,!!r.logMissingFeatures,!0);(0,g.writeUint32)(e,0),(0,b.writeVersionAndDescriptor)(e,"","null",i)});V("lrFX",ue("effects"),function(e,n,t){n.effects||(n.effects=(0,ac.readEffects)(e)),(0,p.skipBytes)(e,t())},function(e,n){(0,ac.writeEffects)(e,n.effects)});V("luni",ue("name"),function(e,n,t){if(t()>4){var r=(0,p.readUint32)(e);t()>=r*2?n.name=(0,p.readUnicodeStringWithLength)(e,r):e.logDevFeatures&&e.log("name in luni section is too long")}else e.logDevFeatures&&e.log("empty luni section");(0,p.skipBytes)(e,t())},function(e,n){(0,g.writeUnicodeString)(e,n.name)});V("lnsr",ue("nameSource"),function(e,n){return n.nameSource=(0,p.readSignature)(e)},function(e,n){return(0,g.writeSignature)(e,n.nameSource)});V("lyid",ue("id"),function(e,n){n.id=(0,p.readUint32)(e)},function(e,n,t,r){for(var i=n.id;r.layerIds.has(i);)i+=100;(0,g.writeUint32)(e,i),r.layerIds.add(i),r.layerToId.set(n,i)});V("lsct",ue("sectionDivider"),function(e,n,t){n.sectionDivider={type:(0,p.readUint32)(e)},t()&&((0,p.checkSignature)(e,"8BIM"),n.sectionDivider.key=(0,p.readSignature)(e)),t()&&(n.sectionDivider.subType=(0,p.readUint32)(e))},function(e,n){(0,g.writeUint32)(e,n.sectionDivider.type),n.sectionDivider.key&&((0,g.writeSignature)(e,"8BIM"),(0,g.writeSignature)(e,n.sectionDivider.key),n.sectionDivider.subType!==void 0&&(0,g.writeUint32)(e,n.sectionDivider.subType))});En("lsdk","lsct");V("clbl",ue("blendClippendElements"),function(e,n){n.blendClippendElements=!!(0,p.readUint8)(e),(0,p.skipBytes)(e,3)},function(e,n){(0,g.writeUint8)(e,n.blendClippendElements?1:0),(0,g.writeZeros)(e,3)});V("infx",ue("blendInteriorElements"),function(e,n){n.blendInteriorElements=!!(0,p.readUint8)(e),(0,p.skipBytes)(e,3)},function(e,n){(0,g.writeUint8)(e,n.blendInteriorElements?1:0),(0,g.writeZeros)(e,3)});V("knko",ue("knockout"),function(e,n){n.knockout=!!(0,p.readUint8)(e),(0,p.skipBytes)(e,3)},function(e,n){(0,g.writeUint8)(e,n.knockout?1:0),(0,g.writeZeros)(e,3)});V("lmgm",ue("layerMaskAsGlobalMask"),function(e,n){n.layerMaskAsGlobalMask=!!(0,p.readUint8)(e),(0,p.skipBytes)(e,3)},function(e,n){(0,g.writeUint8)(e,n.layerMaskAsGlobalMask?1:0),(0,g.writeZeros)(e,3)});V("lspf",ue("protected"),function(e,n){var t=(0,p.readUint32)(e);n.protected={transparency:(t&1)!==0,composite:(t&2)!==0,position:(t&4)!==0},t&8&&(n.protected.artboards=!0)},function(e,n){var t=(n.protected.transparency?1:0)|(n.protected.composite?2:0)|(n.protected.position?4:0)|(n.protected.artboards?8:0);(0,g.writeUint32)(e,t)});V("lclr",ue("layerColor"),function(e,n){var t=(0,p.readUint16)(e);(0,p.skipBytes)(e,6),n.layerColor=qe.layerColors[t]},function(e,n){var t=qe.layerColors.indexOf(n.layerColor);(0,g.writeUint16)(e,t===-1?0:t),(0,g.writeZeros)(e,6)});V("shmd",function(e){return e.timestamp!==void 0||e.animationFrames!==void 0||e.animationFrameFlags!==void 0||e.timeline!==void 0||e.comps!==void 0},function(e,n,t){for(var r=(0,p.readUint32)(e),i=function(o){(0,p.checkSignature)(e,"8BIM");var s=(0,p.readSignature)(e);(0,p.readUint8)(e),(0,p.skipBytes)(e,3),(0,p.readSection)(e,1,function(c){if(s==="cust"){var l=(0,b.readVersionAndDescriptor)(e);l.layerTime!==void 0&&(n.timestamp=l.layerTime)}else if(s==="mlst"){var l=(0,b.readVersionAndDescriptor)(e);n.animationFrames=[];for(var u=0;u<l.LaSt.length;u++){var d=l.LaSt[u],f={frames:d.FrLs};d.enab!==void 0&&(f.enable=d.enab),d.Ofst&&(f.offset=(0,b.horzVrtcToXY)(d.Ofst)),d.FXRf&&(f.referencePoint=(0,b.horzVrtcToXY)(d.FXRf)),d.Lefx&&(f.effects=(0,b.parseEffects)(d.Lefx,!!e.logMissingFeatures)),d.blendOptions&&d.blendOptions.Opct&&(f.opacity=(0,b.parsePercent)(d.blendOptions.Opct)),n.animationFrames.push(f)}}else if(s==="mdyn"){(0,p.readUint16)(e);var h=(0,p.readUint8)(e),m=(0,p.readUint8)(e);n.animationFrameFlags={propagateFrameOne:!h,unifyLayerPosition:(m&1)!==0,unifyLayerStyle:(m&2)!==0,unifyLayerVisibility:(m&4)!==0}}else if(s==="tmln"){var l=(0,b.readVersionAndDescriptor)(e),w=l.timeScope,F={start:(0,b.frac)(w.Strt),duration:(0,b.frac)(w.duration),inTime:(0,b.frac)(w.inTime),outTime:(0,b.frac)(w.outTime),autoScope:l.autoScope,audioLevel:l.audioLevel};l.trackList&&(F.tracks=(0,b.parseTrackList)(l.trackList,!!e.logMissingFeatures)),n.timeline=F}else if(s==="cmls"){var l=(0,b.readVersionAndDescriptor)(e);n.comps={settings:[]},l.origFXRefPoint&&(n.comps.originalEffectsReferencePoint={x:l.origFXRefPoint.Hrzn,y:l.origFXRefPoint.Vrtc});for(var y=0,_=l.layerSettings;y<_.length;y++){var I=_[y];n.comps.settings.push({compList:I.compList});var S=n.comps.settings[n.comps.settings.length-1];"enab"in I&&(S.enabled=I.enab),I.Ofst&&(S.offset={x:I.Ofst.Hrzn,y:I.Ofst.Vrtc}),I.FXRefPoint&&(S.effectsReferencePoint={x:I.FXRefPoint.Hrzn,y:I.FXRefPoint.Vrtc})}}else if(s==="extn"){var l=(0,b.readVersionAndDescriptor)(e);e.logMissingFeatures&&e.log('Unhandled "shmd" section key',s)}else e.logMissingFeatures&&e.log('Unhandled "shmd" section key',s);(0,p.skipBytes)(e,c())})},a=0;a<r;a++)i(a);(0,p.skipBytes)(e,t())},function(e,n,t,r){var i=n.animationFrames,a=n.animationFrameFlags,o=n.timestamp,s=n.timeline,c=n.comps,l=0;i&&l++,a&&l++,s&&l++,o!==void 0&&l++,c&&l++,(0,g.writeUint32)(e,l),i&&((0,g.writeSignature)(e,"8BIM"),(0,g.writeSignature)(e,"mlst"),(0,g.writeUint8)(e,0),(0,g.writeZeros)(e,3),(0,g.writeSection)(e,2,function(){for(var u,d={LaID:(u=n.id)!==null&&u!==void 0?u:0,LaSt:[]},f=0;f<i.length;f++){var h=i[f],m={};h.enable!==void 0&&(m.enab=h.enable),m.FrLs=h.frames,h.offset&&(m.Ofst=(0,b.xyToHorzVrtc)(h.offset)),h.referencePoint&&(m.FXRf=(0,b.xyToHorzVrtc)(h.referencePoint)),h.effects&&(m.Lefx=(0,b.serializeEffects)(h.effects,!1,!1)),h.opacity!==void 0&&(m.blendOptions={Opct:(0,b.unitsPercent)(h.opacity)}),d.LaSt.push(m)}(0,b.writeVersionAndDescriptor)(e,"","null",d)},!0)),a&&((0,g.writeSignature)(e,"8BIM"),(0,g.writeSignature)(e,"mdyn"),(0,g.writeUint8)(e,0),(0,g.writeZeros)(e,3),(0,g.writeSection)(e,2,function(){(0,g.writeUint16)(e,0),(0,g.writeUint8)(e,a.propagateFrameOne?0:15),(0,g.writeUint8)(e,(a.unifyLayerPosition?1:0)|(a.unifyLayerStyle?2:0)|(a.unifyLayerVisibility?4:0))})),s&&((0,g.writeSignature)(e,"8BIM"),(0,g.writeSignature)(e,"tmln"),(0,g.writeUint8)(e,0),(0,g.writeZeros)(e,3),(0,g.writeSection)(e,2,function(){var u={Vrsn:1,timeScope:{Vrsn:1,Strt:s.start,duration:s.duration,inTime:s.inTime,outTime:s.outTime},autoScope:s.autoScope,audioLevel:s.audioLevel};s.tracks&&(u.trackList=(0,b.serializeTrackList)(s.tracks));var d=r.layerToId.get(n)||n.id;if(!d)throw new Error("You need to provide layer.id value whan writing document with animations");u.LyrI=d,(0,b.writeVersionAndDescriptor)(e,"","null",u,"anim")},!0)),o!==void 0&&((0,g.writeSignature)(e,"8BIM"),(0,g.writeSignature)(e,"cust"),(0,g.writeUint8)(e,0),(0,g.writeZeros)(e,3),(0,g.writeSection)(e,2,function(){var u={layerTime:o};(0,b.writeVersionAndDescriptor)(e,"","metadata",u)},!0)),c&&((0,g.writeSignature)(e,"8BIM"),(0,g.writeSignature)(e,"cmls"),(0,g.writeUint8)(e,0),(0,g.writeZeros)(e,3),(0,g.writeSection)(e,2,function(){var u=r.layerToId.get(n)||n.id;if(!u)throw new Error("You need to provide layer.id value whan writing document with layer comps");var d={};c.originalEffectsReferencePoint&&(d.origFXRefPoint={Hrzn:c.originalEffectsReferencePoint.x,Vrtc:c.originalEffectsReferencePoint.y}),d.LyrI=u,d.layerSettings=[];for(var f=0,h=c.settings;f<h.length;f++){var m=h[f],w={};m.enabled!==void 0&&(w.enab=m.enabled),m.offset&&(w.Ofst={Hrzn:m.offset.x,Vrtc:m.offset.y}),m.effectsReferencePoint&&(w.FXRefPoint={Hrzn:m.effectsReferencePoint.x,Vrtc:m.effectsReferencePoint.y}),w.compList=m.compList,d.layerSettings.push(w)}(0,b.writeVersionAndDescriptor)(e,"","null",d)},!0))});V("PxSc",function(){return!1},function(e,n){var t=(0,b.readVersionAndDescriptor)(e,!0);t.pixelSourceType===1986285651?n.pixelSource={type:"vdPS",origin:{x:t.origin.Hrzn,y:t.origin.Vrtc},interpretation:{interpretAlpha:t.interpretation.interpretAlpha.split(".")[1],profile:t.interpretation.profile},frameReader:{type:"QTFR",link:{name:t.frameReader["Lnk "]["Nm  "],fullPath:t.frameReader["Lnk "].fullPath,originalPath:t.frameReader["Lnk "].originalPath,relativePath:t.frameReader["Lnk "].relPath,alias:t.frameReader["Lnk "].alis},mediaDescriptor:t.frameReader.mediaDescriptor},showAlteredVideo:t.showAlteredVideo}:e.log("Unknown pixelSourceType")},function(e,n){var t=n.pixelSource,r={_name:"",_classID:"PixelSource",pixelSourceType:1986285651,descVersion:1,origin:{Hrzn:t.origin.x,Vrtc:t.origin.y},interpretation:{_name:"",_classID:"footageInterpretation",Vrsn:1,interpretAlpha:"alphaInterpretation.".concat(t.interpretation.interpretAlpha),profile:t.interpretation.profile},frameReader:{_name:"",_classID:"FrameReader",frameReaderType:1364477522,descVersion:1,"Lnk ":{_name:"",_classID:"ExternalFileLink",descVersion:2,"Nm  ":t.frameReader.link.name,fullPath:t.frameReader.link.fullPath,originalPath:t.frameReader.link.originalPath,alis:t.frameReader.link.alias,relPath:t.frameReader.link.relativePath},mediaDescriptor:t.frameReader.mediaDescriptor},showAlteredVideo:t.showAlteredVideo};(0,b.writeVersionAndDescriptor)(e,"","PixelSource",r)});V("vstk",ue("vectorStroke"),function(e,n,t){var r=(0,b.readVersionAndDescriptor)(e);n.vectorStroke={strokeEnabled:r.strokeEnabled,fillEnabled:r.fillEnabled,lineWidth:(0,b.parseUnits)(r.strokeStyleLineWidth),lineDashOffset:(0,b.parseUnits)(r.strokeStyleLineDashOffset),miterLimit:r.strokeStyleMiterLimit,lineCapType:b.strokeStyleLineCapType.decode(r.strokeStyleLineCapType),lineJoinType:b.strokeStyleLineJoinType.decode(r.strokeStyleLineJoinType),lineAlignment:b.strokeStyleLineAlignment.decode(r.strokeStyleLineAlignment),scaleLock:r.strokeStyleScaleLock,strokeAdjust:r.strokeStyleStrokeAdjust,lineDashSet:r.strokeStyleLineDashSet.map(b.parseUnits),blendMode:b.BlnM.decode(r.strokeStyleBlendMode),opacity:(0,b.parsePercent)(r.strokeStyleOpacity),content:(0,b.parseVectorContent)(r.strokeStyleContent),resolution:r.strokeStyleResolution},(0,p.skipBytes)(e,t())},function(e,n){var t,r,i,a=n.vectorStroke,o={strokeStyleVersion:2,strokeEnabled:!!a.strokeEnabled,fillEnabled:!!a.fillEnabled,strokeStyleLineWidth:a.lineWidth||{value:3,units:"Points"},strokeStyleLineDashOffset:a.lineDashOffset||{value:0,units:"Points"},strokeStyleMiterLimit:(t=a.miterLimit)!==null&&t!==void 0?t:100,strokeStyleLineCapType:b.strokeStyleLineCapType.encode(a.lineCapType),strokeStyleLineJoinType:b.strokeStyleLineJoinType.encode(a.lineJoinType),strokeStyleLineAlignment:b.strokeStyleLineAlignment.encode(a.lineAlignment),strokeStyleScaleLock:!!a.scaleLock,strokeStyleStrokeAdjust:!!a.strokeAdjust,strokeStyleLineDashSet:a.lineDashSet||[],strokeStyleBlendMode:b.BlnM.encode(a.blendMode),strokeStyleOpacity:(0,b.unitsPercent)((r=a.opacity)!==null&&r!==void 0?r:1),strokeStyleContent:(0,b.serializeVectorContent)(a.content||{type:"color",color:{r:0,g:0,b:0}}).descriptor,strokeStyleResolution:(i=a.resolution)!==null&&i!==void 0?i:72};(0,b.writeVersionAndDescriptor)(e,"","strokeStyle",o)});V("artb",ue("artboard"),function(e,n,t){var r=(0,b.readVersionAndDescriptor)(e),i=r.artboardRect;n.artboard={rect:{top:i["Top "],left:i.Left,bottom:i.Btom,right:i.Rght},guideIndices:r.guideIndeces,presetName:r.artboardPresetName,color:(0,b.parseColor)(r["Clr "]),backgroundType:r.artboardBackgroundType},(0,p.skipBytes)(e,t())},function(e,n){var t,r=n.artboard,i=r.rect,a={artboardRect:{"Top ":i.top,Left:i.left,Btom:i.bottom,Rght:i.right},guideIndeces:r.guideIndices||[],artboardPresetName:r.presetName||"","Clr ":(0,b.serializeColor)(r.color),artboardBackgroundType:(t=r.backgroundType)!==null&&t!==void 0?t:1};(0,b.writeVersionAndDescriptor)(e,"","artboard",a)});V("sn2P",ue("usingAlignedRendering"),function(e,n){return n.usingAlignedRendering=!!(0,p.readUint32)(e)},function(e,n){return(0,g.writeUint32)(e,n.usingAlignedRendering?1:0)});var Dn=["unknown","vector","raster","image stack"];function vc(e){var n,t,r,i,a,o,s=v(v({style:b.warpStyle.decode(e.warpStyle)},e.warpValues?{values:e.warpValues}:{value:e.warpValue||0}),{perspective:e.warpPerspective||0,perspectiveOther:e.warpPerspectiveOther||0,rotate:b.Ornt.decode(e.warpRotate),bounds:e.bounds&&{top:(0,b.parseUnitsOrNumber)(e.bounds["Top "]),left:(0,b.parseUnitsOrNumber)(e.bounds.Left),bottom:(0,b.parseUnitsOrNumber)(e.bounds.Btom),right:(0,b.parseUnitsOrNumber)(e.bounds.Rght)},uOrder:e.uOrder,vOrder:e.vOrder});(e.deformNumRows!=null||e.deformNumCols!=null)&&(s.deformNumRows=e.deformNumRows,s.deformNumCols=e.deformNumCols);var c=e.customEnvelopeWarp;if(c){s.customEnvelopeWarp={meshPoints:[]};for(var l=((n=c.meshPoints.find(function(f){return f.type==="Hrzn"}))===null||n===void 0?void 0:n.values)||[],u=((t=c.meshPoints.find(function(f){return f.type==="Vrtc"}))===null||t===void 0?void 0:t.values)||[],d=0;d<l.length;d++)s.customEnvelopeWarp.meshPoints.push({x:l[d],y:u[d]});(c.quiltSliceX||c.quiltSliceY)&&(s.customEnvelopeWarp.quiltSliceX=((i=(r=c.quiltSliceX)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.values)||[],s.customEnvelopeWarp.quiltSliceY=((o=(a=c.quiltSliceY)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.values)||[])}return s}function Ha(e){var n,t;return e.deformNumCols!=null||e.deformNumRows!=null||((n=e.customEnvelopeWarp)===null||n===void 0?void 0:n.quiltSliceX)||((t=e.customEnvelopeWarp)===null||t===void 0?void 0:t.quiltSliceY)}function fi(e){var n=e.bounds,t=v(v({warpStyle:b.warpStyle.encode(e.style)},e.values?{warpValues:e.values}:{warpValue:e.value||0}),{warpPerspective:e.perspective||0,warpPerspectiveOther:e.perspectiveOther||0,warpRotate:b.Ornt.encode(e.rotate),bounds:{"Top ":(0,b.unitsValue)(n&&n.top||{units:"Pixels",value:0},"bounds.top"),Left:(0,b.unitsValue)(n&&n.left||{units:"Pixels",value:0},"bounds.left"),Btom:(0,b.unitsValue)(n&&n.bottom||{units:"Pixels",value:0},"bounds.bottom"),Rght:(0,b.unitsValue)(n&&n.right||{units:"Pixels",value:0},"bounds.right")},uOrder:e.uOrder||0,vOrder:e.vOrder||0}),r=Ha(e);if(r){var i=t;i.deformNumRows=e.deformNumRows||0,i.deformNumCols=e.deformNumCols||0}var a=e.customEnvelopeWarp;if(a){var o=a.meshPoints||[];if(r){var i=t;i.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",quiltSliceX:[{type:"quiltSliceX",values:a.quiltSliceX||[]}],quiltSliceY:[{type:"quiltSliceY",values:a.quiltSliceY||[]}],meshPoints:[{type:"Hrzn",values:o.map(function(c){return c.x})},{type:"Vrtc",values:o.map(function(c){return c.y})}]}}else t.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",meshPoints:[{type:"Hrzn",values:o.map(function(s){return s.x})},{type:"Vrtc",values:o.map(function(s){return s.y})}]}}return t}V("PlLd",ue("placedLayer"),function(e,n,t){if((0,p.readSignature)(e)!=="plcL")throw new Error("Invalid PlLd signature");if((0,p.readInt32)(e)!==3)throw new Error("Invalid PlLd version");var r=(0,p.readPascalString)(e,1),i=(0,p.readInt32)(e),a=(0,p.readInt32)(e);(0,p.readInt32)(e);var o=(0,p.readInt32)(e);if(!Dn[o])throw new Error("Invalid PlLd type");for(var s=[],c=0;c<8;c++)s.push((0,p.readFloat64)(e));var l=(0,p.readInt32)(e);if(l!==0)throw new Error("Invalid Warp version ".concat(l));var u=(0,b.readVersionAndDescriptor)(e);n.placedLayer=n.placedLayer||{id:r,type:Dn[o],pageNumber:i,totalPages:a,transform:s,warp:vc(u)},(0,p.skipBytes)(e,t())},function(e,n){var t=n.placedLayer;if((0,g.writeSignature)(e,"plcL"),(0,g.writeInt32)(e,3),!t.id||typeof t.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(t.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if((0,g.writePascalString)(e,t.id,1),(0,g.writeInt32)(e,1),(0,g.writeInt32)(e,1),(0,g.writeInt32)(e,16),Dn.indexOf(t.type)===-1)throw new Error("Invalid placedLayer type");(0,g.writeInt32)(e,Dn.indexOf(t.type));for(var r=0;r<8;r++)(0,g.writeFloat64)(e,t.transform[r]);(0,g.writeInt32)(e,0);var i=gc(t),a=Ha(i),o=a?"quiltWarp":"warp";(0,b.writeVersionAndDescriptor)(e,"",o,fi(i),o)});function Z0(e){return new Float32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}function X0(e){return new Uint32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}function za(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function ui(e){for(var n=[],t=0;t<e.length;t+=2)n.push({x:e[t],y:e[t+1]});return n}function or(e){for(var n=[],t=0;t<e.length;t++)n.push(e[t].x,e[t].y);return n}function sc(e){return ui(Z0(e))}function sr(e){return{x:(0,b.parseUnits)(e.Hrzn),y:(0,b.parseUnits)(e.Vrtc)}}function lr(e){return{_name:"",_classID:"Pnt ",Hrzn:(0,b.unitsValue)(e.x,"x"),Vrtc:(0,b.unitsValue)(e.y,"y")}}function q0(e,n){var t={name:e["Nm  "],opacity:(0,b.parsePercent)(e.blendOptions.Opct),blendMode:b.BlnM.decode(e.blendOptions["Md  "]),enabled:e.enab,hasOptions:e.hasoptions,foregroundColor:(0,b.parseColor)(e.FrgC),backgroundColor:(0,b.parseColor)(e.BckC)};if("Fltr"in e)switch(e.Fltr._classID){case"boxblur":return v(v({},t),{type:"box blur",filter:{radius:(0,b.parseUnits)(e.Fltr["Rds "])}});case"GsnB":return v(v({},t),{type:"gaussian blur",filter:{radius:(0,b.parseUnits)(e.Fltr["Rds "])}});case"MtnB":return v(v({},t),{type:"motion blur",filter:{angle:e.Fltr.Angl,distance:(0,b.parseUnits)(e.Fltr.Dstn)}});case"RdlB":return v(v({},t),{type:"radial blur",filter:{amount:e.Fltr.Amnt,method:b.BlrM.decode(e.Fltr.BlrM),quality:b.BlrQ.decode(e.Fltr.BlrQ)}});case"shapeBlur":return v(v({},t),{type:"shape blur",filter:{radius:(0,b.parseUnits)(e.Fltr["Rds "]),customShape:{name:e.Fltr.customShape["Nm  "],id:e.Fltr.customShape.Idnt}}});case"SmrB":return v(v({},t),{type:"smart blur",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh,quality:b.SmBQ.decode(e.Fltr.SmBQ),mode:b.SmBM.decode(e.Fltr.SmBM)}});case"surfaceBlur":return v(v({},t),{type:"surface blur",filter:{radius:(0,b.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dspl":return v(v({},t),{type:"displace",filter:{horizontalScale:e.Fltr.HrzS,verticalScale:e.Fltr.VrtS,displacementMap:b.DspM.decode(e.Fltr.DspM),undefinedAreas:b.UndA.decode(e.Fltr.UndA),displacementFile:{signature:e.Fltr.DspF.sig,path:e.Fltr.DspF.path}}});case"Pnch":return v(v({},t),{type:"pinch",filter:{amount:e.Fltr.Amnt}});case"Plr ":return v(v({},t),{type:"polar coordinates",filter:{conversion:b.Cnvr.decode(e.Fltr.Cnvr)}});case"Rple":return v(v({},t),{type:"ripple",filter:{amount:e.Fltr.Amnt,size:b.RplS.decode(e.Fltr.RplS)}});case"Shr ":return v(v({},t),{type:"shear",filter:{shearPoints:e.Fltr.ShrP.map(function(s){return{x:s.Hrzn,y:s.Vrtc}}),shearStart:e.Fltr.ShrS,shearEnd:e.Fltr.ShrE,undefinedAreas:b.UndA.decode(e.Fltr.UndA)}});case"Sphr":return v(v({},t),{type:"spherize",filter:{amount:e.Fltr.Amnt,mode:b.SphM.decode(e.Fltr.SphM)}});case"Twrl":return v(v({},t),{type:"twirl",filter:{angle:e.Fltr.Angl}});case"Wave":return v(v({},t),{type:"wave",filter:{numberOfGenerators:e.Fltr.NmbG,type:b.Wvtp.decode(e.Fltr.Wvtp),wavelength:{min:e.Fltr.WLMn,max:e.Fltr.WLMx},amplitude:{min:e.Fltr.AmMn,max:e.Fltr.AmMx},scale:{x:e.Fltr.SclH,y:e.Fltr.SclV},randomSeed:e.Fltr.RndS,undefinedAreas:b.UndA.decode(e.Fltr.UndA)}});case"ZgZg":return v(v({},t),{type:"zigzag",filter:{amount:e.Fltr.Amnt,ridges:e.Fltr.NmbR,style:b.ZZTy.decode(e.Fltr.ZZTy)}});case"AdNs":return v(v({},t),{type:"add noise",filter:{amount:(0,b.parsePercent)(e.Fltr.Nose),distribution:b.Dstr.decode(e.Fltr.Dstr),monochromatic:e.Fltr.Mnch,randomSeed:e.Fltr.FlRs}});case"DstS":return v(v({},t),{type:"dust and scratches",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh}});case"Mdn ":return v(v({},t),{type:"median",filter:{radius:(0,b.parseUnits)(e.Fltr["Rds "])}});case"denoise":return v(v({},t),{type:"reduce noise",filter:{preset:e.Fltr.preset,removeJpegArtifact:e.Fltr.removeJPEGArtifact,reduceColorNoise:(0,b.parsePercent)(e.Fltr.ClNs),sharpenDetails:(0,b.parsePercent)(e.Fltr.Shrp),channelDenoise:e.Fltr.channelDenoise.map(function(s){return v({channels:s.Chnl.map(b.Chnl.decode),amount:s.Amnt},s.EdgF?{preserveDetails:s.EdgF}:{})})}});case"ClrH":return v(v({},t),{type:"color halftone",filter:{radius:e.Fltr["Rds "],angle1:e.Fltr.Ang1,angle2:e.Fltr.Ang2,angle3:e.Fltr.Ang3,angle4:e.Fltr.Ang4}});case"Crst":return v(v({},t),{type:"crystallize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Mztn":return v(v({},t),{type:"mezzotint",filter:{type:b.MztT.decode(e.Fltr.MztT),randomSeed:e.Fltr.FlRs}});case"Msc ":return v(v({},t),{type:"mosaic",filter:{cellSize:(0,b.parseUnits)(e.Fltr.ClSz)}});case"Pntl":return v(v({},t),{type:"pointillize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Clds":return v(v({},t),{type:"clouds",filter:{randomSeed:e.Fltr.FlRs}});case"DfrC":return v(v({},t),{type:"difference clouds",filter:{randomSeed:e.Fltr.FlRs}});case"Fbrs":return v(v({},t),{type:"fibers",filter:{variance:e.Fltr.Vrnc,strength:e.Fltr.Strg,randomSeed:e.Fltr.RndS}});case"LnsF":return v(v({},t),{type:"lens flare",filter:{brightness:e.Fltr.Brgh,position:{x:e.Fltr.FlrC.Hrzn,y:e.Fltr.FlrC.Vrtc},lensType:b.Lns.decode(e.Fltr["Lns "])}});case"smartSharpen":return v(v({},t),{type:"smart sharpen",filter:{amount:(0,b.parsePercent)(e.Fltr.Amnt),radius:(0,b.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh,angle:e.Fltr.Angl,moreAccurate:e.Fltr.moreAccurate,blur:b.blurType.decode(e.Fltr.blur),preset:e.Fltr.preset,shadow:{fadeAmount:(0,b.parsePercent)(e.Fltr.sdwM.Amnt),tonalWidth:(0,b.parsePercent)(e.Fltr.sdwM.Wdth),radius:e.Fltr.sdwM["Rds "]},highlight:{fadeAmount:(0,b.parsePercent)(e.Fltr.hglM.Amnt),tonalWidth:(0,b.parsePercent)(e.Fltr.hglM.Wdth),radius:e.Fltr.hglM["Rds "]}}});case"UnsM":return v(v({},t),{type:"unsharp mask",filter:{amount:(0,b.parsePercent)(e.Fltr.Amnt),radius:(0,b.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dfs ":return v(v({},t),{type:"diffuse",filter:{mode:b.DfsM.decode(e.Fltr["Md  "]),randomSeed:e.Fltr.FlRs}});case"Embs":return v(v({},t),{type:"emboss",filter:{angle:e.Fltr.Angl,height:e.Fltr.Hght,amount:e.Fltr.Amnt}});case"Extr":return v(v({},t),{type:"extrude",filter:{type:b.ExtT.decode(e.Fltr.ExtT),size:e.Fltr.ExtS,depth:e.Fltr.ExtD,depthMode:b.ExtR.decode(e.Fltr.ExtR),randomSeed:e.Fltr.FlRs,solidFrontFaces:e.Fltr.ExtF,maskIncompleteBlocks:e.Fltr.ExtM}});case"Tls ":return v(v({},t),{type:"tiles",filter:{numberOfTiles:e.Fltr.TlNm,maximumOffset:e.Fltr.TlOf,fillEmptyAreaWith:b.FlCl.decode(e.Fltr.FlCl),randomSeed:e.Fltr.FlRs}});case"TrcC":return v(v({},t),{type:"trace contour",filter:{level:e.Fltr["Lvl "],edge:b.CntE.decode(e.Fltr["Edg "])}});case"Wnd ":return v(v({},t),{type:"wind",filter:{method:b.WndM.decode(e.Fltr.WndM),direction:b.Drct.decode(e.Fltr.Drct)}});case"Dntr":return v(v({},t),{type:"de-interlace",filter:{eliminate:b.IntE.decode(e.Fltr.IntE),newFieldsBy:b.IntC.decode(e.Fltr.IntC)}});case"Cstm":return v(v({},t),{type:"custom",filter:{scale:e.Fltr["Scl "],offset:e.Fltr.Ofst,matrix:e.Fltr.Mtrx}});case"HghP":return v(v({},t),{type:"high pass",filter:{radius:(0,b.parseUnits)(e.Fltr["Rds "])}});case"Mxm ":return v(v({},t),{type:"maximum",filter:{radius:(0,b.parseUnits)(e.Fltr["Rds "])}});case"Mnm ":return v(v({},t),{type:"minimum",filter:{radius:(0,b.parseUnits)(e.Fltr["Rds "])}});case"Ofst":return v(v({},t),{type:"offset",filter:{horizontal:e.Fltr.Hrzn,vertical:e.Fltr.Vrtc,undefinedAreas:b.FlMd.decode(e.Fltr["Fl  "])}});case"rigidTransform":return v(v({},t),{type:"puppet",filter:{rigidType:e.Fltr.rigidType,bounds:[{x:e.Fltr.PuX0,y:e.Fltr.PuY0},{x:e.Fltr.PuX1,y:e.Fltr.PuY1},{x:e.Fltr.PuX2,y:e.Fltr.PuY2},{x:e.Fltr.PuX3,y:e.Fltr.PuY3}],puppetShapeList:e.Fltr.puppetShapeList.map(function(s){return{rigidType:s.rigidType,originalVertexArray:sc(s.originalVertexArray),deformedVertexArray:sc(s.deformedVertexArray),indexArray:Array.from(X0(s.indexArray)),pinOffsets:ui(s.pinOffsets),posFinalPins:ui(s.posFinalPins),pinVertexIndices:s.pinVertexIndices,selectedPin:s.selectedPin,pinPosition:ui(s.PinP),pinRotation:s.PnRt,pinOverlay:s.PnOv,pinDepth:s.PnDp,meshQuality:s.meshQuality,meshExpansion:s.meshExpansion,meshRigidity:s.meshRigidity,imageResolution:s.imageResolution,meshBoundaryPath:{pathComponents:s.meshBoundaryPath.pathComponents.map(function(c){return{shapeOperation:c.shapeOperation.split(".")[1],paths:c.SbpL.map(function(l){return{closed:l.Clsp,points:l["Pts "].map(function(u){return{anchor:sr(u.Anch),forward:sr(u["Fwd "]),backward:sr(u["Bwd "]),smooth:u.Smoo}})}})}})}}})}});case"PbPl":{for(var r=[],i=e.Fltr,a=0;a<Xe.length&&i["PN".concat(Xe[a],"a")];a++)for(var o=0;o<Xe.length&&i["PN".concat(Xe[a]).concat(Xe[o])];o++)r.push({name:i["PN".concat(Xe[a]).concat(Xe[o])],value:i["PF".concat(Xe[a]).concat(Xe[o])]});return v(v({},t),{type:"oil paint plugin",filter:{name:e.Fltr.KnNm,gpu:e.Fltr.GpuY,lighting:e.Fltr.LIWy,parameters:r}})}case"HsbP":return v(v({},t),{type:"hsb/hsl",filter:{inputMode:b.ClrS.decode(e.Fltr.Inpt),rowOrder:b.ClrS.decode(e.Fltr.Otpt)}});case"oilPaint":return v(v({},t),{type:"oil paint",filter:{lightingOn:e.Fltr.lightingOn,stylization:e.Fltr.stylization,cleanliness:e.Fltr.cleanliness,brushScale:e.Fltr.brushScale,microBrush:e.Fltr.microBrush,lightDirection:e.Fltr.LghD,specularity:e.Fltr.specularity}});case"LqFy":return v(v({},t),{type:"liquify",filter:{liquifyMesh:e.Fltr.LqMe}});case"perspectiveWarpTransform":return v(v({},t),{type:"perspective warp",filter:{vertices:e.Fltr.vertices.map(sr),warpedVertices:e.Fltr.warpedVertices.map(sr),quads:e.Fltr.quads.map(function(s){return s.indices})}});case"Crvs":return v(v({},t),{type:"curves",filter:v({presetKind:b.presetKindType.decode(e.Fltr.presetKind)},e.Fltr.Adjs?{adjustments:e.Fltr.Adjs.map(function(s){var c=s.Chnl.map(b.Chnl.decode);if(s["Crv "])return{channels:c,curve:s["Crv "].map(function(l){var u={x:l.Hrzn,y:l.Vrtc};return l.Cnty&&(u.curved=!0),u})};if(s.Mpng)return{channels:c,values:s.Mpng};throw new Error("Unknown curve adjustment")})}:{})});case"BrgC":return v(v({},t),{type:"brightness/contrast",filter:{brightness:e.Fltr.Brgh,contrast:e.Fltr.Cntr,useLegacy:!!e.Fltr.useLegacy}});default:if(n.throwForMissingFeatures)throw new Error("Unknown filter classId: ".concat(e.Fltr._classID));return}else switch(e.filterID){case 1098281575:return v(v({},t),{type:"average"});case 1114403360:return v(v({},t),{type:"blur"});case 1114403405:return v(v({},t),{type:"blur more"});case 1148416099:return v(v({},t),{type:"despeckle"});case 1180922912:return v(v({},t),{type:"facet"});case 1181902701:return v(v({},t),{type:"fragment"});case 1399353968:return v(v({},t),{type:"sharpen"});case 1399353925:return v(v({},t),{type:"sharpen edges"});case 1399353933:return v(v({},t),{type:"sharpen more"});case 1181639749:return v(v({},t),{type:"find edges"});case 1399616122:return v(v({},t),{type:"solarize"});case 1314149187:return v(v({},t),{type:"ntsc colors"});case 1231976050:return v(v({},t),{type:"invert"});default:if(n.throwForMissingFeatures)throw new Error("Unknown filterID: ".concat(e.filterID))}}function Y0(e,n){return{enabled:e.enab,validAtPosition:e.validAtPosition,maskEnabled:e.filterMaskEnable,maskLinked:e.filterMaskLinked,maskExtendWithWhite:e.filterMaskExtendWithWhite,list:e.filterFXList.map(function(t){return q0(t,n)}).filter(function(t){return!!t})}}function yt(e){return(0,b.unitsValue)(e.radius,"radius")}function K0(e){var n={_name:"",_classID:"filterFX","Nm  ":e.name,blendOptions:{_name:"",_classID:"blendOptions",Opct:(0,b.unitsPercentF)(e.opacity),"Md  ":b.BlnM.encode(e.blendMode)},enab:e.enabled,hasoptions:e.hasOptions,FrgC:(0,b.serializeColor)(e.foregroundColor),BckC:(0,b.serializeColor)(e.backgroundColor)};switch(e.type){case"average":return v(v({},n),{filterID:1098281575});case"blur":return v(v({},n),{filterID:1114403360});case"blur more":return v(v({},n),{filterID:1114403405});case"box blur":return v(v({},n),{Fltr:{_name:"Box Blur",_classID:"boxblur","Rds ":yt(e.filter)},filterID:697});case"gaussian blur":return v(v({},n),{Fltr:{_name:"Gaussian Blur",_classID:"GsnB","Rds ":yt(e.filter)},filterID:1198747202});case"motion blur":return v(v({},n),{Fltr:{_name:"Motion Blur",_classID:"MtnB",Angl:e.filter.angle,Dstn:(0,b.unitsValue)(e.filter.distance,"distance")},filterID:1299476034});case"radial blur":return v(v({},n),{Fltr:{_name:"Radial Blur",_classID:"RdlB",Amnt:e.filter.amount,BlrM:b.BlrM.encode(e.filter.method),BlrQ:b.BlrQ.encode(e.filter.quality)},filterID:1382313026});case"shape blur":return v(v({},n),{Fltr:{_name:"Shape Blur",_classID:"shapeBlur","Rds ":yt(e.filter),customShape:{_name:"",_classID:"customShape","Nm  ":e.filter.customShape.name,Idnt:e.filter.customShape.id}},filterID:702});case"smart blur":return v(v({},n),{Fltr:{_name:"Smart Blur",_classID:"SmrB","Rds ":e.filter.radius,Thsh:e.filter.threshold,SmBQ:b.SmBQ.encode(e.filter.quality),SmBM:b.SmBM.encode(e.filter.mode)},filterID:1399681602});case"surface blur":return v(v({},n),{Fltr:{_name:"Surface Blur",_classID:"surfaceBlur","Rds ":yt(e.filter),Thsh:e.filter.threshold},filterID:701});case"displace":return v(v({},n),{Fltr:{_name:"Displace",_classID:"Dspl",HrzS:e.filter.horizontalScale,VrtS:e.filter.verticalScale,DspM:b.DspM.encode(e.filter.displacementMap),UndA:b.UndA.encode(e.filter.undefinedAreas),DspF:{sig:e.filter.displacementFile.signature,path:e.filter.displacementFile.path}},filterID:1148416108});case"pinch":return v(v({},n),{Fltr:{_name:"Pinch",_classID:"Pnch",Amnt:e.filter.amount},filterID:1349411688});case"polar coordinates":return v(v({},n),{Fltr:{_name:"Polar Coordinates",_classID:"Plr ",Cnvr:b.Cnvr.encode(e.filter.conversion)},filterID:1349284384});case"ripple":return v(v({},n),{Fltr:{_name:"Ripple",_classID:"Rple",Amnt:e.filter.amount,RplS:b.RplS.encode(e.filter.size)},filterID:1383099493});case"shear":return v(v({},n),{Fltr:{_name:"Shear",_classID:"Shr ",ShrP:e.filter.shearPoints.map(function(c){return{_name:"",_classID:"Pnt ",Hrzn:c.x,Vrtc:c.y}}),UndA:b.UndA.encode(e.filter.undefinedAreas),ShrS:e.filter.shearStart,ShrE:e.filter.shearEnd},filterID:1399353888});case"spherize":return v(v({},n),{Fltr:{_name:"Spherize",_classID:"Sphr",Amnt:e.filter.amount,SphM:b.SphM.encode(e.filter.mode)},filterID:1399875698});case"twirl":return v(v({},n),{Fltr:{_name:"Twirl",_classID:"Twrl",Angl:e.filter.angle},filterID:1417114220});case"wave":return v(v({},n),{Fltr:{_name:"Wave",_classID:"Wave",Wvtp:b.Wvtp.encode(e.filter.type),NmbG:e.filter.numberOfGenerators,WLMn:e.filter.wavelength.min,WLMx:e.filter.wavelength.max,AmMn:e.filter.amplitude.min,AmMx:e.filter.amplitude.max,SclH:e.filter.scale.x,SclV:e.filter.scale.y,UndA:b.UndA.encode(e.filter.undefinedAreas),RndS:e.filter.randomSeed},filterID:1466005093});case"zigzag":return v(v({},n),{Fltr:{_name:"ZigZag",_classID:"ZgZg",Amnt:e.filter.amount,NmbR:e.filter.ridges,ZZTy:b.ZZTy.encode(e.filter.style)},filterID:1516722791});case"add noise":return v(v({},n),{Fltr:{_name:"Add Noise",_classID:"AdNs",Dstr:b.Dstr.encode(e.filter.distribution),Nose:(0,b.unitsPercentF)(e.filter.amount),Mnch:e.filter.monochromatic,FlRs:e.filter.randomSeed},filterID:1097092723});case"despeckle":return v(v({},n),{filterID:1148416099});case"dust and scratches":return v(v({},n),{Fltr:{_name:"Dust & Scratches",_classID:"DstS","Rds ":e.filter.radius,Thsh:e.filter.threshold},filterID:1148417107});case"median":return v(v({},n),{Fltr:{_name:"Median",_classID:"Mdn ","Rds ":yt(e.filter)},filterID:1298427424});case"reduce noise":return v(v({},n),{Fltr:{_name:"Reduce Noise",_classID:"denoise",ClNs:(0,b.unitsPercentF)(e.filter.reduceColorNoise),Shrp:(0,b.unitsPercentF)(e.filter.sharpenDetails),removeJPEGArtifact:e.filter.removeJpegArtifact,channelDenoise:e.filter.channelDenoise.map(function(c){return v({_name:"",_classID:"channelDenoiseParams",Chnl:c.channels.map(function(l){return b.Chnl.encode(l)}),Amnt:c.amount},c.preserveDetails?{EdgF:c.preserveDetails}:{})}),preset:e.filter.preset},filterID:633});case"color halftone":return v(v({},n),{Fltr:{_name:"Color Halftone",_classID:"ClrH","Rds ":e.filter.radius,Ang1:e.filter.angle1,Ang2:e.filter.angle2,Ang3:e.filter.angle3,Ang4:e.filter.angle4},filterID:1131180616});case"crystallize":return v(v({},n),{Fltr:{_name:"Crystallize",_classID:"Crst",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1131574132});case"facet":return v(v({},n),{filterID:1180922912});case"fragment":return v(v({},n),{filterID:1181902701});case"mezzotint":return v(v({},n),{Fltr:{_name:"Mezzotint",_classID:"Mztn",MztT:b.MztT.encode(e.filter.type),FlRs:e.filter.randomSeed},filterID:1299870830});case"mosaic":return v(v({},n),{Fltr:{_name:"Mosaic",_classID:"Msc ",ClSz:(0,b.unitsValue)(e.filter.cellSize,"cellSize")},filterID:1299407648});case"pointillize":return v(v({},n),{Fltr:{_name:"Pointillize",_classID:"Pntl",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1349416044});case"clouds":return v(v({},n),{Fltr:{_name:"Clouds",_classID:"Clds",FlRs:e.filter.randomSeed},filterID:1131177075});case"difference clouds":return v(v({},n),{Fltr:{_name:"Difference Clouds",_classID:"DfrC",FlRs:e.filter.randomSeed},filterID:1147564611});case"fibers":return v(v({},n),{Fltr:{_name:"Fibers",_classID:"Fbrs",Vrnc:e.filter.variance,Strg:e.filter.strength,RndS:e.filter.randomSeed},filterID:1180856947});case"lens flare":return v(v({},n),{Fltr:{_name:"Lens Flare",_classID:"LnsF",Brgh:e.filter.brightness,FlrC:{_name:"",_classID:"Pnt ",Hrzn:e.filter.position.x,Vrtc:e.filter.position.y},"Lns ":b.Lns.encode(e.filter.lensType)},filterID:1282306886});case"sharpen":return v(v({},n),{filterID:1399353968});case"sharpen edges":return v(v({},n),{filterID:1399353925});case"sharpen more":return v(v({},n),{filterID:1399353933});case"smart sharpen":return v(v({},n),{Fltr:{_name:"Smart Sharpen",_classID:"smartSharpen",Amnt:(0,b.unitsPercentF)(e.filter.amount),"Rds ":yt(e.filter),Thsh:e.filter.threshold,Angl:e.filter.angle,moreAccurate:e.filter.moreAccurate,blur:b.blurType.encode(e.filter.blur),preset:e.filter.preset,sdwM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:(0,b.unitsPercentF)(e.filter.shadow.fadeAmount),Wdth:(0,b.unitsPercentF)(e.filter.shadow.tonalWidth),"Rds ":e.filter.shadow.radius},hglM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:(0,b.unitsPercentF)(e.filter.highlight.fadeAmount),Wdth:(0,b.unitsPercentF)(e.filter.highlight.tonalWidth),"Rds ":e.filter.highlight.radius}},filterID:698});case"unsharp mask":return v(v({},n),{Fltr:{_name:"Unsharp Mask",_classID:"UnsM",Amnt:(0,b.unitsPercentF)(e.filter.amount),"Rds ":yt(e.filter),Thsh:e.filter.threshold},filterID:1433301837});case"diffuse":return v(v({},n),{Fltr:{_name:"Diffuse",_classID:"Dfs ","Md  ":b.DfsM.encode(e.filter.mode),FlRs:e.filter.randomSeed},filterID:1147564832});case"emboss":return v(v({},n),{Fltr:{_name:"Emboss",_classID:"Embs",Angl:e.filter.angle,Hght:e.filter.height,Amnt:e.filter.amount},filterID:1164796531});case"extrude":return v(v({},n),{Fltr:{_name:"Extrude",_classID:"Extr",ExtS:e.filter.size,ExtD:e.filter.depth,ExtF:e.filter.solidFrontFaces,ExtM:e.filter.maskIncompleteBlocks,ExtT:b.ExtT.encode(e.filter.type),ExtR:b.ExtR.encode(e.filter.depthMode),FlRs:e.filter.randomSeed},filterID:1165522034});case"find edges":return v(v({},n),{filterID:1181639749});case"solarize":return v(v({},n),{filterID:1399616122});case"tiles":return v(v({},n),{Fltr:{_name:"Tiles",_classID:"Tls ",TlNm:e.filter.numberOfTiles,TlOf:e.filter.maximumOffset,FlCl:b.FlCl.encode(e.filter.fillEmptyAreaWith),FlRs:e.filter.randomSeed},filterID:1416393504});case"trace contour":return v(v({},n),{Fltr:{_name:"Trace Contour",_classID:"TrcC","Lvl ":e.filter.level,"Edg ":b.CntE.encode(e.filter.edge)},filterID:1416782659});case"wind":return v(v({},n),{Fltr:{_name:"Wind",_classID:"Wnd ",WndM:b.WndM.encode(e.filter.method),Drct:b.Drct.encode(e.filter.direction)},filterID:1466852384});case"de-interlace":return v(v({},n),{Fltr:{_name:"De-Interlace",_classID:"Dntr",IntE:b.IntE.encode(e.filter.eliminate),IntC:b.IntC.encode(e.filter.newFieldsBy)},filterID:1148089458});case"ntsc colors":return v(v({},n),{filterID:1314149187});case"invert":return v(v({},n),{filterID:1231976050});case"custom":return v(v({},n),{Fltr:{_name:"Custom",_classID:"Cstm","Scl ":e.filter.scale,Ofst:e.filter.offset,Mtrx:e.filter.matrix},filterID:1131639917});case"high pass":return v(v({},n),{Fltr:{_name:"High Pass",_classID:"HghP","Rds ":yt(e.filter)},filterID:1214736464});case"maximum":return v(v({},n),{Fltr:{_name:"Maximum",_classID:"Mxm ","Rds ":yt(e.filter)},filterID:1299737888});case"minimum":return v(v({},n),{Fltr:{_name:"Minimum",_classID:"Mnm ","Rds ":yt(e.filter)},filterID:1299082528});case"offset":return v(v({},n),{Fltr:{_name:"Offset",_classID:"Ofst",Hrzn:e.filter.horizontal,Vrtc:e.filter.vertical,"Fl  ":b.FlMd.encode(e.filter.undefinedAreas)},filterID:1332114292});case"puppet":return v(v({},n),{Fltr:{_name:"Rigid Transform",_classID:"rigidTransform",null:["Ordn.Trgt"],rigidType:e.filter.rigidType,puppetShapeList:e.filter.puppetShapeList.map(function(c){return{_name:"",_classID:"puppetShape",rigidType:c.rigidType,VrsM:1,VrsN:0,originalVertexArray:za(new Float32Array(or(c.originalVertexArray))),deformedVertexArray:za(new Float32Array(or(c.deformedVertexArray))),indexArray:za(new Uint32Array(c.indexArray)),pinOffsets:or(c.pinOffsets),posFinalPins:or(c.posFinalPins),pinVertexIndices:c.pinVertexIndices,PinP:or(c.pinPosition),PnRt:c.pinRotation,PnOv:c.pinOverlay,PnDp:c.pinDepth,meshQuality:c.meshQuality,meshExpansion:c.meshExpansion,meshRigidity:c.meshRigidity,imageResolution:c.imageResolution,meshBoundaryPath:{_name:"",_classID:"pathClass",pathComponents:c.meshBoundaryPath.pathComponents.map(function(l){return{_name:"",_classID:"PaCm",shapeOperation:"shapeOperation.".concat(l.shapeOperation),SbpL:l.paths.map(function(u){return{_name:"",_classID:"Sbpl",Clsp:u.closed,"Pts ":u.points.map(function(d){return{_name:"",_classID:"Pthp",Anch:lr(d.anchor),"Fwd ":lr(d.forward),"Bwd ":lr(d.backward),Smoo:d.smooth}})}})}})},selectedPin:c.selectedPin}}),PuX0:e.filter.bounds[0].x,PuX1:e.filter.bounds[1].x,PuX2:e.filter.bounds[2].x,PuX3:e.filter.bounds[3].x,PuY0:e.filter.bounds[0].y,PuY1:e.filter.bounds[1].y,PuY2:e.filter.bounds[2].y,PuY3:e.filter.bounds[3].y},filterID:991});case"oil paint plugin":{for(var t={},r=0;r<e.filter.parameters.length;r++){var i=e.filter.parameters[r],a=i.name,o=i.value,s="".concat(Xe[Math.floor(r/Xe.length)]).concat(Xe[r%Xe.length]);t["PN".concat(s)]=a,t["PT".concat(s)]=0,t["PF".concat(s)]=o}return v(v({},n),{Fltr:v({_name:"Oil Paint Plugin",_classID:"PbPl",KnNm:e.filter.name,GpuY:e.filter.gpu,LIWy:e.filter.lighting,FPth:"1"},t),filterID:1348620396})}case"oil paint":return v(v({},n),{Fltr:{_name:"Oil Paint",_classID:"oilPaint",lightingOn:e.filter.lightingOn,stylization:e.filter.stylization,cleanliness:e.filter.cleanliness,brushScale:e.filter.brushScale,microBrush:e.filter.microBrush,LghD:e.filter.lightDirection,specularity:e.filter.specularity},filterID:1122});case"liquify":return v(v({},n),{Fltr:{_name:"Liquify",_classID:"LqFy",LqMe:e.filter.liquifyMesh},filterID:1282492025});case"perspective warp":return v(v({},n),{Fltr:{_name:"Perspective Warp",_classID:"perspectiveWarpTransform",vertices:e.filter.vertices.map(lr),warpedVertices:e.filter.warpedVertices.map(lr),quads:e.filter.quads.map(function(c){return{indices:c}})},filterID:442});case"curves":return v(v({},n),{Fltr:v({_name:"Curves",_classID:"Crvs",presetKind:b.presetKindType.encode(e.filter.presetKind)},e.filter.adjustments?{Adjs:e.filter.adjustments.map(function(c){return"curve"in c?{_name:"",_classID:"CrvA",Chnl:c.channels.map(b.Chnl.encode),"Crv ":c.curve.map(function(l){return v({_name:"",_classID:"Pnt ",Hrzn:l.x,Vrtc:l.y},l.curved?{Cnty:!0}:{})})}:{_name:"",_classID:"CrvA",Chnl:c.channels.map(b.Chnl.encode),Mpng:c.values}})}:{}),filterID:1131574899});case"brightness/contrast":return v(v({},n),{Fltr:{_name:"Brightness/Contrast",_classID:"BrgC",Brgh:e.filter.brightness,Cntr:e.filter.contrast,useLegacy:!!e.filter.useLegacy},filterID:1114793795});default:throw new Error("Unknow filter type: ".concat(e.type))}}function gc(e){if(e.warp)return e.warp;if(!e.width||!e.height)throw new Error("You must provide width and height of the linked image in placedLayer");var n=e.width,t=e.height,r=0,i=n/3,a=n*2/3,o=n,s=0,c=t/3,l=t*2/3,u=t;return{style:"custom",value:0,perspective:0,perspectiveOther:0,rotate:"horizontal",bounds:{top:{value:0,units:"Pixels"},left:{value:0,units:"Pixels"},bottom:{value:t,units:"Pixels"},right:{value:n,units:"Pixels"}},uOrder:4,vOrder:4,customEnvelopeWarp:{meshPoints:[{x:r,y:s},{x:i,y:s},{x:a,y:s},{x:o,y:s},{x:r,y:c},{x:i,y:c},{x:a,y:c},{x:o,y:c},{x:r,y:l},{x:i,y:l},{x:a,y:l},{x:o,y:l},{x:r,y:u},{x:i,y:u},{x:a,y:u},{x:o,y:u}]}}}V("SoLd",ue("placedLayer"),function(e,n,t){if((0,p.readSignature)(e)!=="soLD")throw new Error("Invalid SoLd type");var r=(0,p.readInt32)(e);if(r!==4&&r!==5)throw new Error("Invalid SoLd version");var i=(0,b.readVersionAndDescriptor)(e,!0);n.placedLayer={id:i.Idnt,placed:i.placed,type:Dn[i.Type],pageNumber:i.PgNm,totalPages:i.totalPages,frameStep:(0,b.frac)(i.frameStep),duration:(0,b.frac)(i.duration),frameCount:i.frameCount,transform:i.Trnf,width:i["Sz  "].Wdth,height:i["Sz  "].Hght,resolution:(0,b.parseUnits)(i.Rslt),warp:vc(i.quiltWarp||i.warp)},i.nonAffineTransform&&i.nonAffineTransform.some(function(a,o){return a!==i.Trnf[o]})&&(n.placedLayer.nonAffineTransform=i.nonAffineTransform),i.Crop&&(n.placedLayer.crop=i.Crop),i.comp&&(n.placedLayer.comp=i.comp),i.compInfo&&(n.placedLayer.compInfo={compID:i.compInfo.compID,originalCompID:i.compInfo.originalCompID}),i.filterFX&&(n.placedLayer.filter=Y0(i.filterFX,e)),(0,p.skipBytes)(e,t())},function(e,n){var t,r;(0,g.writeSignature)(e,"soLD"),(0,g.writeInt32)(e,4);var i=n.placedLayer;if(!i.id||typeof i.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(i.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");var a=v(v({Idnt:i.id,placed:(t=i.placed)!==null&&t!==void 0?t:i.id,PgNm:i.pageNumber||1,totalPages:i.totalPages||1},i.crop?{Crop:i.crop}:{}),{frameStep:i.frameStep||{numerator:0,denominator:600},duration:i.duration||{numerator:0,denominator:600},frameCount:i.frameCount||0,Annt:16,Type:Dn.indexOf(i.type),Trnf:i.transform,nonAffineTransform:(r=i.nonAffineTransform)!==null&&r!==void 0?r:i.transform,warp:fi(gc(i)),"Sz  ":{_name:"",_classID:"Pnt ",Wdth:i.width||0,Hght:i.height||0},Rslt:i.resolution?(0,b.unitsValue)(i.resolution,"resolution"):{units:"Density",value:72}});if(i.filter&&(a.filterFX={_name:"",_classID:"filterFXStyle",enab:i.filter.enabled,validAtPosition:i.filter.validAtPosition,filterMaskEnable:i.filter.maskEnabled,filterMaskLinked:i.filter.maskLinked,filterMaskExtendWithWhite:i.filter.maskExtendWithWhite,filterFXList:i.filter.list.map(function(s){return K0(s)})}),i.warp&&Ha(i.warp)){var o=fi(i.warp);a.quiltWarp=o,a.warp={warpStyle:"warpStyle.warpNone",warpValue:o.warpValue,warpPerspective:o.warpPerspective,warpPerspectiveOther:o.warpPerspectiveOther,warpRotate:o.warpRotate,bounds:o.bounds,uOrder:o.uOrder,vOrder:o.vOrder}}else delete a.quiltWarp;i.comp&&(a.comp=i.comp),i.compInfo&&(a.compInfo=i.compInfo),(0,b.writeVersionAndDescriptor)(e,"","null",a,a.quiltWarp?"quiltWarp":"warp")});En("SoLE","SoLd");V("fxrp",ue("referencePoint"),function(e,n){n.referencePoint={x:(0,p.readFloat64)(e),y:(0,p.readFloat64)(e)}},function(e,n){(0,g.writeFloat64)(e,n.referencePoint.x),(0,g.writeFloat64)(e,n.referencePoint.y)});V("Lr16",function(){return!1},function(e,n,t,r,i){(0,p.readLayerInfo)(e,r,i)},function(e,n){});V("Lr32",function(){return!1},function(e,n,t,r,i){(0,p.readLayerInfo)(e,r,i)},function(e,n){});V("LMsk",ue("userMask"),function(e,n){n.userMask={colorSpace:(0,p.readColor)(e),opacity:(0,p.readUint16)(e)/255};var t=(0,p.readUint8)(e);if(t!==128)throw new Error("Invalid flag value");(0,p.skipBytes)(e,1)},function(e,n){var t=n.userMask;(0,g.writeColor)(e,t.colorSpace),(0,g.writeUint16)(e,(0,qe.clamp)(t.opacity,0,1)*255),(0,g.writeUint8)(e,128),(0,g.writeZeros)(e,1)});qe.MOCK_HANDLERS?V("Patt",function(e){return e._Patt!==void 0},function(e,n,t){n._Patt=(0,p.readBytes)(e,t())},function(e,n){return!1}):V("Patt",function(e){return!e},function(e,n,t){t()&&(0,p.skipBytes)(e,t())},function(e,n){});qe.MOCK_HANDLERS&&V("CAI ",function(e){return e._CAI_!==void 0},function(e,n,t){n._CAI_=(0,p.readBytes)(e,t())},function(e,n){(0,g.writeBytes)(e,n._CAI_)});qe.MOCK_HANDLERS&&V("OCIO",function(e){return e._OCIO!==void 0},function(e,n,t){n._OCIO=(0,p.readBytes)(e,t())},function(e,n){(0,g.writeBytes)(e,n._OCIO)});qe.MOCK_HANDLERS&&V("GenI",function(e){return e._GenI!==void 0},function(e,n,t){var r=(0,b.readVersionAndDescriptor)(e,!0);console.log("GenI",(Oa(),gi(La)).inspect(r,!1,99,!0)),n._GenI=(0,p.readBytes)(e,t())},function(e,n){(0,g.writeBytes)(e,n._GenI)});function lc(e){var n=(0,p.readInt32)(e),t=(0,p.readInt32)(e),r=(0,p.readInt32)(e),i=(0,p.readInt32)(e);return{top:n,left:t,bottom:r,right:i}}function cc(e,n){(0,g.writeInt32)(e,n.top),(0,g.writeInt32)(e,n.left),(0,g.writeInt32)(e,n.bottom),(0,g.writeInt32)(e,n.right)}V("Anno",function(e){return e.annotations!==void 0},function(e,n,t){var r=(0,p.readUint16)(e),i=(0,p.readUint16)(e);if(r!==2||i!==1)throw new Error("Invalid Anno version");for(var a=(0,p.readUint32)(e),o=[],s=0;s<a;s++){(0,p.readUint32)(e);var c=(0,p.readSignature)(e),l=!!(0,p.readUint8)(e);(0,p.readUint8)(e),(0,p.readUint16)(e);var u=lc(e),d=lc(e),f=(0,p.readColor)(e),h=(0,p.readPascalString)(e,2),m=(0,p.readPascalString)(e,2),w=(0,p.readPascalString)(e,2);(0,p.readUint32)(e),(0,p.readSignature)(e);var F=(0,p.readUint32)(e),y=void 0;if(c==="txtA")F>=2&&(0,p.readUint16)(e)===65279?y=(0,p.readUnicodeStringWithLength)(e,(F-2)/2):(e.offset-=2,y=(0,p.readAsciiString)(e,F)),y=y.replace(/\r/g,`
`);else if(c==="sndA")y=(0,p.readBytes)(e,F);else throw new Error("Unknown annotation type");o.push({type:c==="txtA"?"text":"sound",open:l,iconLocation:u,popupLocation:d,color:f,author:h,name:m,date:w,data:y})}n.annotations=o,(0,p.skipBytes)(e,t())},function(e,n){var t=n.annotations;(0,g.writeUint16)(e,2),(0,g.writeUint16)(e,1),(0,g.writeUint32)(e,t.length);for(var r=0,i=t;r<i.length;r++){var a=i[r],o=a.type==="sound";if(o&&!(a.data instanceof Uint8Array))throw new Error("Sound annotation data should be Uint8Array");if(!o&&typeof a.data!="string")throw new Error("Text annotation data should be string");var s=e.offset;(0,g.writeUint32)(e,0),(0,g.writeSignature)(e,o?"sndA":"txtA"),(0,g.writeUint8)(e,a.open?1:0),(0,g.writeUint8)(e,28),(0,g.writeUint16)(e,1),cc(e,a.iconLocation),cc(e,a.popupLocation),(0,g.writeColor)(e,a.color),(0,g.writePascalString)(e,a.author||"",2),(0,g.writePascalString)(e,a.name||"",2),(0,g.writePascalString)(e,a.date||"",2);var c=e.offset;(0,g.writeUint32)(e,0),(0,g.writeSignature)(e,o?"sndM":"txtC"),(0,g.writeUint32)(e,0);var l=e.offset;if(o)(0,g.writeBytes)(e,a.data);else{(0,g.writeUint16)(e,65279);for(var u=a.data.replace(/\n/g,"\r"),d=0;d<u.length;d++)(0,g.writeUint16)(e,u.charCodeAt(d))}e.view.setUint32(s,e.offset-s,!1),e.view.setUint32(c,e.offset-c,!1),e.view.setUint32(l-4,e.offset-l,!1)}});function mc(e){V(e,function(n){var t=n;return!(!t.linkedFiles||!t.linkedFiles.length||e==="lnkE"&&!t.linkedFiles.some(function(r){return r.linkedFile}))},function(n,t,r,i){var a=t;for(a.linkedFiles=a.linkedFiles||[];r()>8;){var o=Ba(n),s=n.offset,c=(0,p.readSignature)(n),l=(0,p.readInt32)(n),u=(0,p.readPascalString)(n,1),d=(0,p.readUnicodeString)(n),f=(0,p.readSignature)(n).trim(),h=(0,p.readSignature)(n).trim(),m=Ba(n),w=(0,p.readUint8)(n),F=w?(0,b.readVersionAndDescriptor)(n):void 0,y=c==="liFE"?(0,b.readVersionAndDescriptor)(n):void 0,_={id:u,name:d};if(f&&(_.type=f),h&&(_.creator=h),F&&(_.descriptor={compInfo:{compID:F.compInfo.compID,originalCompID:F.compInfo.originalCompID}}),c==="liFE"&&l>3){var I=(0,p.readInt32)(n),S=(0,p.readUint8)(n),C=(0,p.readUint8)(n),E=(0,p.readUint8)(n),k=(0,p.readUint8)(n),A=(0,p.readFloat64)(n),L=Math.floor(A),T=(A-L)*1e3;_.time=new Date(Date.UTC(I,S,C,E,k,L,T)).toISOString()}var O=c==="liFE"?Ba(n):0;for(c==="liFA"&&(0,p.skipBytes)(n,8),c==="liFD"&&(_.data=(0,p.readBytes)(n,m)),l>=5&&(_.childDocumentID=(0,p.readUnicodeString)(n)),l>=6&&(_.assetModTime=(0,p.readFloat64)(n)),l>=7&&(_.assetLockedState=(0,p.readUint8)(n)),c==="liFE"&&l===2&&(_.data=(0,p.readBytes)(n,O)),n.skipLinkedFilesData&&(_.data=void 0),e==="lnkE"&&(_.linkedFile={fileSize:O,name:(y==null?void 0:y["Nm  "])||"",fullPath:(y==null?void 0:y.fullPath)||"",originalPath:(y==null?void 0:y.originalPath)||"",relativePath:(y==null?void 0:y.relPath)||""}),a.linkedFiles.push(_);o%4;)o++;n.offset=s+o}(0,p.skipBytes)(n,r())},function(n,t){for(var r,i,a,o,s,c,l,u,d,f=t,h=0,m=f.linkedFiles;h<m.length;h++){var w=m[h];if(e==="lnkE"==!!w.linkedFile){var F=2;w.assetLockedState!=null?F=7:w.assetModTime!=null?F=6:w.childDocumentID!=null?F=5:e=="lnkE"&&(F=3),Ra(n,0);var y=n.offset;if((0,g.writeSignature)(n,e==="lnkE"?"liFE":w.data?"liFD":"liFA"),(0,g.writeInt32)(n,F),!w.id||typeof w.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(w.id))throw new Error("Linked file ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if((0,g.writePascalString)(n,w.id,1),(0,g.writeUnicodeStringWithPadding)(n,w.name||""),(0,g.writeSignature)(n,w.type?"".concat(w.type,"    ").substring(0,4):"    "),(0,g.writeSignature)(n,w.creator?"".concat(w.creator,"    ").substring(0,4):"\0\0\0\0"),Ra(n,w.data?w.data.byteLength:0),w.descriptor&&w.descriptor.compInfo){var _={compInfo:{compID:w.descriptor.compInfo.compID,originalCompID:w.descriptor.compInfo.originalCompID}};(0,g.writeUint8)(n,1),(0,b.writeVersionAndDescriptor)(n,"","null",_)}else(0,g.writeUint8)(n,0);if(e==="lnkE"){var _={descVersion:2,"Nm  ":(i=(r=w.linkedFile)===null||r===void 0?void 0:r.name)!==null&&i!==void 0?i:"",fullPath:(o=(a=w.linkedFile)===null||a===void 0?void 0:a.fullPath)!==null&&o!==void 0?o:"",originalPath:(c=(s=w.linkedFile)===null||s===void 0?void 0:s.originalPath)!==null&&c!==void 0?c:"",relPath:(u=(l=w.linkedFile)===null||l===void 0?void 0:l.relativePath)!==null&&u!==void 0?u:""};(0,b.writeVersionAndDescriptor)(n,"","ExternalFileLink",_);var I=w.time?new Date(w.time):new Date;(0,g.writeInt32)(n,I.getUTCFullYear()),(0,g.writeUint8)(n,I.getUTCMonth()),(0,g.writeUint8)(n,I.getUTCDate()),(0,g.writeUint8)(n,I.getUTCHours()),(0,g.writeUint8)(n,I.getUTCMinutes()),(0,g.writeFloat64)(n,I.getUTCSeconds()+I.getUTCMilliseconds()/1e3)}w.data?(0,g.writeBytes)(n,w.data):Ra(n,((d=w.linkedFile)===null||d===void 0?void 0:d.fileSize)||0),F>=5&&(0,g.writeUnicodeStringWithPadding)(n,w.childDocumentID||""),F>=6&&(0,g.writeFloat64)(n,w.assetModTime||0),F>=7&&(0,g.writeUint8)(n,w.assetLockedState||0);var S=n.offset-y;for(n.view.setUint32(y-4,S,!1);S%4;)S++,(0,g.writeUint8)(n,0)}}})}mc("lnk2");mc("lnkE");En("lnkD","lnk2");En("lnk3","lnk2");V("pths",ue("pathList"),function(e,n){var t=(0,b.readVersionAndDescriptor)(e,!0);n.pathList=[]},function(e,n){var t={pathList:[]};(0,b.writeVersionAndDescriptor)(e,"","pathsDataClass",t)});V("lyvr",ue("version"),function(e,n){return n.version=(0,p.readUint32)(e)},function(e,n){return(0,g.writeUint32)(e,n.version)});V("lfxs",function(){return!1},function(e,n,t){var r=(0,p.readUint32)(e);if(r!==0)throw new Error("Invalid lfxs version");var i=(0,b.readVersionAndDescriptor)(e);n.effects=(0,b.parseEffects)(i,!!e.logMissingFeatures),(0,p.skipBytes)(e,t())},function(e,n,t,r){var i=(0,b.serializeEffects)(n.effects,!!r.logMissingFeatures,!0);(0,g.writeUint32)(e,0),(0,b.writeVersionAndDescriptor)(e,"","null",i)});function Me(e){return function(n){return!!n.adjustment&&n.adjustment.type===e}}V("brit",Me("brightness/contrast"),function(e,n,t){n.adjustment||(n.adjustment={type:"brightness/contrast",brightness:(0,p.readInt16)(e),contrast:(0,p.readInt16)(e),meanValue:(0,p.readInt16)(e),labColorOnly:!!(0,p.readUint8)(e),useLegacy:!0}),(0,p.skipBytes)(e,t())},function(e,n){var t,r=n.adjustment;(0,g.writeInt16)(e,r.brightness||0),(0,g.writeInt16)(e,r.contrast||0),(0,g.writeInt16)(e,(t=r.meanValue)!==null&&t!==void 0?t:127),(0,g.writeUint8)(e,r.labColorOnly?1:0),(0,g.writeZeros)(e,1)});function oi(e){var n=(0,p.readInt16)(e),t=(0,p.readInt16)(e),r=(0,p.readInt16)(e),i=(0,p.readInt16)(e),a=(0,p.readInt16)(e)/100;return{shadowInput:n,highlightInput:t,shadowOutput:r,highlightOutput:i,midtoneInput:a}}function cr(e,n){(0,g.writeInt16)(e,n.shadowInput),(0,g.writeInt16)(e,n.highlightInput),(0,g.writeInt16)(e,n.shadowOutput),(0,g.writeInt16)(e,n.highlightOutput),(0,g.writeInt16)(e,Math.round(n.midtoneInput*100))}V("levl",Me("levels"),function(e,n,t){if((0,p.readUint16)(e)!==2)throw new Error("Invalid levl version");n.adjustment=v(v({},n.adjustment),{type:"levels",rgb:oi(e),red:oi(e),green:oi(e),blue:oi(e)}),(0,p.skipBytes)(e,t())},function(e,n){var t=n.adjustment,r={shadowInput:0,highlightInput:255,shadowOutput:0,highlightOutput:255,midtoneInput:1};(0,g.writeUint16)(e,2),cr(e,t.rgb||r),cr(e,t.red||r),cr(e,t.blue||r),cr(e,t.green||r);for(var i=0;i<59;i++)cr(e,r)});function si(e){for(var n=(0,p.readUint16)(e),t=[],r=0;r<n;r++){var i=(0,p.readInt16)(e),a=(0,p.readInt16)(e);t.push({input:a,output:i})}return t}function jt(e,n){(0,g.writeUint16)(e,n.length);for(var t=0,r=n;t<r.length;t++){var i=r[t];(0,g.writeUint16)(e,i.output),(0,g.writeUint16)(e,i.input)}}V("curv",Me("curves"),function(e,n,t){if((0,p.readUint8)(e),(0,p.readUint16)(e)!==1)throw new Error("Invalid curv version");(0,p.readUint16)(e);var r=(0,p.readUint16)(e),i={type:"curves"};r&1&&(i.rgb=si(e)),r&2&&(i.red=si(e)),r&4&&(i.green=si(e)),r&8&&(i.blue=si(e)),n.adjustment=v(v({},n.adjustment),i),(0,p.skipBytes)(e,t())},function(e,n){var t=n.adjustment,r=t.rgb,i=t.red,a=t.green,o=t.blue,s=0,c=0;r&&r.length&&(s|=1,c++),i&&i.length&&(s|=2,c++),a&&a.length&&(s|=4,c++),o&&o.length&&(s|=8,c++),(0,g.writeUint8)(e,0),(0,g.writeUint16)(e,1),(0,g.writeUint16)(e,0),(0,g.writeUint16)(e,s),r&&r.length&&jt(e,r),i&&i.length&&jt(e,i),a&&a.length&&jt(e,a),o&&o.length&&jt(e,o),(0,g.writeSignature)(e,"Crv "),(0,g.writeUint16)(e,4),(0,g.writeUint16)(e,0),(0,g.writeUint16)(e,c),r&&r.length&&((0,g.writeUint16)(e,0),jt(e,r)),i&&i.length&&((0,g.writeUint16)(e,1),jt(e,i)),a&&a.length&&((0,g.writeUint16)(e,2),jt(e,a)),o&&o.length&&((0,g.writeUint16)(e,3),jt(e,o))});V("expA",Me("exposure"),function(e,n,t){if((0,p.readUint16)(e)!==1)throw new Error("Invalid expA version");n.adjustment=v(v({},n.adjustment),{type:"exposure",exposure:(0,p.readFloat32)(e),offset:(0,p.readFloat32)(e),gamma:(0,p.readFloat32)(e)}),(0,p.skipBytes)(e,t())},function(e,n){var t=n.adjustment;(0,g.writeUint16)(e,1),(0,g.writeFloat32)(e,t.exposure),(0,g.writeFloat32)(e,t.offset),(0,g.writeFloat32)(e,t.gamma),(0,g.writeZeros)(e,2)});V("vibA",Me("vibrance"),function(e,n,t){var r=(0,b.readVersionAndDescriptor)(e);n.adjustment={type:"vibrance"},r.vibrance!==void 0&&(n.adjustment.vibrance=r.vibrance),r.Strt!==void 0&&(n.adjustment.saturation=r.Strt),(0,p.skipBytes)(e,t())},function(e,n){var t=n.adjustment,r={};t.vibrance!==void 0&&(r.vibrance=t.vibrance),t.saturation!==void 0&&(r.Strt=t.saturation),(0,b.writeVersionAndDescriptor)(e,"","null",r)});function rn(e){return{a:(0,p.readInt16)(e),b:(0,p.readInt16)(e),c:(0,p.readInt16)(e),d:(0,p.readInt16)(e),hue:(0,p.readInt16)(e),saturation:(0,p.readInt16)(e),lightness:(0,p.readInt16)(e)}}function an(e,n){var t=n||{};(0,g.writeInt16)(e,t.a||0),(0,g.writeInt16)(e,t.b||0),(0,g.writeInt16)(e,t.c||0),(0,g.writeInt16)(e,t.d||0),(0,g.writeInt16)(e,t.hue||0),(0,g.writeInt16)(e,t.saturation||0),(0,g.writeInt16)(e,t.lightness||0)}V("hue2",Me("hue/saturation"),function(e,n,t){if((0,p.readUint16)(e)!==2)throw new Error("Invalid hue2 version");n.adjustment=v(v({},n.adjustment),{type:"hue/saturation",master:rn(e),reds:rn(e),yellows:rn(e),greens:rn(e),cyans:rn(e),blues:rn(e),magentas:rn(e)}),(0,p.skipBytes)(e,t())},function(e,n){var t=n.adjustment;(0,g.writeUint16)(e,2),an(e,t.master),an(e,t.reds),an(e,t.yellows),an(e,t.greens),an(e,t.cyans),an(e,t.blues),an(e,t.magentas)});function Na(e){return{cyanRed:(0,p.readInt16)(e),magentaGreen:(0,p.readInt16)(e),yellowBlue:(0,p.readInt16)(e)}}function Va(e,n){(0,g.writeInt16)(e,n.cyanRed||0),(0,g.writeInt16)(e,n.magentaGreen||0),(0,g.writeInt16)(e,n.yellowBlue||0)}V("blnc",Me("color balance"),function(e,n,t){n.adjustment={type:"color balance",shadows:Na(e),midtones:Na(e),highlights:Na(e),preserveLuminosity:!!(0,p.readUint8)(e)},(0,p.skipBytes)(e,t())},function(e,n){var t=n.adjustment;Va(e,t.shadows||{}),Va(e,t.midtones||{}),Va(e,t.highlights||{}),(0,g.writeUint8)(e,t.preserveLuminosity?1:0),(0,g.writeZeros)(e,1)});V("blwh",Me("black & white"),function(e,n,t){var r=(0,b.readVersionAndDescriptor)(e);n.adjustment={type:"black & white",reds:r["Rd  "],yellows:r.Yllw,greens:r["Grn "],cyans:r["Cyn "],blues:r["Bl  "],magentas:r.Mgnt,useTint:!!r.useTint,presetKind:r.bwPresetKind,presetFileName:r.blackAndWhitePresetFileName},r.tintColor!==void 0&&(n.adjustment.tintColor=(0,b.parseColor)(r.tintColor)),(0,p.skipBytes)(e,t())},function(e,n){var t=n.adjustment,r={"Rd  ":t.reds||0,Yllw:t.yellows||0,"Grn ":t.greens||0,"Cyn ":t.cyans||0,"Bl  ":t.blues||0,Mgnt:t.magentas||0,useTint:!!t.useTint,tintColor:(0,b.serializeColor)(t.tintColor),bwPresetKind:t.presetKind||0,blackAndWhitePresetFileName:t.presetFileName||""};(0,b.writeVersionAndDescriptor)(e,"","null",r)});V("phfl",Me("photo filter"),function(e,n,t){var r=(0,p.readUint16)(e);if(r!==2&&r!==3)throw new Error("Invalid phfl version");var i;r===2?i=(0,p.readColor)(e):i={l:(0,p.readInt32)(e)/100,a:(0,p.readInt32)(e)/100,b:(0,p.readInt32)(e)/100},n.adjustment={type:"photo filter",color:i,density:(0,p.readUint32)(e)/100,preserveLuminosity:!!(0,p.readUint8)(e)},(0,p.skipBytes)(e,t())},function(e,n){var t=n.adjustment;(0,g.writeUint16)(e,2),(0,g.writeColor)(e,t.color||{l:0,a:0,b:0}),(0,g.writeUint32)(e,(t.density||0)*100),(0,g.writeUint8)(e,t.preserveLuminosity?1:0),(0,g.writeZeros)(e,3)});function li(e){var n=(0,p.readInt16)(e),t=(0,p.readInt16)(e),r=(0,p.readInt16)(e);(0,p.skipBytes)(e,2);var i=(0,p.readInt16)(e);return{red:n,green:t,blue:r,constant:i}}function ur(e,n){var t=n||{};(0,g.writeInt16)(e,t.red),(0,g.writeInt16)(e,t.green),(0,g.writeInt16)(e,t.blue),(0,g.writeZeros)(e,2),(0,g.writeInt16)(e,t.constant)}V("mixr",Me("channel mixer"),function(e,n,t){if((0,p.readUint16)(e)!==1)throw new Error("Invalid mixr version");var r=n.adjustment=v(v({},n.adjustment),{type:"channel mixer",monochrome:!!(0,p.readUint16)(e)});r.monochrome||(r.red=li(e),r.green=li(e),r.blue=li(e)),r.gray=li(e),(0,p.skipBytes)(e,t())},function(e,n){var t=n.adjustment;(0,g.writeUint16)(e,1),(0,g.writeUint16)(e,t.monochrome?1:0),t.monochrome?(ur(e,t.gray),(0,g.writeZeros)(e,3*5*2)):(ur(e,t.red),ur(e,t.green),ur(e,t.blue),ur(e,t.gray))});var uc=(0,qe.createEnum)("colorLookupType","3DLUT",{"3dlut":"3DLUT",abstractProfile:"abstractProfile",deviceLinkProfile:"deviceLinkProfile"}),fc=(0,qe.createEnum)("LUTFormatType","look",{look:"LUTFormatLOOK",cube:"LUTFormatCUBE","3dl":"LUTFormat3DL"}),ci=(0,qe.createEnum)("colorLookupOrder","rgb",{rgb:"rgbOrder",bgr:"bgrOrder"});V("clrL",Me("color lookup"),function(e,n,t){if((0,p.readUint16)(e)!==1)throw new Error("Invalid clrL version");var r=(0,b.readVersionAndDescriptor)(e);n.adjustment={type:"color lookup"};var i=n.adjustment;r.lookupType!==void 0&&(i.lookupType=uc.decode(r.lookupType)),r["Nm  "]!==void 0&&(i.name=r["Nm  "]),r.Dthr!==void 0&&(i.dither=r.Dthr),r.profile!==void 0&&(i.profile=r.profile),r.LUTFormat!==void 0&&(i.lutFormat=fc.decode(r.LUTFormat)),r.dataOrder!==void 0&&(i.dataOrder=ci.decode(r.dataOrder)),r.tableOrder!==void 0&&(i.tableOrder=ci.decode(r.tableOrder)),r.LUT3DFileData!==void 0&&(i.lut3DFileData=r.LUT3DFileData),r.LUT3DFileName!==void 0&&(i.lut3DFileName=r.LUT3DFileName),(0,p.skipBytes)(e,t())},function(e,n){var t=n.adjustment,r={};t.lookupType!==void 0&&(r.lookupType=uc.encode(t.lookupType)),t.name!==void 0&&(r["Nm  "]=t.name),t.dither!==void 0&&(r.Dthr=t.dither),t.profile!==void 0&&(r.profile=t.profile),t.lutFormat!==void 0&&(r.LUTFormat=fc.encode(t.lutFormat)),t.dataOrder!==void 0&&(r.dataOrder=ci.encode(t.dataOrder)),t.tableOrder!==void 0&&(r.tableOrder=ci.encode(t.tableOrder)),t.lut3DFileData!==void 0&&(r.LUT3DFileData=t.lut3DFileData),t.lut3DFileName!==void 0&&(r.LUT3DFileName=t.lut3DFileName),(0,g.writeUint16)(e,1),(0,b.writeVersionAndDescriptor)(e,"","null",r)});V("nvrt",Me("invert"),function(e,n,t){n.adjustment={type:"invert"},(0,p.skipBytes)(e,t())},function(){});V("post",Me("posterize"),function(e,n,t){n.adjustment={type:"posterize",levels:(0,p.readUint16)(e)},(0,p.skipBytes)(e,t())},function(e,n){var t,r=n.adjustment;(0,g.writeUint16)(e,(t=r.levels)!==null&&t!==void 0?t:4),(0,g.writeZeros)(e,2)});V("thrs",Me("threshold"),function(e,n,t){n.adjustment={type:"threshold",level:(0,p.readUint16)(e)},(0,p.skipBytes)(e,t())},function(e,n){var t,r=n.adjustment;(0,g.writeUint16)(e,(t=r.level)!==null&&t!==void 0?t:128),(0,g.writeZeros)(e,2)});var dc=["","","","rgb","hsb","","lab"];V("grdm",Me("gradient map"),function(e,n,t){var r=(0,p.readUint16)(e);if(r!==1&&r!==3)throw new Error("Invalid grdm version");var i={type:"gradient map",gradientType:"solid"};i.reverse=!!(0,p.readUint8)(e),i.dither=!!(0,p.readUint8)(e);var a=!!(0,p.readUint8)(e);if(e.offset--,a){var o=(0,p.readSignature)(e);i.method=b.gradientInterpolationMethodType.decode(o)}i.name=(0,p.readUnicodeString)(e),i.colorStops=[],i.opacityStops=[];for(var s=(0,p.readUint16)(e),c=0;c<s;c++)i.colorStops.push({location:(0,p.readUint32)(e),midpoint:(0,p.readUint32)(e)/100,color:(0,p.readColor)(e)}),(0,p.skipBytes)(e,2);for(var l=(0,p.readUint16)(e),c=0;c<l;c++)i.opacityStops.push({location:(0,p.readUint32)(e),midpoint:(0,p.readUint32)(e)/100,opacity:(0,p.readUint16)(e)/255});var u=(0,p.readUint16)(e);if(u!==2)throw new Error("Invalid grdm expansion count");var d=(0,p.readUint16)(e);i.smoothness=d/4096;var f=(0,p.readUint16)(e);if(f!==32)throw new Error("Invalid grdm length");i.gradientType=(0,p.readUint16)(e)?"noise":"solid",i.randomSeed=(0,p.readUint32)(e),i.addTransparency=!!(0,p.readUint16)(e),i.restrictColors=!!(0,p.readUint16)(e),i.roughness=(0,p.readUint32)(e)/4096,i.colorModel=dc[(0,p.readUint16)(e)]||"rgb",i.min=[(0,p.readUint16)(e)/32768,(0,p.readUint16)(e)/32768,(0,p.readUint16)(e)/32768,(0,p.readUint16)(e)/32768],i.max=[(0,p.readUint16)(e)/32768,(0,p.readUint16)(e)/32768,(0,p.readUint16)(e)/32768,(0,p.readUint16)(e)/32768],(0,p.skipBytes)(e,t());for(var h=0,m=i.colorStops;h<m.length;h++){var w=m[h];w.location/=d}for(var F=0,y=i.opacityStops;F<y.length;F++){var w=y[F];w.location/=d}n.adjustment=i},function(e,n){var t,r,i,a=n.adjustment;(0,g.writeUint16)(e,a.method!==void 0?3:1),(0,g.writeUint8)(e,a.reverse?1:0),(0,g.writeUint8)(e,a.dither?1:0),a.method!==void 0&&(0,g.writeSignature)(e,b.gradientInterpolationMethodType.encode(a.method)),(0,g.writeUnicodeStringWithPadding)(e,a.name||""),(0,g.writeUint16)(e,a.colorStops&&a.colorStops.length||0);for(var o=Math.round(((t=a.smoothness)!==null&&t!==void 0?t:1)*4096),s=0,c=a.colorStops||[];s<c.length;s++){var l=c[s];(0,g.writeUint32)(e,Math.round(l.location*o)),(0,g.writeUint32)(e,Math.round(l.midpoint*100)),(0,g.writeColor)(e,l.color),(0,g.writeZeros)(e,2)}(0,g.writeUint16)(e,a.opacityStops&&a.opacityStops.length||0);for(var u=0,d=a.opacityStops||[];u<d.length;u++){var l=d[u];(0,g.writeUint32)(e,Math.round(l.location*o)),(0,g.writeUint32)(e,Math.round(l.midpoint*100)),(0,g.writeUint16)(e,Math.round(l.opacity*255))}(0,g.writeUint16)(e,2),(0,g.writeUint16)(e,o),(0,g.writeUint16)(e,32),(0,g.writeUint16)(e,a.gradientType==="noise"?1:0),(0,g.writeUint32)(e,a.randomSeed||0),(0,g.writeUint16)(e,a.addTransparency?1:0),(0,g.writeUint16)(e,a.restrictColors?1:0),(0,g.writeUint32)(e,Math.round(((r=a.roughness)!==null&&r!==void 0?r:1)*4096));var f=dc.indexOf((i=a.colorModel)!==null&&i!==void 0?i:"rgb");(0,g.writeUint16)(e,f===-1?3:f);for(var h=0;h<4;h++)(0,g.writeUint16)(e,Math.round((a.min&&a.min[h]||0)*32768));for(var h=0;h<4;h++)(0,g.writeUint16)(e,Math.round((a.max&&a.max[h]||0)*32768));(0,g.writeZeros)(e,4)});function kt(e){return{c:(0,p.readInt16)(e),m:(0,p.readInt16)(e),y:(0,p.readInt16)(e),k:(0,p.readInt16)(e)}}function At(e,n){var t=n||{};(0,g.writeInt16)(e,t.c),(0,g.writeInt16)(e,t.m),(0,g.writeInt16)(e,t.y),(0,g.writeInt16)(e,t.k)}V("selc",Me("selective color"),function(e,n){if((0,p.readUint16)(e)!==1)throw new Error("Invalid selc version");var t=(0,p.readUint16)(e)?"absolute":"relative";(0,p.skipBytes)(e,8),n.adjustment={type:"selective color",mode:t,reds:kt(e),yellows:kt(e),greens:kt(e),cyans:kt(e),blues:kt(e),magentas:kt(e),whites:kt(e),neutrals:kt(e),blacks:kt(e)}},function(e,n){var t=n.adjustment;(0,g.writeUint16)(e,1),(0,g.writeUint16)(e,t.mode==="absolute"?1:0),(0,g.writeZeros)(e,8),At(e,t.reds),At(e,t.yellows),At(e,t.greens),At(e,t.cyans),At(e,t.blues),At(e,t.magentas),At(e,t.whites),At(e,t.neutrals),At(e,t.blacks)});V("CgEd",function(e){var n=e.adjustment;return n?n.type==="brightness/contrast"&&!n.useLegacy||(n.type==="levels"||n.type==="curves"||n.type==="exposure"||n.type==="channel mixer"||n.type==="hue/saturation")&&n.presetFileName!==void 0:!1},function(e,n,t){var r=(0,b.readVersionAndDescriptor)(e);if(r.Vrsn!==1)throw new Error("Invalid CgEd version");"presetFileName"in r?n.adjustment=v(v({},n.adjustment),{presetKind:r.presetKind,presetFileName:r.presetFileName}):"curvesPresetFileName"in r?n.adjustment=v(v({},n.adjustment),{presetKind:r.curvesPresetKind,presetFileName:r.curvesPresetFileName}):"mixerPresetFileName"in r?n.adjustment=v(v({},n.adjustment),{presetKind:r.mixerPresetKind,presetFileName:r.mixerPresetFileName}):n.adjustment={type:"brightness/contrast",brightness:r.Brgh,contrast:r.Cntr,meanValue:r.means,useLegacy:!!r.useLegacy,labColorOnly:!!r["Lab "],auto:!!r.Auto},(0,p.skipBytes)(e,t())},function(e,n){var t,r,i,a,o=n.adjustment;if(o.type==="levels"||o.type==="exposure"||o.type==="hue/saturation"){var s={Vrsn:1,presetKind:(t=o.presetKind)!==null&&t!==void 0?t:1,presetFileName:o.presetFileName||""};(0,b.writeVersionAndDescriptor)(e,"","null",s)}else if(o.type==="curves"){var s={Vrsn:1,curvesPresetKind:(r=o.presetKind)!==null&&r!==void 0?r:1,curvesPresetFileName:o.presetFileName||""};(0,b.writeVersionAndDescriptor)(e,"","null",s)}else if(o.type==="channel mixer"){var s={Vrsn:1,mixerPresetKind:(i=o.presetKind)!==null&&i!==void 0?i:1,mixerPresetFileName:o.presetFileName||""};(0,b.writeVersionAndDescriptor)(e,"","null",s)}else if(o.type==="brightness/contrast"){var s={Vrsn:1,Brgh:o.brightness||0,Cntr:o.contrast||0,means:(a=o.meanValue)!==null&&a!==void 0?a:127,"Lab ":!!o.labColorOnly,useLegacy:!!o.useLegacy,Auto:!!o.auto};(0,b.writeVersionAndDescriptor)(e,"","null",s)}else throw new Error("Unhandled CgEd case")});function J0(e){var n=[];function t(r){var i;if(r.children)for(var a=0,o=r.children;a<o.length;a++){var s=o[a];((i=s.text)===null||i===void 0?void 0:i.index)!==void 0&&(n[s.text.index]=s),t(s)}}return t(e),n}V("Txt2",ue("engineData"),function(e,n,t,r){var i=(0,p.readBytes)(e,t());n.engineData=(0,ic.fromByteArray)(i);var a=J0(r),o=(0,Ga.parseEngineData)(i),s=(0,j0.decodeEngineData2)(o),c=s.ResourceDict.TextFrameSet;if(c)for(var l=0;l<c.length;l++){var u=a[l];c[l].path&&(u!=null&&u.text)&&(u.text.textPath=c[l].path)}},function(e,n){var t=(0,ic.toByteArray)(n.engineData);(0,g.writeBytes)(e,t)});V("FEid",ue("filterEffectsMasks"),function(e,n,t){var r=(0,p.readInt32)(e);if(r<1||r>3)throw new Error("Invalid filterEffects version ".concat(r));for(n.filterEffectsMasks=[];t()>8;){if((0,p.readUint32)(e))throw new Error("filterEffects: 64 bit length is not supported");var i=(0,p.readUint32)(e),a=e.offset+i,o=(0,p.readPascalString)(e,1),s=(0,p.readInt32)(e);if(s!==1)throw new Error("Invalid filterEffect version ".concat(s));if((0,p.readUint32)(e))throw new Error("filterEffect: 64 bit length is not supported");(0,p.readUint32)(e);for(var c=(0,p.readInt32)(e),l=(0,p.readInt32)(e),u=(0,p.readInt32)(e),d=(0,p.readInt32)(e),f=(0,p.readInt32)(e),h=(0,p.readInt32)(e),m=[],w=0;w<h+2;w++){var F=(0,p.readInt32)(e);if(F){if((0,p.readUint32)(e))throw new Error("filterEffect: 64 bit length is not supported");var y=(0,p.readUint32)(e);if(!y)throw new Error("filterEffect: Empty channel");var _=(0,p.readUint16)(e),I=(0,p.readBytes)(e,y-2);m.push({compressionMode:_,data:I})}else m.push(void 0)}if(n.filterEffectsMasks.push({id:o,top:c,left:l,bottom:u,right:d,depth:f,channels:m}),e.offset<a&&(0,p.readUint8)(e)){var S=(0,p.readInt32)(e),C=(0,p.readInt32)(e),E=(0,p.readInt32)(e),k=(0,p.readInt32)(e);if((0,p.readUint32)(e))throw new Error("filterEffect: 64 bit length is not supported");var A=(0,p.readUint32)(e),_=(0,p.readUint16)(e),I=(0,p.readBytes)(e,A-2);n.filterEffectsMasks[n.filterEffectsMasks.length-1].extra={top:S,left:C,bottom:E,right:k,compressionMode:_,data:I}}e.offset=a;for(var L=i;L%4;)e.offset++,L++}},function(e,n){var t;(0,g.writeInt32)(e,3);for(var r=0,i=n.filterEffectsMasks;r<i.length;r++){var a=i[r];(0,g.writeUint32)(e,0),(0,g.writeUint32)(e,0);var o=e.offset;(0,g.writePascalString)(e,a.id,1),(0,g.writeInt32)(e,1),(0,g.writeUint32)(e,0),(0,g.writeUint32)(e,0);var s=e.offset;(0,g.writeInt32)(e,a.top),(0,g.writeInt32)(e,a.left),(0,g.writeInt32)(e,a.bottom),(0,g.writeInt32)(e,a.right),(0,g.writeInt32)(e,a.depth);var c=Math.max(0,a.channels.length-2);(0,g.writeInt32)(e,c);for(var l=0;l<c+2;l++){var u=a.channels[l];(0,g.writeInt32)(e,u?1:0),u&&((0,g.writeUint32)(e,0),(0,g.writeUint32)(e,u.data.length+2),(0,g.writeUint16)(e,u.compressionMode),(0,g.writeBytes)(e,u.data))}e.view.setUint32(s-4,e.offset-s,!1);var d=(t=n.filterEffectsMasks[n.filterEffectsMasks.length-1])===null||t===void 0?void 0:t.extra;d&&((0,g.writeUint8)(e,1),(0,g.writeInt32)(e,d.top),(0,g.writeInt32)(e,d.left),(0,g.writeInt32)(e,d.bottom),(0,g.writeInt32)(e,d.right),(0,g.writeUint32)(e,0),(0,g.writeUint32)(e,d.data.byteLength+2),(0,g.writeUint16)(e,d.compressionMode),(0,g.writeBytes)(e,d.data));var f=e.offset-o;for(e.view.setUint32(o-4,f,!1);f%4;)(0,g.writeZeros)(e,1),f++}});En("FXid","FEid");V("FMsk",ue("filterMask"),function(e,n){n.filterMask={colorSpace:(0,p.readColor)(e),opacity:(0,p.readUint16)(e)/255}},function(e,n){var t;(0,g.writeColor)(e,n.filterMask.colorSpace),(0,g.writeUint16)(e,(0,qe.clamp)((t=n.filterMask.opacity)!==null&&t!==void 0?t:1,0,1)*255)});V("artd",function(e){return e.artboards!==void 0},function(e,n,t){var r=(0,b.readVersionAndDescriptor)(e);n.artboards={count:r["Cnt "],autoExpandOffset:{horizontal:r.autoExpandOffset.Hrzn,vertical:r.autoExpandOffset.Vrtc},origin:{horizontal:r.origin.Hrzn,vertical:r.origin.Vrtc},autoExpandEnabled:r.autoExpandEnabled,autoNestEnabled:r.autoNestEnabled,autoPositionEnabled:r.autoPositionEnabled,shrinkwrapOnSaveEnabled:!!r.shrinkwrapOnSaveEnabled,docDefaultNewArtboardBackgroundColor:(0,b.parseColor)(r.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:r.docDefaultNewArtboardBackgroundType},(0,p.skipBytes)(e,t())},function(e,n){var t,r,i,a,o,s=n.artboards,c={"Cnt ":s.count,autoExpandOffset:s.autoExpandOffset?{Hrzn:s.autoExpandOffset.horizontal,Vrtc:s.autoExpandOffset.vertical}:{Hrzn:0,Vrtc:0},origin:s.origin?{Hrzn:s.origin.horizontal,Vrtc:s.origin.vertical}:{Hrzn:0,Vrtc:0},autoExpandEnabled:(t=s.autoExpandEnabled)!==null&&t!==void 0?t:!0,autoNestEnabled:(r=s.autoNestEnabled)!==null&&r!==void 0?r:!0,autoPositionEnabled:(i=s.autoPositionEnabled)!==null&&i!==void 0?i:!0,shrinkwrapOnSaveEnabled:(a=s.shrinkwrapOnSaveEnabled)!==null&&a!==void 0?a:!0,docDefaultNewArtboardBackgroundColor:(0,b.serializeColor)(s.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:(o=s.docDefaultNewArtboardBackgroundType)!==null&&o!==void 0?o:1};(0,b.writeVersionAndDescriptor)(e,"","null",c,"artd")});function ja(e){return Object.keys(e).map(function(n){return e[n]}).some(function(n){return Array.isArray(n)&&n.length>1})}we.hasMultiEffects=ja;V("lfx2",function(e){return e.effects!==void 0&&!ja(e.effects)},function(e,n,t){var r=(0,p.readUint32)(e);if(r!==0)throw new Error("Invalid lfx2 version");var i=(0,b.readVersionAndDescriptor)(e);n.effects=(0,b.parseEffects)(i,!!e.logMissingFeatures),(0,p.skipBytes)(e,t())},function(e,n,t,r){var i=(0,b.serializeEffects)(n.effects,!!r.logMissingFeatures,!0);(0,g.writeUint32)(e,0),(0,b.writeVersionAndDescriptor)(e,"","null",i)});V("cinf",ue("compositorUsed"),function(e,n,t){var r=(0,b.readVersionAndDescriptor)(e);function i(a){return a.split(".")[1]}n.compositorUsed={description:r.description,reason:r.reason,engine:i(r.Engn)},r.Vrsn&&(n.compositorUsed.version=r.Vrsn),r.psVersion&&(n.compositorUsed.photoshopVersion=r.psVersion),r.enableCompCore&&(n.compositorUsed.enableCompCore=i(r.enableCompCore)),r.enableCompCoreGPU&&(n.compositorUsed.enableCompCoreGPU=i(r.enableCompCoreGPU)),r.enableCompCoreThreads&&(n.compositorUsed.enableCompCoreThreads=i(r.enableCompCoreThreads)),r.compCoreSupport&&(n.compositorUsed.compCoreSupport=i(r.compCoreSupport)),r.compCoreGPUSupport&&(n.compositorUsed.compCoreGPUSupport=i(r.compCoreGPUSupport)),(0,p.skipBytes)(e,t())},function(e,n){var t=n.compositorUsed,r={Vrsn:t.version||{major:1,minor:0,fix:0}};t.photoshopVersion&&(r.psVersion=t.photoshopVersion),r.description=t.description,r.reason=t.reason,r.Engn="Engn.".concat(t.engine),t.enableCompCore&&(r.enableCompCore="enable.".concat(t.enableCompCore)),t.enableCompCoreGPU&&(r.enableCompCoreGPU="enable.".concat(t.enableCompCoreGPU)),t.enableCompCoreThreads&&(r.enableCompCoreThreads="enable.".concat(t.enableCompCoreThreads)),t.compCoreSupport&&(r.compCoreSupport="reason.".concat(t.compCoreSupport)),t.compCoreGPUSupport&&(r.compCoreGPUSupport="reason.".concat(t.compCoreGPUSupport)),(0,b.writeVersionAndDescriptor)(e,"","null",r)});V("extn",function(e){return e._extn!==void 0},function(e,n){var t=(0,b.readVersionAndDescriptor)(e);qe.MOCK_HANDLERS&&(n._extn=t)},function(e,n){qe.MOCK_HANDLERS&&(0,b.writeVersionAndDescriptor)(e,"","null",n._extn)});V("iOpa",ue("fillOpacity"),function(e,n){n.fillOpacity=(0,p.readUint8)(e)/255,(0,p.skipBytes)(e,3)},function(e,n){(0,g.writeUint8)(e,n.fillOpacity*255),(0,g.writeZeros)(e,3)});V("brst",ue("channelBlendingRestrictions"),function(e,n,t){for(n.channelBlendingRestrictions=[];t()>4;)n.channelBlendingRestrictions.push((0,p.readInt32)(e))},function(e,n){for(var t=0,r=n.channelBlendingRestrictions;t<r.length;t++){var i=r[t];(0,g.writeInt32)(e,i)}});V("tsly",ue("transparencyShapesLayer"),function(e,n){n.transparencyShapesLayer=!!(0,p.readUint8)(e),(0,p.skipBytes)(e,3)},function(e,n){(0,g.writeUint8)(e,n.transparencyShapesLayer?1:0),(0,g.writeZeros)(e,3)})});var Sn=oe(j=>{"use strict";var Wt=j&&j.__assign||function(){return Wt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Wt.apply(this,arguments)};Object.defineProperty(j,"__esModule",{value:!0});j.writeColor=j.writePsd=j.writeSection=j.writeUnicodeStringWithPadding=j.writeUnicodeString=j.writeUnicodeStringWithoutLengthLE=j.writeUnicodeStringWithoutLength=j.writePascalString=j.writeAsciiString=j.writeSignature=j.writeZeros=j.writeBytes=j.writeFixedPointPath32=j.writeFixedPoint32=j.writeFloat64=j.writeFloat32=j.writeUint32=j.writeInt32LE=j.writeInt32=j.writeUint16LE=j.writeUint16=j.writeInt16=j.writeUint8=j.getWriterBufferNoCopy=j.getWriterBuffer=j.createWriter=void 0;var Fe=zt(),Q0=ni(),$0=wa();function eh(e){e===void 0&&(e=4096);var n=new ArrayBuffer(e),t=new DataView(n),r=0;return{buffer:n,view:t,offset:r,tempBuffer:void 0}}j.createWriter=eh;function th(e){return e.buffer.slice(0,e.offset)}j.getWriterBuffer=th;function nh(e){return new Uint8Array(e.buffer,0,e.offset)}j.getWriterBufferNoCopy=nh;function de(e,n){var t=Et(e,1);e.view.setUint8(t,n)}j.writeUint8=de;function Un(e,n){var t=Et(e,2);e.view.setInt16(t,n,!1)}j.writeInt16=Un;function ee(e,n){var t=Et(e,2);e.view.setUint16(t,n,!1)}j.writeUint16=ee;function Sc(e,n){var t=Et(e,2);e.view.setUint16(t,n,!0)}j.writeUint16LE=Sc;function ze(e,n){var t=Et(e,4);e.view.setInt32(t,n,!1)}j.writeInt32=ze;function rh(e,n){var t=Et(e,4);e.view.setInt32(t,n,!0)}j.writeInt32LE=rh;function Dt(e,n){var t=Et(e,4);e.view.setUint32(t,n,!1)}j.writeUint32=Dt;function ih(e,n){var t=Et(e,4);e.view.setFloat32(t,n,!1)}j.writeFloat32=ih;function Wa(e,n){var t=Et(e,8);e.view.setFloat64(t,n,!1)}j.writeFloat64=Wa;function ah(e,n){ze(e,n*65536)}j.writeFixedPoint32=ah;function oh(e,n){ze(e,n*(1<<24))}j.writeFixedPointPath32=oh;function hi(e,n){if(n){kc(e,e.offset+n.length);var t=new Uint8Array(e.buffer);t.set(n,e.offset),e.offset+=n.length}}j.writeBytes=hi;function Pn(e,n){for(var t=0;t<n;t++)de(e,0)}j.writeZeros=Pn;function on(e,n){if(n.length!==4)throw new Error("Invalid signature: '".concat(n,"'"));for(var t=0;t<4;t++)de(e,n.charCodeAt(t))}j.writeSignature=on;function sh(e,n){for(var t=0;t<n.length;t++)de(e,n.charCodeAt(t))}j.writeAsciiString=sh;function Za(e,n,t){var r=n.length;if(r>255)throw new Error("String too long");de(e,r);for(var i=0;i<r;i++){var a=n.charCodeAt(i);de(e,a<128?a:63)}for(;++r%t;)de(e,0)}j.writePascalString=Za;function _c(e,n){for(var t=0;t<n.length;t++)ee(e,n.charCodeAt(t))}j.writeUnicodeStringWithoutLength=_c;function lh(e,n){for(var t=0;t<n.length;t++)Sc(e,n.charCodeAt(t))}j.writeUnicodeStringWithoutLengthLE=lh;function ch(e,n){Dt(e,n.length),_c(e,n)}j.writeUnicodeString=ch;function uh(e,n){Dt(e,n.length+1);for(var t=0;t<n.length;t++)ee(e,n.charCodeAt(t));ee(e,0)}j.writeUnicodeStringWithPadding=uh;function xc(e){e===void 0&&(e=[]);for(var n=0,t=0,r=e;t<r.length;t++){var i=r[t];if(i.canvas||i.imageData){var a=Xa(i),o=a.width,s=a.height;n=Math.max(n,2*s+2*o*s)}i.children&&(n=Math.max(n,xc(i.children)))}return n}function it(e,n,t,r,i){r===void 0&&(r=!1),i===void 0&&(i=!1),i&&Dt(e,0);var a=e.offset;Dt(e,0),t();for(var o=e.offset-a-4,s=o;s%n;)de(e,0),s++;r&&(o=s),e.view.setUint32(a,o,!1)}j.writeSection=it;function Ic(e){var n;(n=e.children)===null||n===void 0||n.forEach(Ic);var t=e.imageData;if(t&&(t.data instanceof Uint32Array||t.data instanceof Uint16Array))throw new Error("imageData has incorrect bitDepth");if("mask"in e&&e.mask){var r=e.mask.imageData;if(r&&(r.data instanceof Uint32Array||r.data instanceof Uint16Array))throw new Error("mask imageData has incorrect bitDepth")}}function fh(e,n,t){var r;if(t===void 0&&(t={}),!(+n.width>0&&+n.height>0))throw new Error("Invalid document size");if((n.width>3e4||n.height>3e4)&&!t.psb)throw new Error("Document size is too large (max is 30000x30000, use PSB format instead)");var i=(r=n.bitsPerChannel)!==null&&r!==void 0?r:8;if(i!==8)throw new Error("bitsPerChannel other than 8 are not supported for writing");Ic(n);var a=Wt({},n.imageResources),o=Wt(Wt({},t),{layerIds:new Set,layerToId:new Map});o.generateThumbnail&&(a.thumbnail=mh(n));var s=n.imageData;if(!s&&n.canvas&&(s=n.canvas.getContext("2d").getImageData(0,0,n.canvas.width,n.canvas.height)),s&&(n.width!==s.width||n.height!==s.height))throw new Error("Document canvas must have the same size as document");var c=!!s&&(0,Fe.hasAlpha)(s),l=Math.max(xc(n.children),4*2*n.width*n.height+2*n.height);e.tempBuffer=new Uint8Array(l),on(e,"8BPS"),ee(e,t.psb?2:1),Pn(e,6),ee(e,c?4:3),Dt(e,n.height),Dt(e,n.width),ee(e,i),ee(e,3),it(e,1,function(){var C,E,k;if(n.palette){for(var A=0;A<256;A++)de(e,((C=n.palette[A])===null||C===void 0?void 0:C.r)||0);for(var A=0;A<256;A++)de(e,((E=n.palette[A])===null||E===void 0?void 0:E.g)||0);for(var A=0;A<256;A++)de(e,((k=n.palette[A])===null||k===void 0?void 0:k.b)||0)}});var u=[];Cc(u,n.children),u.length||u.push({}),a.layersGroup=u.map(function(C){return C.linkGroup||0}),a.layerGroupsEnabledId=u.map(function(C){return C.linkGroupEnabled==!1?0:1}),it(e,1,function(){for(var C=function(L){for(var T=L.has(a),O=T===!1?0:T===!0?1:T,W=function(B){on(e,"8BIM"),ee(e,L.key),Za(e,"",2),it(e,2,function(){return L.write(e,a,B)})},D=0;D<O;D++)W(D)},E=0,k=$0.resourceHandlers;E<k.length;E++){var A=k[E];C(A)}}),it(e,2,function(){dh(e,u,n,c,o),vh(e,n.globalLayerMaskInfo),Fc(e,n,n,o)},void 0,!!o.psb);var d=c?[0,1,2,3]:[0,1,2],f=s?s.width:n.width,h=s?s.height:n.height,m={data:new Uint8Array(f*h*4),width:f,height:h};if(ee(e,1),Fe.RAW_IMAGE_DATA&&n.imageDataRaw)console.log("writing raw image data"),hi(e,n.imageDataRaw);else{if(s&&m.data.set(new Uint8Array(s.data.buffer,s.data.byteOffset,s.data.byteLength)),c)for(var w=m.width*m.height*4,F=m.data,y=0;y<w;y+=4){var _=F[y+3];if(_!=0&&_!=255){var I=_/255,S=255*(1-I);F[y+0]=F[y+0]*I+S,F[y+1]=F[y+1]*I+S,F[y+2]=F[y+2]*I+S}}hi(e,(0,Fe.writeDataRLE)(e.tempBuffer,m,d,!!t.psb))}}j.writePsd=fh;function dh(e,n,t,r,i){it(e,4,function(){var a;Un(e,r?-n.length:n.length);for(var o=n.map(function(F,y){return yh(e.tempBuffer,F,y===0,i)}),s=function(F){var y=F.layer,_=F.top,I=F.left,S=F.bottom,C=F.right,E=F.channels;ze(e,_),ze(e,I),ze(e,S),ze(e,C),ee(e,E.length);for(var k=0,A=E;k<A.length;k++){var L=A[k];Un(e,L.channelId),i.psb&&Dt(e,0),Dt(e,L.length)}on(e,"8BIM"),on(e,Fe.fromBlendMode[y.blendMode]||"norm"),de(e,Math.round((0,Fe.clamp)((a=y.opacity)!==null&&a!==void 0?a:1,0,1)*255)),de(e,y.clipping?1:0);var T=8;y.transparencyProtected&&(T|=1),y.hidden&&(T|=2),(y.vectorMask||y.sectionDivider&&y.sectionDivider.type!==0||y.adjustment)&&(T|=16),y.effectsOpen&&(T|=32),de(e,T),de(e,0),it(e,1,function(){hh(e,y,F),ph(e,y),Za(e,(y.name||"").substring(0,255),4),Fc(e,y,t,i)})},c=0,l=o;c<l.length;c++){var u=l[c];s(u)}for(var d=0,f=o;d<f.length;d++)for(var u=f[d],h=0,m=u.channels;h<m.length;h++){var w=m[h];ee(e,w.compression),w.buffer&&hi(e,w.buffer)}},!0,i.psb)}function hh(e,n,t){var r=n.mask,i=n.realMask;it(e,1,function(){if(!(!r&&!i)){var a=0,o=0,s=0;r&&(r.userMaskDensity!==void 0&&(a|=1),r.userMaskFeather!==void 0&&(a|=2),r.vectorMaskDensity!==void 0&&(a|=4),r.vectorMaskFeather!==void 0&&(a|=8),r.disabled&&(o|=2),r.positionRelativeToLayer&&(o|=1),r.fromVectorData&&(o|=8),a&&(o|=16));var c=t.mask||{};if(ze(e,c.top||0),ze(e,c.left||0),ze(e,c.bottom||0),ze(e,c.right||0),de(e,r&&r.defaultColor||0),de(e,o),i){i.disabled&&(s|=2),i.positionRelativeToLayer&&(s|=1),i.fromVectorData&&(s|=8);var l=t.realMask||{};de(e,s),de(e,i.defaultColor||0),ze(e,l.top||0),ze(e,l.left||0),ze(e,l.bottom||0),ze(e,l.right||0)}a&&r&&(de(e,a),r.userMaskDensity!==void 0&&de(e,Math.round(r.userMaskDensity*255)),r.userMaskFeather!==void 0&&Wa(e,r.userMaskFeather),r.vectorMaskDensity!==void 0&&de(e,Math.round(r.vectorMaskDensity*255)),r.vectorMaskFeather!==void 0&&Wa(e,r.vectorMaskFeather)),Pn(e,2)}})}function di(e,n){de(e,n[0]),de(e,n[1]),de(e,n[2]),de(e,n[3])}function ph(e,n){it(e,1,function(){var t=n.blendingRanges;if(t){di(e,t.compositeGrayBlendSource),di(e,t.compositeGraphBlendDestinationRange);for(var r=0,i=t.ranges;r<i.length;r++){var a=i[r];di(e,a.sourceRange),di(e,a.destRange)}}})}function vh(e,n){it(e,1,function(){n&&(ee(e,n.overlayColorSpace),ee(e,n.colorSpace1),ee(e,n.colorSpace2),ee(e,n.colorSpace3),ee(e,n.colorSpace4),ee(e,n.opacity*255),de(e,n.kind),Pn(e,3))})}function Fc(e,n,t,r){for(var i=function(c){var l=c.key;if(l==="Txt2"&&r.invalidateTextLayers)return"continue";if(l==="vmsk"&&r.psb&&(l="vsms"),c.has(n)){var u=r.psb&&Fe.largeAdditionalInfoKeys.indexOf(l)!==-1,d=l!=="Txt2"&&l!=="cinf"&&l!=="extn"&&l!=="CAI "&&l!=="OCIO",f=l==="Txt2"||l==="luni"||l==="vmsk"||l==="artb"||l==="artd"||l==="vogk"||l==="SoLd"||l==="lnk2"||l==="vscg"||l==="vsms"||l==="GdFl"||l==="lmfx"||l==="lrFX"||l==="cinf"||l==="PlLd"||l==="Anno"||l==="CAI "||l==="OCIO"||l==="GenI"||l==="FEid"||l==="curv"||l==="CgEd"||l==="vibA"||l==="blwh"||l==="grdm";on(e,u?"8B64":"8BIM"),on(e,l),it(e,f?4:2,function(){c.write(e,n,t,r)},d,u)}},a=0,o=Q0.infoHandlers;a<o.length;a++){var s=o[a];i(s)}}function Cc(e,n){if(n)for(var t=0,r=n;t<r.length;t++){var i=r[t];if(i.children&&i.canvas)throw new Error("Invalid layer, cannot have both 'canvas' and 'children' properties");if(i.children&&i.imageData)throw new Error("Invalid layer, cannot have both 'imageData' and 'children' properties");i.children?(e.push({name:"</Layer group>",sectionDivider:{type:3}}),Cc(e,i.children),e.push(Wt(Wt({},i),{blendMode:i.blendMode==="pass through"?"normal":i.blendMode,sectionDivider:{type:i.opened===!1?2:1,key:Fe.fromBlendMode[i.blendMode]||"pass",subType:0}}))):e.push(Wt({},i))}}function gh(e,n){var t=e.buffer.byteLength;do t*=2;while(n>t);var r=new ArrayBuffer(t),i=new Uint8Array(r),a=new Uint8Array(e.buffer);i.set(a),e.buffer=r,e.view=new DataView(e.buffer)}function kc(e,n){n>e.buffer.byteLength&&gh(e,n)}function Et(e,n){var t=e.offset;return kc(e,e.offset+=n),t}function mh(e){var n=(0,Fe.createCanvas)(10,10),t=1;e.width>e.height?(n.width=160,n.height=Math.floor(e.height*(n.width/e.width)),t=n.width/e.width):(n.height=160,n.width=Math.floor(e.width*(n.height/e.height)),t=n.height/e.height);var r=n.getContext("2d");return r.scale(t,t),e.imageData?r.drawImage((0,Fe.imageDataToCanvas)(e.imageData),0,0):e.canvas&&r.drawImage(e.canvas,0,0),n}function yc(e,n,t,r,i,a){var o=r.top|0,s=r.left|0,c=r.right|0,l=r.bottom|0,u=Xa(r),d=u.width,f=u.height,h=r.imageData;if(!h&&r.canvas&&d&&f&&(h=r.canvas.getContext("2d").getImageData(0,0,d,f)),h&&(h.width!==d||h.height!==f))throw new Error("Invalid imageData dimentions");c=s+d,l=o+f;var m,w;Fe.RAW_IMAGE_DATA&&t[a?"realMaskDataRaw":"maskDataRaw"]?(m=t[a?"realMaskDataRaw":"maskDataRaw"],w=t[a?"realMaskDataRawCompression":"maskDataRawCompression"]):h?i.compress?(m=(0,Fe.writeDataZipWithoutPrediction)(h,[0]),w=2):(m=(0,Fe.writeDataRLE)(e,h,[0],!!i.psb),w=1):(m=new Uint8Array(0),w=1),n.channels.push({channelId:a?-3:-2,compression:w,buffer:m,length:2+m.length}),n[a?"realMask":"mask"]={top:o,left:s,right:c,bottom:l}}function yh(e,n,t,r){var i=wh(e,n,t,r);return n.mask&&yc(e,i,n,n.mask,r,!1),n.realMask&&yc(e,i,n,n.realMask,r,!0),i}function Xa(e){var n,t,r,i,a=e.canvas,o=e.imageData,s=(t=(n=o==null?void 0:o.width)!==null&&n!==void 0?n:a==null?void 0:a.width)!==null&&t!==void 0?t:0,c=(i=(r=o==null?void 0:o.height)!==null&&r!==void 0?r:a==null?void 0:a.height)!==null&&i!==void 0?i:0;return{width:s,height:c}}function bh(e,n,t,r,i){if(e.data instanceof Uint32Array||e.data instanceof Uint16Array)throw new Error("imageData has incorrect bit depth");for(var a=(0,Fe.createImageData)(r,i),o=e.data,s=a.data,c=0;c<i;c++)for(var l=0;l<r;l++){var u=(l+n+(c+t)*e.width)*4,d=(l+c*r)*4;s[d]=o[u],s[d+1]=o[u+1],s[d+2]=o[u+2],s[d+3]=o[u+3]}return a}function wh(e,n,t,r){var i,a=n.top|0,o=n.left|0,s=n.right|0,c=n.bottom|0,l=[{channelId:-1,compression:0,buffer:void 0,length:2},{channelId:0,compression:0,buffer:void 0,length:2},{channelId:1,compression:0,buffer:void 0,length:2},{channelId:2,compression:0,buffer:void 0,length:2}],u=Xa(n),d=u.width,f=u.height;if(!(n.canvas||n.imageData)||!d||!f)return s=o,c=a,{layer:n,top:a,left:o,right:s,bottom:c,channels:l};s=o+d,c=a+f;var h=n.imageData||n.canvas.getContext("2d").getImageData(0,0,d,f);if(r.trimImageData){var m=Sh(h);if(m.left!==0||m.top!==0||m.right!==h.width||m.bottom!==h.height){if(o+=m.left,a+=m.top,s-=h.width-m.right,c-=h.height-m.bottom,d=s-o,f=c-a,!d||!f)return{layer:n,top:a,left:o,right:s,bottom:c,channels:l};h=bh(h,m.left,m.top,d,f)}}var w=[0,1,2];return(!t||r.noBackground||n.mask||(0,Fe.hasAlpha)(h)||Fe.RAW_IMAGE_DATA&&(!((i=n.imageDataRaw)===null||i===void 0)&&i[-1]))&&w.unshift(-1),l=w.map(function(F){var y=(0,Fe.offsetForChannel)(F,!1),_,I;return Fe.RAW_IMAGE_DATA&&n.imageDataRaw?(_=n.imageDataRaw[F],I=n.imageDataRawCompression[F]):r.compress?(_=(0,Fe.writeDataZipWithoutPrediction)(h,[y]),I=2):(_=(0,Fe.writeDataRLE)(e,h,[y],!!r.psb),I=1),{channelId:F,compression:I,buffer:_,length:2+_.length}}),{layer:n,top:a,left:o,right:s,bottom:c,channels:l}}function bc(e,n,t,r){for(var i=e.data,a=e.width,o=(n*a+t)*4+3|0,s=o+(r-t)*4|0,c=o;c<s;c=c+4|0)if(i[c]!==0)return!1;return!0}function wc(e,n,t,r){for(var i=e.data,a=e.width,o=a*4|0,s=t*o+n*4+3|0,c=t,l=s;c<r;c++,l=l+o|0)if(i[l]!==0)return!1;return!0}function Sh(e){for(var n=0,t=0,r=e.width,i=e.height;n<i&&bc(e,n,t,r);)n++;for(;i>n&&bc(e,i-1,t,r);)i--;for(;t<r&&wc(e,t,n,i);)t++;for(;r>t&&wc(e,r-1,n,i);)r--;return{top:n,left:t,right:r,bottom:i}}function _h(e,n){n?"r"in n?(ee(e,0),ee(e,Math.round(n.r*257)),ee(e,Math.round(n.g*257)),ee(e,Math.round(n.b*257)),ee(e,0)):"fr"in n?(ee(e,0),ee(e,Math.round(n.fr*255*257)),ee(e,Math.round(n.fg*255*257)),ee(e,Math.round(n.fb*255*257)),ee(e,0)):"l"in n?(ee(e,7),Un(e,Math.round(n.l*1e4)),Un(e,Math.round(n.a<0?n.a*12800:n.a*12700)),Un(e,Math.round(n.b<0?n.b*12800:n.b*12700)),ee(e,0)):"h"in n?(ee(e,1),ee(e,Math.round(n.h*65535)),ee(e,Math.round(n.s*65535)),ee(e,Math.round(n.b*65535)),ee(e,0)):"c"in n?(ee(e,2),ee(e,Math.round(n.c*257)),ee(e,Math.round(n.m*257)),ee(e,Math.round(n.y*257)),ee(e,Math.round(n.k*257))):(ee(e,8),ee(e,Math.round(n.k*1e4/255)),Pn(e,6)):(ee(e,0),Pn(e,8))}j.writeColor=_h});var Ec=oe(Tn=>{"use strict";var pi=Tn&&Tn.__assign||function(){return pi=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pi.apply(this,arguments)};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.readAbr=void 0;var Q=jr(),Ce=Nt(),xh=["off","fade","pen pressure","pen tilt","stylus wheel","initial direction","direction","initial rotation","rotation"],Ac=["round point","round blunt","round curve","round angle","round fan","flat point","flat blunt","flat curve","flat angle","flat fan"],Ih=["erodible point","erodible flat","erodible round","erodible square","erodible triangle","custom"],Fh={_:"brush",MixB:"mixer brush",SmTl:"smudge brush"};function Le(e){return{control:xh[e.bVTy],steps:e.fStp,jitter:(0,Q.parsePercent)(e.jitter),minimum:(0,Q.parsePercent)(e["Mnm "])}}function Dc(e){switch(e._classID){case"computedBrush":return{type:"computed",size:(0,Q.parseUnitsToNumber)(e.Dmtr,"Pixels"),angle:(0,Q.parseAngle)(e.Angl),roundness:(0,Q.parsePercent)(e.Rndn),spacingOn:e.Intr,spacing:(0,Q.parsePercent)(e.Spcn),flipX:e.flipX,flipY:e.flipY,hardness:(0,Q.parsePercent)(e.Hrdn)};case"sampledBrush":return{type:"sampled",size:(0,Q.parseUnitsToNumber)(e.Dmtr,"Pixels"),angle:(0,Q.parseAngle)(e.Angl),roundness:(0,Q.parsePercent)(e.Rndn),spacingOn:e.Intr,spacing:(0,Q.parsePercent)(e.Spcn),flipX:e.flipX,flipY:e.flipY,name:e["Nm  "],sampledData:e.sampledData};case"dBrush":return{type:"dynamic",shape:Ac[e["Shp "]],angle:(0,Q.parseAngle)(e.Angl),size:(0,Q.parseUnitsToNumber)(e.Dmtr,"Pixels"),density:(0,Q.parsePercent)(e.Dnst),length:(0,Q.parsePercent)(e.Lngt),clumping:(0,Q.parsePercent)(e.clumping),thickness:(0,Q.parsePercent)(e.thickness),stiffness:(0,Q.parsePercent)(e.stiffness),physics:e.physics,spacing:(0,Q.parsePercent)(e.Spcn),spacingOn:e.Intr,flipX:e.flipX,flipY:e.flipY};case"dTips":return pi(pi({type:"tips",angle:(0,Q.parseAngle)(e.Angl),size:(0,Q.parseUnitsToNumber)(e.Dmtr,"Pixels"),shape:Ac[e["Shp "]],physics:e.physics,spacing:(0,Q.parsePercent)(e.Spcn),spacingOn:e.Intr,flipX:e.flipX,flipY:e.flipY,tipsType:Ih[e.dtipsType],tipsLengthRatio:(0,Q.parsePercent)(e.dtipsLengthRatio),tipsHardness:(0,Q.parsePercent)(e.dtipsHardness)},e.dtipsGridSize&&e.dtipsErodibleTipHeightMap?{tipsGridSize:e.dtipsGridSize,tipsErodibleTipHeightMap:Ch(e.dtipsErodibleTipHeightMap)}:{}),{tipsAirbrushCutoffAngle:e.dtipsAirbrushCutoffAngle,tipsAirbrushGranularity:(0,Q.parsePercent)(e.dtipsAirbrushGranularity),tipsAirbrushStreakiness:(0,Q.parsePercent)(e.dtipsAirbrushStreakiness),tipsAirbrushSplatSize:(0,Q.parsePercent)(e.dtipsAirbrushSplatSize),tipsAirbrushSplatCount:e.dtipsAirbrushSplatCount});default:throw console.log((Oa(),gi(La)).inspect(e,!1,99,!0)),new Error("Unknown brush classId: ".concat(e._classID))}}function Ch(e){for(var n=[],t=0;t<e.byteLength;t++)n.push(e[t]);return n}function kh(e,n){var t,r,i,a;n===void 0&&(n={});var o=(0,Ce.createReader)(e.buffer,e.byteOffset,e.byteLength),s=(0,Ce.readInt16)(o),c=[],l=[],u=[];if(s===1||s===2)throw new Error("Unsupported ABR version (".concat(s,")"));if(s===6||s===7||s===9||s===10){var d=(0,Ce.readInt16)(o);if(d!==1&&d!==2)throw new Error("Unsupported ABR minor version");for(;o.offset<o.view.byteLength;){(0,Ce.checkSignature)(o,"8BIM");var f=(0,Ce.readSignature)(o),h=(0,Ce.readUint32)(o),m=o.offset+h;switch(f){case"samp":{for(;o.offset<m;){for(var w=(0,Ce.readUint32)(o);w&3;)w++;var F=o.offset+w,y=(0,Ce.readPascalString)(o,1);(0,Ce.skipBytes)(o,d===1?10:264);var _=(0,Ce.readInt32)(o),I=(0,Ce.readInt32)(o),S=(0,Ce.readInt32)(o)-_,C=(0,Ce.readInt32)(o)-I;if(C<=0||S<=0)throw new Error("Invalid bounds");var E=(0,Ce.readInt16)(o),k=(0,Ce.readUint8)(o),A=new Uint8Array(C*S);if(E===8)if(k===0)A.set((0,Ce.readBytes)(o,A.byteLength));else if(k===1)(0,Ce.readDataRLE)(o,{width:C,height:S,data:A},C,S,E,1,[0],!1);else throw new Error("Invalid compression");else if(E===16)if(k===0)for(var L=0;L<A.byteLength;L++)A[L]=(0,Ce.readUint16)(o)>>8;else throw k===1?new Error("not implemented (16bit RLE)"):new Error("Invalid compression");else throw new Error("Invalid depth");c.push({id:y,bounds:{x:I,y:_,w:C,h:S},alpha:A}),o.offset=F}break}case"desc":{for(var T=(0,Q.readVersionAndDescriptor)(o,!0),O=0,W=T.Brsh;O<W.length;O++){var D=W[O],B={name:D["Nm  "],shape:Dc(D.Brsh),spacing:(0,Q.parsePercent)(D.Spcn),wetEdges:D.Wtdg,noise:D.Nose,useBrushSize:D.useBrushSize};D.interpretation!=null&&(B.interpretation=D.interpretation),D.protectTexture!=null&&(B.protectTexture=D.protectTexture),D.useTipDynamics&&(B.shapeDynamics={tiltScale:(0,Q.parsePercent)(D.tiltScale),sizeDynamics:Le(D.szVr),angleDynamics:Le(D.angleDynamics),roundnessDynamics:Le(D.roundnessDynamics),flipX:D.flipX,flipY:D.flipY,brushProjection:D.brushProjection,minimumDiameter:(0,Q.parsePercent)(D.minimumDiameter),minimumRoundness:(0,Q.parsePercent)(D.minimumRoundness)}),D.useScatter&&(B.scatter={count:D["Cnt "],bothAxes:D.bothAxes,countDynamics:Le(D.countDynamics),scatterDynamics:Le(D.scatterDynamics)}),D.useTexture&&D.Txtr&&(B.texture={id:D.Txtr.Idnt,name:D.Txtr["Nm  "],blendMode:Q.BlnM.decode(D.textureBlendMode),depth:(0,Q.parsePercent)(D.textureDepth),depthMinimum:(0,Q.parsePercent)(D.minimumDepth),depthDynamics:Le(D.textureDepthDynamics),scale:(0,Q.parsePercent)(D.textureScale),invert:D.InvT,brightness:D.textureBrightness,contrast:D.textureContrast});var H=D.dualBrush;H&&H.useDualBrush&&(B.dualBrush={flip:H.Flip,shape:Dc(H.Brsh),blendMode:Q.BlnM.decode(H.BlnM),useScatter:H.useScatter,spacing:(0,Q.parsePercent)(H.Spcn),count:H["Cnt "],bothAxes:H.bothAxes,countDynamics:Le(H.countDynamics),scatterDynamics:Le(H.scatterDynamics)}),D.useColorDynamics&&(B.colorDynamics={foregroundBackground:Le(D.clVr),hue:(0,Q.parsePercent)(D["H   "]),saturation:(0,Q.parsePercent)(D.Strt),brightness:(0,Q.parsePercent)(D.Brgh),purity:(0,Q.parsePercent)(D.purity),perTip:D.colorDynamicsPerTip}),D.usePaintDynamics&&(B.transfer={flowDynamics:Le(D.prVr),opacityDynamics:Le(D.opVr),wetnessDynamics:Le(D.wtVr),mixDynamics:Le(D.mxVr)}),D.useBrushPose&&(B.brushPose={overrideAngle:D.overridePoseAngle,overrideTiltX:D.overridePoseTiltX,overrideTiltY:D.overridePoseTiltY,overridePressure:D.overridePosePressure,pressure:(0,Q.parsePercent)(D.brushPosePressure),tiltX:D.brushPoseTiltX,tiltY:D.brushPoseTiltY,angle:D.brushPoseAngle});var M=D.toolOptions;M&&(B.toolOptions={type:Fh[M._classID]||"brush",brushPreset:M.brushPreset,flow:(t=M.flow)!==null&&t!==void 0?t:100,smooth:(r=M.Smoo)!==null&&r!==void 0?r:0,mode:Q.BlnM.decode(M["Md  "]||"BlnM.Nrml"),opacity:(i=M.Opct)!==null&&i!==void 0?i:100,smoothing:!!M.smoothing,smoothingValue:M.smoothingValue||0,smoothingRadiusMode:!!M.smoothingRadiusMode,smoothingCatchup:!!M.smoothingCatchup,smoothingCatchupAtEnd:!!M.smoothingCatchupAtEnd,smoothingZoomCompensation:!!M.smoothingZoomCompensation,pressureSmoothing:!!M.pressureSmoothing,usePressureOverridesSize:!!M.usePressureOverridesSize,usePressureOverridesOpacity:!!M.usePressureOverridesOpacity,useLegacy:!!M.useLegacy},M.prVr&&(B.toolOptions.flowDynamics=Le(M.prVr)),M.opVr&&(B.toolOptions.opacityDynamics=Le(M.opVr)),M.szVr&&(B.toolOptions.sizeDynamics=Le(M.szVr)),"wetness"in M&&(B.toolOptions.wetness=M.wetness),"dryness"in M&&(B.toolOptions.dryness=M.dryness),"mix"in M&&(B.toolOptions.mix=M.mix),"autoFill"in M&&(B.toolOptions.autoFill=M.autoFill),"autoClean"in M&&(B.toolOptions.autoClean=M.autoClean),"loadSolidColorOnly"in M&&(B.toolOptions.loadSolidColorOnly=M.loadSolidColorOnly),"sampleAllLayers"in M&&(B.toolOptions.sampleAllLayers=M.sampleAllLayers),"SmdF"in M&&(B.toolOptions.smudgeFingerPainting=M.SmdF),"SmdS"in M&&(B.toolOptions.smudgeSampleAllLayers=M.SmdS),"Prs "in M&&(B.toolOptions.strength=M["Prs "]),"SmdF"in M&&(B.toolOptions.smudgeFingerPainting=M.SmdF),"SmdS"in M&&(B.toolOptions.smudgeSampleAllLayers=M.SmdS)),l.push(B)}break}case"patt":{o.offset<m&&(u.push((0,Ce.readPattern)(o)),o.offset=m);break}case"phry":{var T=(0,Q.readVersionAndDescriptor)(o);n.logMissingFeatures&&!((a=T.hierarchy)===null||a===void 0)&&a.length;break}default:throw new Error("Invalid brush type: ".concat(f))}for(;h%4;)o.offset++,h++}}else throw new Error("Unsupported ABR version (".concat(s,")"));return{samples:c,patterns:u,brushes:l}}Tn.readAbr=kh});var Uc=oe(Mn=>{"use strict";var qa=Mn&&Mn.__assign||function(){return qa=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qa.apply(this,arguments)};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.readCsh=void 0;var Ah=ni(),et=Nt();function Dh(e){var n=(0,et.createReader)(e.buffer,e.byteOffset,e.byteLength),t={shapes:[]};if((0,et.checkSignature)(n,"cush"),(0,et.readUint32)(n)!==2)throw new Error("Invalid version");for(var r=(0,et.readUint32)(n),i=0;i<r;i++){for(var a=(0,et.readUnicodeString)(n);n.offset%4;)n.offset++;if((0,et.readUint32)(n)!==1)throw new Error("Invalid shape version");var o=(0,et.readUint32)(n),s=n.offset+o,c=(0,et.readPascalString)(n,1),l=(0,et.readUint32)(n),u=(0,et.readUint32)(n),d=(0,et.readUint32)(n),f=(0,et.readUint32)(n),h=f-u,m=d-l,w={paths:[]};(0,Ah.readVectorMask)(n,w,h,m,s-n.offset),t.shapes.push(qa({name:a,id:c,width:h,height:m},w)),n.offset=s}return t}Mn.readCsh=Dh});var Pc=oe(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.LayerCompCapturedInfo=at.SectionDividerType=at.ColorMode=void 0;var Eh;(function(e){e[e.Bitmap=0]="Bitmap",e[e.Grayscale=1]="Grayscale",e[e.Indexed=2]="Indexed",e[e.RGB=3]="RGB",e[e.CMYK=4]="CMYK",e[e.Multichannel=7]="Multichannel",e[e.Duotone=8]="Duotone",e[e.Lab=9]="Lab"})(Eh=at.ColorMode||(at.ColorMode={}));var Uh;(function(e){e[e.Other=0]="Other",e[e.OpenFolder=1]="OpenFolder",e[e.ClosedFolder=2]="ClosedFolder",e[e.BoundingSectionDivider=3]="BoundingSectionDivider"})(Uh=at.SectionDividerType||(at.SectionDividerType={}));var Ph;(function(e){e[e.None=0]="None",e[e.Visibility=1]="Visibility",e[e.Position=2]="Position",e[e.Appearance=4]="Appearance"})(Ph=at.LayerCompCapturedInfo||(at.LayerCompCapturedInfo={}))});var Mc=oe(_e=>{"use strict";var Th=_e&&_e.__createBinding||(Object.create?function(e,n,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(n,t);(!i||("get"in i?!n.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,i)}:function(e,n,t,r){r===void 0&&(r=t),e[r]=n[t]}),Ka=_e&&_e.__exportStar||function(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&Th(n,e,t)};Object.defineProperty(_e,"__esModule",{value:!0});_e.writePsdBuffer=_e.writePsdUint8Array=_e.writePsd=_e.readPsd=_e.byteArrayToBase64=_e.initializeCanvas=void 0;var Ln=Sn(),Ya=Nt(),Mh=Lr();Ka(Ec(),_e);Ka(Uc(),_e);var Lh=zt();Object.defineProperty(_e,"initializeCanvas",{enumerable:!0,get:function(){return Lh.initializeCanvas}});Ka(Pc(),_e);_e.byteArrayToBase64=Mh.fromByteArray;function Oh(e,n){var t="buffer"in e?(0,Ya.createReader)(e.buffer,e.byteOffset,e.byteLength):(0,Ya.createReader)(e);return(0,Ya.readPsd)(t,n)}_e.readPsd=Oh;function Bh(e,n){var t=(0,Ln.createWriter)();return(0,Ln.writePsd)(t,e,n),(0,Ln.getWriterBuffer)(t)}_e.writePsd=Bh;function Tc(e,n){var t=(0,Ln.createWriter)();return(0,Ln.writePsd)(t,e,n),(0,Ln.getWriterBufferNoCopy)(t)}_e.writePsdUint8Array=Tc;function Rh(e,n){if(typeof Buffer>"u")throw new Error("Buffer not supported on this platform");return Buffer.from(Tc(e,n))}_e.writePsdBuffer=Rh});var zh={};oo(zh,{createPSDFromLayers:()=>Lc,createPSDFromUrls:()=>Oc,downloadPSD:()=>Bc,loadImage:()=>vi,writePsd:()=>fr.writePsd});var fr=Xc(Mc(),1);function vi(e){return new Promise((n,t)=>{let r=new Image;r.crossOrigin="anonymous",r.onload=()=>n(r),r.onerror=i=>t(new Error(`Failed to load image: ${e}`)),r.src=e})}async function Lc(e){let{layers:n,width:t,height:r}=e,i=document.createElement("canvas");i.width=t,i.height=r;let a=i.getContext("2d"),o=[];for(let c of n){let l=`/view?filename=${encodeURIComponent(c.filename)}&type=output&t=${Date.now()}`,u=await vi(l),d=document.createElement("canvas");d.width=t,d.height=r,d.getContext("2d").drawImage(u,0,0,t,r),a.drawImage(u,0,0,t,r),o.push({name:c.name,canvas:d,left:0,top:0,right:t,bottom:r,blendMode:c.blendMode||"normal",opacity:c.opacity!==void 0?c.opacity:1})}return(0,fr.writePsd)({width:t,height:r,canvas:i,children:o})}async function Oc(e,n,t){let r=document.createElement("canvas");r.width=n,r.height=t;let i=r.getContext("2d"),a=[];for(let s of e){let c=await vi(s.url),l=document.createElement("canvas");l.width=n,l.height=t,l.getContext("2d").drawImage(c,0,0,n,t),i.drawImage(c,0,0,n,t),a.push({name:s.name||`Layer ${a.length+1}`,canvas:l,left:0,top:0,right:n,bottom:t,blendMode:s.blendMode||"normal",opacity:s.opacity!==void 0?s.opacity:1})}return(0,fr.writePsd)({width:n,height:t,canvas:r,children:a})}function Bc(e,n){let t=new Blob([e],{type:"application/octet-stream"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}window.AgPsd={writePsd:fr.writePsd,loadImage:vi,createPSDFromLayers:Lc,createPSDFromUrls:Oc,downloadPSD:Bc};return gi(zh);})();
